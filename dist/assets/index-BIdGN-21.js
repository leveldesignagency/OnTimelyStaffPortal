var bp=Object.defineProperty;var jp=(t,e,r)=>e in t?bp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Yi=(t,e,r)=>jp(t,typeof e!="symbol"?e+"":e,r);function Np(t,e){for(var r=0;r<e.length;r++){const s=e[r];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in t)){const i=Object.getOwnPropertyDescriptor(s,a);i&&Object.defineProperty(t,a,i.get?i:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var jt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _p(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function kp(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var a=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(r,s,a.get?a:{enumerable:!0,get:function(){return t[s]}})}),r}var Qu={exports:{}},ki={},Yu={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xn=Symbol.for("react.element"),Sp=Symbol.for("react.portal"),Cp=Symbol.for("react.fragment"),Ep=Symbol.for("react.strict_mode"),Tp=Symbol.for("react.profiler"),Pp=Symbol.for("react.provider"),Ap=Symbol.for("react.context"),Rp=Symbol.for("react.forward_ref"),Dp=Symbol.for("react.suspense"),Op=Symbol.for("react.memo"),Up=Symbol.for("react.lazy"),ld=Symbol.iterator;function $p(t){return t===null||typeof t!="object"?null:(t=ld&&t[ld]||t["@@iterator"],typeof t=="function"?t:null)}var Xu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},eh=Object.assign,th={};function Vs(t,e,r){this.props=t,this.context=e,this.refs=th,this.updater=r||Xu}Vs.prototype.isReactComponent={};Vs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Vs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function rh(){}rh.prototype=Vs.prototype;function Qo(t,e,r){this.props=t,this.context=e,this.refs=th,this.updater=r||Xu}var Yo=Qo.prototype=new rh;Yo.constructor=Qo;eh(Yo,Vs.prototype);Yo.isPureReactComponent=!0;var od=Array.isArray,sh=Object.prototype.hasOwnProperty,Xo={current:null},nh={key:!0,ref:!0,__self:!0,__source:!0};function ah(t,e,r){var s,a={},i=null,l=null;if(e!=null)for(s in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(i=""+e.key),e)sh.call(e,s)&&!nh.hasOwnProperty(s)&&(a[s]=e[s]);var o=arguments.length-2;if(o===1)a.children=r;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];a.children=c}if(t&&t.defaultProps)for(s in o=t.defaultProps,o)a[s]===void 0&&(a[s]=o[s]);return{$$typeof:Xn,type:t,key:i,ref:l,props:a,_owner:Xo.current}}function Ip(t,e){return{$$typeof:Xn,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ec(t){return typeof t=="object"&&t!==null&&t.$$typeof===Xn}function Lp(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var cd=/\/+/g;function Xi(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Lp(""+t.key):e.toString(36)}function Aa(t,e,r,s,a){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Xn:case Sp:l=!0}}if(l)return l=t,a=a(l),t=s===""?"."+Xi(l,0):s,od(a)?(r="",t!=null&&(r=t.replace(cd,"$&/")+"/"),Aa(a,e,r,"",function(d){return d})):a!=null&&(ec(a)&&(a=Ip(a,r+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(cd,"$&/")+"/")+t)),e.push(a)),1;if(l=0,s=s===""?".":s+":",od(t))for(var o=0;o<t.length;o++){i=t[o];var c=s+Xi(i,o);l+=Aa(i,e,r,c,a)}else if(c=$p(t),typeof c=="function")for(t=c.call(t),o=0;!(i=t.next()).done;)i=i.value,c=s+Xi(i,o++),l+=Aa(i,e,r,c,a);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function ca(t,e,r){if(t==null)return t;var s=[],a=0;return Aa(t,s,"","",function(i){return e.call(r,i,a++)}),s}function Mp(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ye={current:null},Ra={transition:null},Fp={ReactCurrentDispatcher:Ye,ReactCurrentBatchConfig:Ra,ReactCurrentOwner:Xo};function ih(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:ca,forEach:function(t,e,r){ca(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return ca(t,function(){e++}),e},toArray:function(t){return ca(t,function(e){return e})||[]},only:function(t){if(!ec(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};te.Component=Vs;te.Fragment=Cp;te.Profiler=Tp;te.PureComponent=Qo;te.StrictMode=Ep;te.Suspense=Dp;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fp;te.act=ih;te.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=eh({},t.props),a=t.key,i=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,l=Xo.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in e)sh.call(e,c)&&!nh.hasOwnProperty(c)&&(s[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];s.children=o}return{$$typeof:Xn,type:t.type,key:a,ref:i,props:s,_owner:l}};te.createContext=function(t){return t={$$typeof:Ap,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Pp,_context:t},t.Consumer=t};te.createElement=ah;te.createFactory=function(t){var e=ah.bind(null,t);return e.type=t,e};te.createRef=function(){return{current:null}};te.forwardRef=function(t){return{$$typeof:Rp,render:t}};te.isValidElement=ec;te.lazy=function(t){return{$$typeof:Up,_payload:{_status:-1,_result:t},_init:Mp}};te.memo=function(t,e){return{$$typeof:Op,type:t,compare:e===void 0?null:e}};te.startTransition=function(t){var e=Ra.transition;Ra.transition={};try{t()}finally{Ra.transition=e}};te.unstable_act=ih;te.useCallback=function(t,e){return Ye.current.useCallback(t,e)};te.useContext=function(t){return Ye.current.useContext(t)};te.useDebugValue=function(){};te.useDeferredValue=function(t){return Ye.current.useDeferredValue(t)};te.useEffect=function(t,e){return Ye.current.useEffect(t,e)};te.useId=function(){return Ye.current.useId()};te.useImperativeHandle=function(t,e,r){return Ye.current.useImperativeHandle(t,e,r)};te.useInsertionEffect=function(t,e){return Ye.current.useInsertionEffect(t,e)};te.useLayoutEffect=function(t,e){return Ye.current.useLayoutEffect(t,e)};te.useMemo=function(t,e){return Ye.current.useMemo(t,e)};te.useReducer=function(t,e,r){return Ye.current.useReducer(t,e,r)};te.useRef=function(t){return Ye.current.useRef(t)};te.useState=function(t){return Ye.current.useState(t)};te.useSyncExternalStore=function(t,e,r){return Ye.current.useSyncExternalStore(t,e,r)};te.useTransition=function(){return Ye.current.useTransition()};te.version="18.3.1";Yu.exports=te;var g=Yu.exports;const lh=_p(g),zp=Np({__proto__:null,default:lh},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bp=g,qp=Symbol.for("react.element"),Wp=Symbol.for("react.fragment"),Vp=Object.prototype.hasOwnProperty,Hp=Bp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Kp={key:!0,ref:!0,__self:!0,__source:!0};function oh(t,e,r){var s,a={},i=null,l=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(l=e.ref);for(s in e)Vp.call(e,s)&&!Kp.hasOwnProperty(s)&&(a[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)a[s]===void 0&&(a[s]=e[s]);return{$$typeof:qp,type:t,key:i,ref:l,props:a,_owner:Hp.current}}ki.Fragment=Wp;ki.jsx=oh;ki.jsxs=oh;Qu.exports=ki;var n=Qu.exports,Ul={},ch={exports:{}},mt={},dh={exports:{}},uh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(S,D){var q=S.length;S.push(D);e:for(;0<q;){var j=q-1>>>1,K=S[j];if(0<a(K,D))S[j]=D,S[q]=K,q=j;else break e}}function r(S){return S.length===0?null:S[0]}function s(S){if(S.length===0)return null;var D=S[0],q=S.pop();if(q!==D){S[0]=q;e:for(var j=0,K=S.length,Fe=K>>>1;j<Fe;){var re=2*(j+1)-1,_e=S[re],Ce=re+1,ze=S[Ce];if(0>a(_e,q))Ce<K&&0>a(ze,_e)?(S[j]=ze,S[Ce]=q,j=Ce):(S[j]=_e,S[re]=q,j=re);else if(Ce<K&&0>a(ze,q))S[j]=ze,S[Ce]=q,j=Ce;else break e}}return D}function a(S,D){var q=S.sortIndex-D.sortIndex;return q!==0?q:S.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var c=[],d=[],h=1,u=null,m=3,y=!1,w=!1,_=!1,N=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function f(S){for(var D=r(d);D!==null;){if(D.callback===null)s(d);else if(D.startTime<=S)s(d),D.sortIndex=D.expirationTime,e(c,D);else break;D=r(d)}}function b(S){if(_=!1,f(S),!w)if(r(c)!==null)w=!0,V(v);else{var D=r(d);D!==null&&H(b,D.startTime-S)}}function v(S,D){w=!1,_&&(_=!1,x(U),U=-1),y=!0;var q=m;try{for(f(D),u=r(c);u!==null&&(!(u.expirationTime>D)||S&&!G());){var j=u.callback;if(typeof j=="function"){u.callback=null,m=u.priorityLevel;var K=j(u.expirationTime<=D);D=t.unstable_now(),typeof K=="function"?u.callback=K:u===r(c)&&s(c),f(D)}else s(c);u=r(c)}if(u!==null)var Fe=!0;else{var re=r(d);re!==null&&H(b,re.startTime-D),Fe=!1}return Fe}finally{u=null,m=q,y=!1}}var C=!1,P=null,U=-1,J=5,W=-1;function G(){return!(t.unstable_now()-W<J)}function De(){if(P!==null){var S=t.unstable_now();W=S;var D=!0;try{D=P(!0,S)}finally{D?Se():(C=!1,P=null)}}else C=!1}var Se;if(typeof p=="function")Se=function(){p(De)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,I=R.port2;R.port1.onmessage=De,Se=function(){I.postMessage(null)}}else Se=function(){N(De,0)};function V(S){P=S,C||(C=!0,Se())}function H(S,D){U=N(function(){S(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(S){S.callback=null},t.unstable_continueExecution=function(){w||y||(w=!0,V(v))},t.unstable_forceFrameRate=function(S){0>S||125<S?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<S?Math.floor(1e3/S):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(S){switch(m){case 1:case 2:case 3:var D=3;break;default:D=m}var q=m;m=D;try{return S()}finally{m=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(S,D){switch(S){case 1:case 2:case 3:case 4:case 5:break;default:S=3}var q=m;m=S;try{return D()}finally{m=q}},t.unstable_scheduleCallback=function(S,D,q){var j=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?j+q:j):q=j,S){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=q+K,S={id:h++,callback:D,priorityLevel:S,startTime:q,expirationTime:K,sortIndex:-1},q>j?(S.sortIndex=q,e(d,S),r(c)===null&&S===r(d)&&(_?(x(U),U=-1):_=!0,H(b,q-j))):(S.sortIndex=K,e(c,S),w||y||(w=!0,V(v))),S},t.unstable_shouldYield=G,t.unstable_wrapCallback=function(S){var D=m;return function(){var q=m;m=D;try{return S.apply(this,arguments)}finally{m=q}}}})(uh);dh.exports=uh;var Gp=dh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jp=g,ht=Gp;function O(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hh=new Set,Rn={};function ts(t,e){Ds(t,e),Ds(t+"Capture",e)}function Ds(t,e){for(Rn[t]=e,t=0;t<e.length;t++)hh.add(e[t])}var er=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$l=Object.prototype.hasOwnProperty,Zp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,dd={},ud={};function Qp(t){return $l.call(ud,t)?!0:$l.call(dd,t)?!1:Zp.test(t)?ud[t]=!0:(dd[t]=!0,!1)}function Yp(t,e,r,s){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Xp(t,e,r,s){if(e===null||typeof e>"u"||Yp(t,e,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Xe(t,e,r,s,a,i,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=l}var Me={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Me[t]=new Xe(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Me[e]=new Xe(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Me[t]=new Xe(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Me[t]=new Xe(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Me[t]=new Xe(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Me[t]=new Xe(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Me[t]=new Xe(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Me[t]=new Xe(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Me[t]=new Xe(t,5,!1,t.toLowerCase(),null,!1,!1)});var tc=/[\-:]([a-z])/g;function rc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(tc,rc);Me[e]=new Xe(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(tc,rc);Me[e]=new Xe(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(tc,rc);Me[e]=new Xe(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Me[t]=new Xe(t,1,!1,t.toLowerCase(),null,!1,!1)});Me.xlinkHref=new Xe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Me[t]=new Xe(t,1,!1,t.toLowerCase(),null,!0,!0)});function sc(t,e,r,s){var a=Me.hasOwnProperty(e)?Me[e]:null;(a!==null?a.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Xp(e,r,a,s)&&(r=null),s||a===null?Qp(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):a.mustUseProperty?t[a.propertyName]=r===null?a.type===3?!1:"":r:(e=a.attributeName,s=a.attributeNamespace,r===null?t.removeAttribute(e):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,s?t.setAttributeNS(s,e,r):t.setAttribute(e,r))))}var ar=Jp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,da=Symbol.for("react.element"),ms=Symbol.for("react.portal"),fs=Symbol.for("react.fragment"),nc=Symbol.for("react.strict_mode"),Il=Symbol.for("react.profiler"),mh=Symbol.for("react.provider"),fh=Symbol.for("react.context"),ac=Symbol.for("react.forward_ref"),Ll=Symbol.for("react.suspense"),Ml=Symbol.for("react.suspense_list"),ic=Symbol.for("react.memo"),ur=Symbol.for("react.lazy"),ph=Symbol.for("react.offscreen"),hd=Symbol.iterator;function rn(t){return t===null||typeof t!="object"?null:(t=hd&&t[hd]||t["@@iterator"],typeof t=="function"?t:null)}var ve=Object.assign,el;function hn(t){if(el===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);el=e&&e[1]||""}return`
`+el+t}var tl=!1;function rl(t,e){if(!t||tl)return"";tl=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var s=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){s=d}t.call(e.prototype)}else{try{throw Error()}catch(d){s=d}t()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=s.stack.split(`
`),l=a.length-1,o=i.length-1;1<=l&&0<=o&&a[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(a[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||a[l]!==i[o]){var c=`
`+a[l].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=l&&0<=o);break}}}finally{tl=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?hn(t):""}function e0(t){switch(t.tag){case 5:return hn(t.type);case 16:return hn("Lazy");case 13:return hn("Suspense");case 19:return hn("SuspenseList");case 0:case 2:case 15:return t=rl(t.type,!1),t;case 11:return t=rl(t.type.render,!1),t;case 1:return t=rl(t.type,!0),t;default:return""}}function Fl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case fs:return"Fragment";case ms:return"Portal";case Il:return"Profiler";case nc:return"StrictMode";case Ll:return"Suspense";case Ml:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case fh:return(t.displayName||"Context")+".Consumer";case mh:return(t._context.displayName||"Context")+".Provider";case ac:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ic:return e=t.displayName||null,e!==null?e:Fl(t.type)||"Memo";case ur:e=t._payload,t=t._init;try{return Fl(t(e))}catch{}}return null}function t0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fl(e);case 8:return e===nc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Tr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function gh(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function r0(t){var e=gh(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(l){s=""+l,i.call(this,l)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(l){s=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ua(t){t._valueTracker||(t._valueTracker=r0(t))}function xh(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),s="";return t&&(s=gh(t)?t.checked?"true":"false":t.value),t=s,t!==r?(e.setValue(t),!0):!1}function Ha(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function zl(t,e){var r=e.checked;return ve({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function md(t,e){var r=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;r=Tr(e.value!=null?e.value:r),t._wrapperState={initialChecked:s,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function yh(t,e){e=e.checked,e!=null&&sc(t,"checked",e,!1)}function Bl(t,e){yh(t,e);var r=Tr(e.value),s=e.type;if(r!=null)s==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ql(t,e.type,r):e.hasOwnProperty("defaultValue")&&ql(t,e.type,Tr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function fd(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function ql(t,e,r){(e!=="number"||Ha(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var mn=Array.isArray;function ks(t,e,r,s){if(t=t.options,e){e={};for(var a=0;a<r.length;a++)e["$"+r[a]]=!0;for(r=0;r<t.length;r++)a=e.hasOwnProperty("$"+t[r].value),t[r].selected!==a&&(t[r].selected=a),a&&s&&(t[r].defaultSelected=!0)}else{for(r=""+Tr(r),e=null,a=0;a<t.length;a++){if(t[a].value===r){t[a].selected=!0,s&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function Wl(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(O(91));return ve({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function pd(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(O(92));if(mn(r)){if(1<r.length)throw Error(O(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Tr(r)}}function vh(t,e){var r=Tr(e.value),s=Tr(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),s!=null&&(t.defaultValue=""+s)}function gd(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function wh(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vl(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?wh(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ha,bh=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,s,a){MSApp.execUnsafeLocalFunction(function(){return t(e,r,s,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ha=ha||document.createElement("div"),ha.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ha.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Dn(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var yn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},s0=["Webkit","ms","Moz","O"];Object.keys(yn).forEach(function(t){s0.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),yn[e]=yn[t]})});function jh(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||yn.hasOwnProperty(t)&&yn[t]?(""+e).trim():e+"px"}function Nh(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var s=r.indexOf("--")===0,a=jh(r,e[r],s);r==="float"&&(r="cssFloat"),s?t.setProperty(r,a):t[r]=a}}var n0=ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hl(t,e){if(e){if(n0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(O(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(O(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(O(61))}if(e.style!=null&&typeof e.style!="object")throw Error(O(62))}}function Kl(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gl=null;function lc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Jl=null,Ss=null,Cs=null;function xd(t){if(t=ra(t)){if(typeof Jl!="function")throw Error(O(280));var e=t.stateNode;e&&(e=Pi(e),Jl(t.stateNode,t.type,e))}}function _h(t){Ss?Cs?Cs.push(t):Cs=[t]:Ss=t}function kh(){if(Ss){var t=Ss,e=Cs;if(Cs=Ss=null,xd(t),e)for(t=0;t<e.length;t++)xd(e[t])}}function Sh(t,e){return t(e)}function Ch(){}var sl=!1;function Eh(t,e,r){if(sl)return t(e,r);sl=!0;try{return Sh(t,e,r)}finally{sl=!1,(Ss!==null||Cs!==null)&&(Ch(),kh())}}function On(t,e){var r=t.stateNode;if(r===null)return null;var s=Pi(r);if(s===null)return null;r=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(O(231,e,typeof r));return r}var Zl=!1;if(er)try{var sn={};Object.defineProperty(sn,"passive",{get:function(){Zl=!0}}),window.addEventListener("test",sn,sn),window.removeEventListener("test",sn,sn)}catch{Zl=!1}function a0(t,e,r,s,a,i,l,o,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(r,d)}catch(h){this.onError(h)}}var vn=!1,Ka=null,Ga=!1,Ql=null,i0={onError:function(t){vn=!0,Ka=t}};function l0(t,e,r,s,a,i,l,o,c){vn=!1,Ka=null,a0.apply(i0,arguments)}function o0(t,e,r,s,a,i,l,o,c){if(l0.apply(this,arguments),vn){if(vn){var d=Ka;vn=!1,Ka=null}else throw Error(O(198));Ga||(Ga=!0,Ql=d)}}function rs(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Th(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function yd(t){if(rs(t)!==t)throw Error(O(188))}function c0(t){var e=t.alternate;if(!e){if(e=rs(t),e===null)throw Error(O(188));return e!==t?null:t}for(var r=t,s=e;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(s=a.return,s!==null){r=s;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return yd(a),t;if(i===s)return yd(a),e;i=i.sibling}throw Error(O(188))}if(r.return!==s.return)r=a,s=i;else{for(var l=!1,o=a.child;o;){if(o===r){l=!0,r=a,s=i;break}if(o===s){l=!0,s=a,r=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===r){l=!0,r=i,s=a;break}if(o===s){l=!0,s=i,r=a;break}o=o.sibling}if(!l)throw Error(O(189))}}if(r.alternate!==s)throw Error(O(190))}if(r.tag!==3)throw Error(O(188));return r.stateNode.current===r?t:e}function Ph(t){return t=c0(t),t!==null?Ah(t):null}function Ah(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ah(t);if(e!==null)return e;t=t.sibling}return null}var Rh=ht.unstable_scheduleCallback,vd=ht.unstable_cancelCallback,d0=ht.unstable_shouldYield,u0=ht.unstable_requestPaint,je=ht.unstable_now,h0=ht.unstable_getCurrentPriorityLevel,oc=ht.unstable_ImmediatePriority,Dh=ht.unstable_UserBlockingPriority,Ja=ht.unstable_NormalPriority,m0=ht.unstable_LowPriority,Oh=ht.unstable_IdlePriority,Si=null,Ft=null;function f0(t){if(Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(Si,t,void 0,(t.current.flags&128)===128)}catch{}}var At=Math.clz32?Math.clz32:x0,p0=Math.log,g0=Math.LN2;function x0(t){return t>>>=0,t===0?32:31-(p0(t)/g0|0)|0}var ma=64,fa=4194304;function fn(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Za(t,e){var r=t.pendingLanes;if(r===0)return 0;var s=0,a=t.suspendedLanes,i=t.pingedLanes,l=r&268435455;if(l!==0){var o=l&~a;o!==0?s=fn(o):(i&=l,i!==0&&(s=fn(i)))}else l=r&~a,l!==0?s=fn(l):i!==0&&(s=fn(i));if(s===0)return 0;if(e!==0&&e!==s&&!(e&a)&&(a=s&-s,i=e&-e,a>=i||a===16&&(i&4194240)!==0))return e;if(s&4&&(s|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)r=31-At(e),a=1<<r,s|=t[r],e&=~a;return s}function y0(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function v0(t,e){for(var r=t.suspendedLanes,s=t.pingedLanes,a=t.expirationTimes,i=t.pendingLanes;0<i;){var l=31-At(i),o=1<<l,c=a[l];c===-1?(!(o&r)||o&s)&&(a[l]=y0(o,e)):c<=e&&(t.expiredLanes|=o),i&=~o}}function Yl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Uh(){var t=ma;return ma<<=1,!(ma&4194240)&&(ma=64),t}function nl(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function ea(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-At(e),t[e]=r}function w0(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<r;){var a=31-At(r),i=1<<a;e[a]=0,s[a]=-1,t[a]=-1,r&=~i}}function cc(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var s=31-At(r),a=1<<s;a&e|t[s]&e&&(t[s]|=e),r&=~a}}var oe=0;function $h(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ih,dc,Lh,Mh,Fh,Xl=!1,pa=[],wr=null,br=null,jr=null,Un=new Map,$n=new Map,mr=[],b0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wd(t,e){switch(t){case"focusin":case"focusout":wr=null;break;case"dragenter":case"dragleave":br=null;break;case"mouseover":case"mouseout":jr=null;break;case"pointerover":case"pointerout":Un.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":$n.delete(e.pointerId)}}function nn(t,e,r,s,a,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:s,nativeEvent:i,targetContainers:[a]},e!==null&&(e=ra(e),e!==null&&dc(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function j0(t,e,r,s,a){switch(e){case"focusin":return wr=nn(wr,t,e,r,s,a),!0;case"dragenter":return br=nn(br,t,e,r,s,a),!0;case"mouseover":return jr=nn(jr,t,e,r,s,a),!0;case"pointerover":var i=a.pointerId;return Un.set(i,nn(Un.get(i)||null,t,e,r,s,a)),!0;case"gotpointercapture":return i=a.pointerId,$n.set(i,nn($n.get(i)||null,t,e,r,s,a)),!0}return!1}function zh(t){var e=Wr(t.target);if(e!==null){var r=rs(e);if(r!==null){if(e=r.tag,e===13){if(e=Th(r),e!==null){t.blockedOn=e,Fh(t.priority,function(){Lh(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Da(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=eo(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var s=new r.constructor(r.type,r);Gl=s,r.target.dispatchEvent(s),Gl=null}else return e=ra(r),e!==null&&dc(e),t.blockedOn=r,!1;e.shift()}return!0}function bd(t,e,r){Da(t)&&r.delete(e)}function N0(){Xl=!1,wr!==null&&Da(wr)&&(wr=null),br!==null&&Da(br)&&(br=null),jr!==null&&Da(jr)&&(jr=null),Un.forEach(bd),$n.forEach(bd)}function an(t,e){t.blockedOn===e&&(t.blockedOn=null,Xl||(Xl=!0,ht.unstable_scheduleCallback(ht.unstable_NormalPriority,N0)))}function In(t){function e(a){return an(a,t)}if(0<pa.length){an(pa[0],t);for(var r=1;r<pa.length;r++){var s=pa[r];s.blockedOn===t&&(s.blockedOn=null)}}for(wr!==null&&an(wr,t),br!==null&&an(br,t),jr!==null&&an(jr,t),Un.forEach(e),$n.forEach(e),r=0;r<mr.length;r++)s=mr[r],s.blockedOn===t&&(s.blockedOn=null);for(;0<mr.length&&(r=mr[0],r.blockedOn===null);)zh(r),r.blockedOn===null&&mr.shift()}var Es=ar.ReactCurrentBatchConfig,Qa=!0;function _0(t,e,r,s){var a=oe,i=Es.transition;Es.transition=null;try{oe=1,uc(t,e,r,s)}finally{oe=a,Es.transition=i}}function k0(t,e,r,s){var a=oe,i=Es.transition;Es.transition=null;try{oe=4,uc(t,e,r,s)}finally{oe=a,Es.transition=i}}function uc(t,e,r,s){if(Qa){var a=eo(t,e,r,s);if(a===null)fl(t,e,s,Ya,r),wd(t,s);else if(j0(a,t,e,r,s))s.stopPropagation();else if(wd(t,s),e&4&&-1<b0.indexOf(t)){for(;a!==null;){var i=ra(a);if(i!==null&&Ih(i),i=eo(t,e,r,s),i===null&&fl(t,e,s,Ya,r),i===a)break;a=i}a!==null&&s.stopPropagation()}else fl(t,e,s,null,r)}}var Ya=null;function eo(t,e,r,s){if(Ya=null,t=lc(s),t=Wr(t),t!==null)if(e=rs(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Th(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ya=t,null}function Bh(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(h0()){case oc:return 1;case Dh:return 4;case Ja:case m0:return 16;case Oh:return 536870912;default:return 16}default:return 16}}var xr=null,hc=null,Oa=null;function qh(){if(Oa)return Oa;var t,e=hc,r=e.length,s,a="value"in xr?xr.value:xr.textContent,i=a.length;for(t=0;t<r&&e[t]===a[t];t++);var l=r-t;for(s=1;s<=l&&e[r-s]===a[i-s];s++);return Oa=a.slice(t,1<s?1-s:void 0)}function Ua(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ga(){return!0}function jd(){return!1}function ft(t){function e(r,s,a,i,l){this._reactName=r,this._targetInst=a,this.type=s,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ga:jd,this.isPropagationStopped=jd,this}return ve(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ga)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ga)},persist:function(){},isPersistent:ga}),e}var Hs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mc=ft(Hs),ta=ve({},Hs,{view:0,detail:0}),S0=ft(ta),al,il,ln,Ci=ve({},ta,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ln&&(ln&&t.type==="mousemove"?(al=t.screenX-ln.screenX,il=t.screenY-ln.screenY):il=al=0,ln=t),al)},movementY:function(t){return"movementY"in t?t.movementY:il}}),Nd=ft(Ci),C0=ve({},Ci,{dataTransfer:0}),E0=ft(C0),T0=ve({},ta,{relatedTarget:0}),ll=ft(T0),P0=ve({},Hs,{animationName:0,elapsedTime:0,pseudoElement:0}),A0=ft(P0),R0=ve({},Hs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),D0=ft(R0),O0=ve({},Hs,{data:0}),_d=ft(O0),U0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},I0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function L0(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=I0[t])?!!e[t]:!1}function fc(){return L0}var M0=ve({},ta,{key:function(t){if(t.key){var e=U0[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ua(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?$0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fc,charCode:function(t){return t.type==="keypress"?Ua(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ua(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),F0=ft(M0),z0=ve({},Ci,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kd=ft(z0),B0=ve({},ta,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fc}),q0=ft(B0),W0=ve({},Hs,{propertyName:0,elapsedTime:0,pseudoElement:0}),V0=ft(W0),H0=ve({},Ci,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),K0=ft(H0),G0=[9,13,27,32],pc=er&&"CompositionEvent"in window,wn=null;er&&"documentMode"in document&&(wn=document.documentMode);var J0=er&&"TextEvent"in window&&!wn,Wh=er&&(!pc||wn&&8<wn&&11>=wn),Sd=" ",Cd=!1;function Vh(t,e){switch(t){case"keyup":return G0.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ps=!1;function Z0(t,e){switch(t){case"compositionend":return Hh(e);case"keypress":return e.which!==32?null:(Cd=!0,Sd);case"textInput":return t=e.data,t===Sd&&Cd?null:t;default:return null}}function Q0(t,e){if(ps)return t==="compositionend"||!pc&&Vh(t,e)?(t=qh(),Oa=hc=xr=null,ps=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Wh&&e.locale!=="ko"?null:e.data;default:return null}}var Y0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ed(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Y0[t.type]:e==="textarea"}function Kh(t,e,r,s){_h(s),e=Xa(e,"onChange"),0<e.length&&(r=new mc("onChange","change",null,r,s),t.push({event:r,listeners:e}))}var bn=null,Ln=null;function X0(t){nm(t,0)}function Ei(t){var e=ys(t);if(xh(e))return t}function eg(t,e){if(t==="change")return e}var Gh=!1;if(er){var ol;if(er){var cl="oninput"in document;if(!cl){var Td=document.createElement("div");Td.setAttribute("oninput","return;"),cl=typeof Td.oninput=="function"}ol=cl}else ol=!1;Gh=ol&&(!document.documentMode||9<document.documentMode)}function Pd(){bn&&(bn.detachEvent("onpropertychange",Jh),Ln=bn=null)}function Jh(t){if(t.propertyName==="value"&&Ei(Ln)){var e=[];Kh(e,Ln,t,lc(t)),Eh(X0,e)}}function tg(t,e,r){t==="focusin"?(Pd(),bn=e,Ln=r,bn.attachEvent("onpropertychange",Jh)):t==="focusout"&&Pd()}function rg(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ei(Ln)}function sg(t,e){if(t==="click")return Ei(e)}function ng(t,e){if(t==="input"||t==="change")return Ei(e)}function ag(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Dt=typeof Object.is=="function"?Object.is:ag;function Mn(t,e){if(Dt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var a=r[s];if(!$l.call(e,a)||!Dt(t[a],e[a]))return!1}return!0}function Ad(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Rd(t,e){var r=Ad(t);t=0;for(var s;r;){if(r.nodeType===3){if(s=t+r.textContent.length,t<=e&&s>=e)return{node:r,offset:e-t};t=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Ad(r)}}function Zh(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Zh(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Qh(){for(var t=window,e=Ha();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Ha(t.document)}return e}function gc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ig(t){var e=Qh(),r=t.focusedElem,s=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Zh(r.ownerDocument.documentElement,r)){if(s!==null&&gc(r)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=r.textContent.length,i=Math.min(s.start,a);s=s.end===void 0?i:Math.min(s.end,a),!t.extend&&i>s&&(a=s,s=i,i=a),a=Rd(r,i);var l=Rd(r,s);a&&l&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),i>s?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var lg=er&&"documentMode"in document&&11>=document.documentMode,gs=null,to=null,jn=null,ro=!1;function Dd(t,e,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ro||gs==null||gs!==Ha(s)||(s=gs,"selectionStart"in s&&gc(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),jn&&Mn(jn,s)||(jn=s,s=Xa(to,"onSelect"),0<s.length&&(e=new mc("onSelect","select",null,e,r),t.push({event:e,listeners:s}),e.target=gs)))}function xa(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var xs={animationend:xa("Animation","AnimationEnd"),animationiteration:xa("Animation","AnimationIteration"),animationstart:xa("Animation","AnimationStart"),transitionend:xa("Transition","TransitionEnd")},dl={},Yh={};er&&(Yh=document.createElement("div").style,"AnimationEvent"in window||(delete xs.animationend.animation,delete xs.animationiteration.animation,delete xs.animationstart.animation),"TransitionEvent"in window||delete xs.transitionend.transition);function Ti(t){if(dl[t])return dl[t];if(!xs[t])return t;var e=xs[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Yh)return dl[t]=e[r];return t}var Xh=Ti("animationend"),em=Ti("animationiteration"),tm=Ti("animationstart"),rm=Ti("transitionend"),sm=new Map,Od="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(t,e){sm.set(t,e),ts(e,[t])}for(var ul=0;ul<Od.length;ul++){var hl=Od[ul],og=hl.toLowerCase(),cg=hl[0].toUpperCase()+hl.slice(1);Ar(og,"on"+cg)}Ar(Xh,"onAnimationEnd");Ar(em,"onAnimationIteration");Ar(tm,"onAnimationStart");Ar("dblclick","onDoubleClick");Ar("focusin","onFocus");Ar("focusout","onBlur");Ar(rm,"onTransitionEnd");Ds("onMouseEnter",["mouseout","mouseover"]);Ds("onMouseLeave",["mouseout","mouseover"]);Ds("onPointerEnter",["pointerout","pointerover"]);Ds("onPointerLeave",["pointerout","pointerover"]);ts("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ts("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ts("onBeforeInput",["compositionend","keypress","textInput","paste"]);ts("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ts("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ts("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dg=new Set("cancel close invalid load scroll toggle".split(" ").concat(pn));function Ud(t,e,r){var s=t.type||"unknown-event";t.currentTarget=r,o0(s,e,void 0,t),t.currentTarget=null}function nm(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var s=t[r],a=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var l=s.length-1;0<=l;l--){var o=s[l],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==i&&a.isPropagationStopped())break e;Ud(a,o,d),i=c}else for(l=0;l<s.length;l++){if(o=s[l],c=o.instance,d=o.currentTarget,o=o.listener,c!==i&&a.isPropagationStopped())break e;Ud(a,o,d),i=c}}}if(Ga)throw t=Ql,Ga=!1,Ql=null,t}function he(t,e){var r=e[lo];r===void 0&&(r=e[lo]=new Set);var s=t+"__bubble";r.has(s)||(am(e,t,2,!1),r.add(s))}function ml(t,e,r){var s=0;e&&(s|=4),am(r,t,s,e)}var ya="_reactListening"+Math.random().toString(36).slice(2);function Fn(t){if(!t[ya]){t[ya]=!0,hh.forEach(function(r){r!=="selectionchange"&&(dg.has(r)||ml(r,!1,t),ml(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ya]||(e[ya]=!0,ml("selectionchange",!1,e))}}function am(t,e,r,s){switch(Bh(e)){case 1:var a=_0;break;case 4:a=k0;break;default:a=uc}r=a.bind(null,e,r,t),a=void 0,!Zl||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),s?a!==void 0?t.addEventListener(e,r,{capture:!0,passive:a}):t.addEventListener(e,r,!0):a!==void 0?t.addEventListener(e,r,{passive:a}):t.addEventListener(e,r,!1)}function fl(t,e,r,s,a){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var l=s.tag;if(l===3||l===4){var o=s.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(l===4)for(l=s.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;l=l.return}for(;o!==null;){if(l=Wr(o),l===null)return;if(c=l.tag,c===5||c===6){s=i=l;continue e}o=o.parentNode}}s=s.return}Eh(function(){var d=i,h=lc(r),u=[];e:{var m=sm.get(t);if(m!==void 0){var y=mc,w=t;switch(t){case"keypress":if(Ua(r)===0)break e;case"keydown":case"keyup":y=F0;break;case"focusin":w="focus",y=ll;break;case"focusout":w="blur",y=ll;break;case"beforeblur":case"afterblur":y=ll;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Nd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=E0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=q0;break;case Xh:case em:case tm:y=A0;break;case rm:y=V0;break;case"scroll":y=S0;break;case"wheel":y=K0;break;case"copy":case"cut":case"paste":y=D0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=kd}var _=(e&4)!==0,N=!_&&t==="scroll",x=_?m!==null?m+"Capture":null:m;_=[];for(var p=d,f;p!==null;){f=p;var b=f.stateNode;if(f.tag===5&&b!==null&&(f=b,x!==null&&(b=On(p,x),b!=null&&_.push(zn(p,b,f)))),N)break;p=p.return}0<_.length&&(m=new y(m,w,null,r,h),u.push({event:m,listeners:_}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&r!==Gl&&(w=r.relatedTarget||r.fromElement)&&(Wr(w)||w[tr]))break e;if((y||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,y?(w=r.relatedTarget||r.toElement,y=d,w=w?Wr(w):null,w!==null&&(N=rs(w),w!==N||w.tag!==5&&w.tag!==6)&&(w=null)):(y=null,w=d),y!==w)){if(_=Nd,b="onMouseLeave",x="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(_=kd,b="onPointerLeave",x="onPointerEnter",p="pointer"),N=y==null?m:ys(y),f=w==null?m:ys(w),m=new _(b,p+"leave",y,r,h),m.target=N,m.relatedTarget=f,b=null,Wr(h)===d&&(_=new _(x,p+"enter",w,r,h),_.target=f,_.relatedTarget=N,b=_),N=b,y&&w)t:{for(_=y,x=w,p=0,f=_;f;f=as(f))p++;for(f=0,b=x;b;b=as(b))f++;for(;0<p-f;)_=as(_),p--;for(;0<f-p;)x=as(x),f--;for(;p--;){if(_===x||x!==null&&_===x.alternate)break t;_=as(_),x=as(x)}_=null}else _=null;y!==null&&$d(u,m,y,_,!1),w!==null&&N!==null&&$d(u,N,w,_,!0)}}e:{if(m=d?ys(d):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var v=eg;else if(Ed(m))if(Gh)v=ng;else{v=rg;var C=tg}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(v=sg);if(v&&(v=v(t,d))){Kh(u,v,r,h);break e}C&&C(t,m,d),t==="focusout"&&(C=m._wrapperState)&&C.controlled&&m.type==="number"&&ql(m,"number",m.value)}switch(C=d?ys(d):window,t){case"focusin":(Ed(C)||C.contentEditable==="true")&&(gs=C,to=d,jn=null);break;case"focusout":jn=to=gs=null;break;case"mousedown":ro=!0;break;case"contextmenu":case"mouseup":case"dragend":ro=!1,Dd(u,r,h);break;case"selectionchange":if(lg)break;case"keydown":case"keyup":Dd(u,r,h)}var P;if(pc)e:{switch(t){case"compositionstart":var U="onCompositionStart";break e;case"compositionend":U="onCompositionEnd";break e;case"compositionupdate":U="onCompositionUpdate";break e}U=void 0}else ps?Vh(t,r)&&(U="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(U="onCompositionStart");U&&(Wh&&r.locale!=="ko"&&(ps||U!=="onCompositionStart"?U==="onCompositionEnd"&&ps&&(P=qh()):(xr=h,hc="value"in xr?xr.value:xr.textContent,ps=!0)),C=Xa(d,U),0<C.length&&(U=new _d(U,t,null,r,h),u.push({event:U,listeners:C}),P?U.data=P:(P=Hh(r),P!==null&&(U.data=P)))),(P=J0?Z0(t,r):Q0(t,r))&&(d=Xa(d,"onBeforeInput"),0<d.length&&(h=new _d("onBeforeInput","beforeinput",null,r,h),u.push({event:h,listeners:d}),h.data=P))}nm(u,e)})}function zn(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Xa(t,e){for(var r=e+"Capture",s=[];t!==null;){var a=t,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=On(t,r),i!=null&&s.unshift(zn(t,i,a)),i=On(t,e),i!=null&&s.push(zn(t,i,a))),t=t.return}return s}function as(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function $d(t,e,r,s,a){for(var i=e._reactName,l=[];r!==null&&r!==s;){var o=r,c=o.alternate,d=o.stateNode;if(c!==null&&c===s)break;o.tag===5&&d!==null&&(o=d,a?(c=On(r,i),c!=null&&l.unshift(zn(r,c,o))):a||(c=On(r,i),c!=null&&l.push(zn(r,c,o)))),r=r.return}l.length!==0&&t.push({event:e,listeners:l})}var ug=/\r\n?/g,hg=/\u0000|\uFFFD/g;function Id(t){return(typeof t=="string"?t:""+t).replace(ug,`
`).replace(hg,"")}function va(t,e,r){if(e=Id(e),Id(t)!==e&&r)throw Error(O(425))}function ei(){}var so=null,no=null;function ao(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var io=typeof setTimeout=="function"?setTimeout:void 0,mg=typeof clearTimeout=="function"?clearTimeout:void 0,Ld=typeof Promise=="function"?Promise:void 0,fg=typeof queueMicrotask=="function"?queueMicrotask:typeof Ld<"u"?function(t){return Ld.resolve(null).then(t).catch(pg)}:io;function pg(t){setTimeout(function(){throw t})}function pl(t,e){var r=e,s=0;do{var a=r.nextSibling;if(t.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(s===0){t.removeChild(a),In(e);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=a}while(r);In(e)}function Nr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Md(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Ks=Math.random().toString(36).slice(2),Lt="__reactFiber$"+Ks,Bn="__reactProps$"+Ks,tr="__reactContainer$"+Ks,lo="__reactEvents$"+Ks,gg="__reactListeners$"+Ks,xg="__reactHandles$"+Ks;function Wr(t){var e=t[Lt];if(e)return e;for(var r=t.parentNode;r;){if(e=r[tr]||r[Lt]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Md(t);t!==null;){if(r=t[Lt])return r;t=Md(t)}return e}t=r,r=t.parentNode}return null}function ra(t){return t=t[Lt]||t[tr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ys(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(O(33))}function Pi(t){return t[Bn]||null}var oo=[],vs=-1;function Rr(t){return{current:t}}function me(t){0>vs||(t.current=oo[vs],oo[vs]=null,vs--)}function ue(t,e){vs++,oo[vs]=t.current,t.current=e}var Pr={},Ve=Rr(Pr),it=Rr(!1),Jr=Pr;function Os(t,e){var r=t.type.contextTypes;if(!r)return Pr;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=e[i];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function lt(t){return t=t.childContextTypes,t!=null}function ti(){me(it),me(Ve)}function Fd(t,e,r){if(Ve.current!==Pr)throw Error(O(168));ue(Ve,e),ue(it,r)}function im(t,e,r){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var a in s)if(!(a in e))throw Error(O(108,t0(t)||"Unknown",a));return ve({},r,s)}function ri(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Pr,Jr=Ve.current,ue(Ve,t),ue(it,it.current),!0}function zd(t,e,r){var s=t.stateNode;if(!s)throw Error(O(169));r?(t=im(t,e,Jr),s.__reactInternalMemoizedMergedChildContext=t,me(it),me(Ve),ue(Ve,t)):me(it),ue(it,r)}var Jt=null,Ai=!1,gl=!1;function lm(t){Jt===null?Jt=[t]:Jt.push(t)}function yg(t){Ai=!0,lm(t)}function Dr(){if(!gl&&Jt!==null){gl=!0;var t=0,e=oe;try{var r=Jt;for(oe=1;t<r.length;t++){var s=r[t];do s=s(!0);while(s!==null)}Jt=null,Ai=!1}catch(a){throw Jt!==null&&(Jt=Jt.slice(t+1)),Rh(oc,Dr),a}finally{oe=e,gl=!1}}return null}var ws=[],bs=0,si=null,ni=0,xt=[],yt=0,Zr=null,Qt=1,Yt="";function Fr(t,e){ws[bs++]=ni,ws[bs++]=si,si=t,ni=e}function om(t,e,r){xt[yt++]=Qt,xt[yt++]=Yt,xt[yt++]=Zr,Zr=t;var s=Qt;t=Yt;var a=32-At(s)-1;s&=~(1<<a),r+=1;var i=32-At(e)+a;if(30<i){var l=a-a%5;i=(s&(1<<l)-1).toString(32),s>>=l,a-=l,Qt=1<<32-At(e)+a|r<<a|s,Yt=i+t}else Qt=1<<i|r<<a|s,Yt=t}function xc(t){t.return!==null&&(Fr(t,1),om(t,1,0))}function yc(t){for(;t===si;)si=ws[--bs],ws[bs]=null,ni=ws[--bs],ws[bs]=null;for(;t===Zr;)Zr=xt[--yt],xt[yt]=null,Yt=xt[--yt],xt[yt]=null,Qt=xt[--yt],xt[yt]=null}var ut=null,dt=null,ge=!1,Pt=null;function cm(t,e){var r=vt(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Bd(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ut=t,dt=Nr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ut=t,dt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Zr!==null?{id:Qt,overflow:Yt}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=vt(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,ut=t,dt=null,!0):!1;default:return!1}}function co(t){return(t.mode&1)!==0&&(t.flags&128)===0}function uo(t){if(ge){var e=dt;if(e){var r=e;if(!Bd(t,e)){if(co(t))throw Error(O(418));e=Nr(r.nextSibling);var s=ut;e&&Bd(t,e)?cm(s,r):(t.flags=t.flags&-4097|2,ge=!1,ut=t)}}else{if(co(t))throw Error(O(418));t.flags=t.flags&-4097|2,ge=!1,ut=t}}}function qd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ut=t}function wa(t){if(t!==ut)return!1;if(!ge)return qd(t),ge=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ao(t.type,t.memoizedProps)),e&&(e=dt)){if(co(t))throw dm(),Error(O(418));for(;e;)cm(t,e),e=Nr(e.nextSibling)}if(qd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(O(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){dt=Nr(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}dt=null}}else dt=ut?Nr(t.stateNode.nextSibling):null;return!0}function dm(){for(var t=dt;t;)t=Nr(t.nextSibling)}function Us(){dt=ut=null,ge=!1}function vc(t){Pt===null?Pt=[t]:Pt.push(t)}var vg=ar.ReactCurrentBatchConfig;function on(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(O(309));var s=r.stateNode}if(!s)throw Error(O(147,t));var a=s,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(l){var o=a.refs;l===null?delete o[i]:o[i]=l},e._stringRef=i,e)}if(typeof t!="string")throw Error(O(284));if(!r._owner)throw Error(O(290,t))}return t}function ba(t,e){throw t=Object.prototype.toString.call(e),Error(O(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Wd(t){var e=t._init;return e(t._payload)}function um(t){function e(x,p){if(t){var f=x.deletions;f===null?(x.deletions=[p],x.flags|=16):f.push(p)}}function r(x,p){if(!t)return null;for(;p!==null;)e(x,p),p=p.sibling;return null}function s(x,p){for(x=new Map;p!==null;)p.key!==null?x.set(p.key,p):x.set(p.index,p),p=p.sibling;return x}function a(x,p){return x=Cr(x,p),x.index=0,x.sibling=null,x}function i(x,p,f){return x.index=f,t?(f=x.alternate,f!==null?(f=f.index,f<p?(x.flags|=2,p):f):(x.flags|=2,p)):(x.flags|=1048576,p)}function l(x){return t&&x.alternate===null&&(x.flags|=2),x}function o(x,p,f,b){return p===null||p.tag!==6?(p=Nl(f,x.mode,b),p.return=x,p):(p=a(p,f),p.return=x,p)}function c(x,p,f,b){var v=f.type;return v===fs?h(x,p,f.props.children,b,f.key):p!==null&&(p.elementType===v||typeof v=="object"&&v!==null&&v.$$typeof===ur&&Wd(v)===p.type)?(b=a(p,f.props),b.ref=on(x,p,f),b.return=x,b):(b=Ba(f.type,f.key,f.props,null,x.mode,b),b.ref=on(x,p,f),b.return=x,b)}function d(x,p,f,b){return p===null||p.tag!==4||p.stateNode.containerInfo!==f.containerInfo||p.stateNode.implementation!==f.implementation?(p=_l(f,x.mode,b),p.return=x,p):(p=a(p,f.children||[]),p.return=x,p)}function h(x,p,f,b,v){return p===null||p.tag!==7?(p=Gr(f,x.mode,b,v),p.return=x,p):(p=a(p,f),p.return=x,p)}function u(x,p,f){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Nl(""+p,x.mode,f),p.return=x,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case da:return f=Ba(p.type,p.key,p.props,null,x.mode,f),f.ref=on(x,null,p),f.return=x,f;case ms:return p=_l(p,x.mode,f),p.return=x,p;case ur:var b=p._init;return u(x,b(p._payload),f)}if(mn(p)||rn(p))return p=Gr(p,x.mode,f,null),p.return=x,p;ba(x,p)}return null}function m(x,p,f,b){var v=p!==null?p.key:null;if(typeof f=="string"&&f!==""||typeof f=="number")return v!==null?null:o(x,p,""+f,b);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case da:return f.key===v?c(x,p,f,b):null;case ms:return f.key===v?d(x,p,f,b):null;case ur:return v=f._init,m(x,p,v(f._payload),b)}if(mn(f)||rn(f))return v!==null?null:h(x,p,f,b,null);ba(x,f)}return null}function y(x,p,f,b,v){if(typeof b=="string"&&b!==""||typeof b=="number")return x=x.get(f)||null,o(p,x,""+b,v);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case da:return x=x.get(b.key===null?f:b.key)||null,c(p,x,b,v);case ms:return x=x.get(b.key===null?f:b.key)||null,d(p,x,b,v);case ur:var C=b._init;return y(x,p,f,C(b._payload),v)}if(mn(b)||rn(b))return x=x.get(f)||null,h(p,x,b,v,null);ba(p,b)}return null}function w(x,p,f,b){for(var v=null,C=null,P=p,U=p=0,J=null;P!==null&&U<f.length;U++){P.index>U?(J=P,P=null):J=P.sibling;var W=m(x,P,f[U],b);if(W===null){P===null&&(P=J);break}t&&P&&W.alternate===null&&e(x,P),p=i(W,p,U),C===null?v=W:C.sibling=W,C=W,P=J}if(U===f.length)return r(x,P),ge&&Fr(x,U),v;if(P===null){for(;U<f.length;U++)P=u(x,f[U],b),P!==null&&(p=i(P,p,U),C===null?v=P:C.sibling=P,C=P);return ge&&Fr(x,U),v}for(P=s(x,P);U<f.length;U++)J=y(P,x,U,f[U],b),J!==null&&(t&&J.alternate!==null&&P.delete(J.key===null?U:J.key),p=i(J,p,U),C===null?v=J:C.sibling=J,C=J);return t&&P.forEach(function(G){return e(x,G)}),ge&&Fr(x,U),v}function _(x,p,f,b){var v=rn(f);if(typeof v!="function")throw Error(O(150));if(f=v.call(f),f==null)throw Error(O(151));for(var C=v=null,P=p,U=p=0,J=null,W=f.next();P!==null&&!W.done;U++,W=f.next()){P.index>U?(J=P,P=null):J=P.sibling;var G=m(x,P,W.value,b);if(G===null){P===null&&(P=J);break}t&&P&&G.alternate===null&&e(x,P),p=i(G,p,U),C===null?v=G:C.sibling=G,C=G,P=J}if(W.done)return r(x,P),ge&&Fr(x,U),v;if(P===null){for(;!W.done;U++,W=f.next())W=u(x,W.value,b),W!==null&&(p=i(W,p,U),C===null?v=W:C.sibling=W,C=W);return ge&&Fr(x,U),v}for(P=s(x,P);!W.done;U++,W=f.next())W=y(P,x,U,W.value,b),W!==null&&(t&&W.alternate!==null&&P.delete(W.key===null?U:W.key),p=i(W,p,U),C===null?v=W:C.sibling=W,C=W);return t&&P.forEach(function(De){return e(x,De)}),ge&&Fr(x,U),v}function N(x,p,f,b){if(typeof f=="object"&&f!==null&&f.type===fs&&f.key===null&&(f=f.props.children),typeof f=="object"&&f!==null){switch(f.$$typeof){case da:e:{for(var v=f.key,C=p;C!==null;){if(C.key===v){if(v=f.type,v===fs){if(C.tag===7){r(x,C.sibling),p=a(C,f.props.children),p.return=x,x=p;break e}}else if(C.elementType===v||typeof v=="object"&&v!==null&&v.$$typeof===ur&&Wd(v)===C.type){r(x,C.sibling),p=a(C,f.props),p.ref=on(x,C,f),p.return=x,x=p;break e}r(x,C);break}else e(x,C);C=C.sibling}f.type===fs?(p=Gr(f.props.children,x.mode,b,f.key),p.return=x,x=p):(b=Ba(f.type,f.key,f.props,null,x.mode,b),b.ref=on(x,p,f),b.return=x,x=b)}return l(x);case ms:e:{for(C=f.key;p!==null;){if(p.key===C)if(p.tag===4&&p.stateNode.containerInfo===f.containerInfo&&p.stateNode.implementation===f.implementation){r(x,p.sibling),p=a(p,f.children||[]),p.return=x,x=p;break e}else{r(x,p);break}else e(x,p);p=p.sibling}p=_l(f,x.mode,b),p.return=x,x=p}return l(x);case ur:return C=f._init,N(x,p,C(f._payload),b)}if(mn(f))return w(x,p,f,b);if(rn(f))return _(x,p,f,b);ba(x,f)}return typeof f=="string"&&f!==""||typeof f=="number"?(f=""+f,p!==null&&p.tag===6?(r(x,p.sibling),p=a(p,f),p.return=x,x=p):(r(x,p),p=Nl(f,x.mode,b),p.return=x,x=p),l(x)):r(x,p)}return N}var $s=um(!0),hm=um(!1),ai=Rr(null),ii=null,js=null,wc=null;function bc(){wc=js=ii=null}function jc(t){var e=ai.current;me(ai),t._currentValue=e}function ho(t,e,r){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===r)break;t=t.return}}function Ts(t,e){ii=t,wc=js=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(at=!0),t.firstContext=null)}function Nt(t){var e=t._currentValue;if(wc!==t)if(t={context:t,memoizedValue:e,next:null},js===null){if(ii===null)throw Error(O(308));js=t,ii.dependencies={lanes:0,firstContext:t}}else js=js.next=t;return e}var Vr=null;function Nc(t){Vr===null?Vr=[t]:Vr.push(t)}function mm(t,e,r,s){var a=e.interleaved;return a===null?(r.next=r,Nc(e)):(r.next=a.next,a.next=r),e.interleaved=r,rr(t,s)}function rr(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var hr=!1;function _c(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fm(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Xt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function _r(t,e,r){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,ae&2){var a=s.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),s.pending=e,rr(t,r)}return a=s.interleaved,a===null?(e.next=e,Nc(s)):(e.next=a.next,a.next=e),s.interleaved=e,rr(t,r)}function $a(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,r|=s,e.lanes=r,cc(t,r)}}function Vd(t,e){var r=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=l:i=i.next=l,r=r.next}while(r!==null);i===null?a=i=e:i=i.next=e}else a=i=e;r={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:s.shared,effects:s.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function li(t,e,r,s){var a=t.updateQueue;hr=!1;var i=a.firstBaseUpdate,l=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var c=o,d=c.next;c.next=null,l===null?i=d:l.next=d,l=c;var h=t.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==l&&(o===null?h.firstBaseUpdate=d:o.next=d,h.lastBaseUpdate=c))}if(i!==null){var u=a.baseState;l=0,h=d=c=null,o=i;do{var m=o.lane,y=o.eventTime;if((s&m)===m){h!==null&&(h=h.next={eventTime:y,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var w=t,_=o;switch(m=e,y=r,_.tag){case 1:if(w=_.payload,typeof w=="function"){u=w.call(y,u,m);break e}u=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=_.payload,m=typeof w=="function"?w.call(y,u,m):w,m==null)break e;u=ve({},u,m);break e;case 2:hr=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,m=a.effects,m===null?a.effects=[o]:m.push(o))}else y={eventTime:y,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(d=h=y,c=u):h=h.next=y,l|=m;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;m=o,o=m.next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}while(!0);if(h===null&&(c=u),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=h,e=a.shared.interleaved,e!==null){a=e;do l|=a.lane,a=a.next;while(a!==e)}else i===null&&(a.shared.lanes=0);Yr|=l,t.lanes=l,t.memoizedState=u}}function Hd(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],a=s.callback;if(a!==null){if(s.callback=null,s=r,typeof a!="function")throw Error(O(191,a));a.call(s)}}}var sa={},zt=Rr(sa),qn=Rr(sa),Wn=Rr(sa);function Hr(t){if(t===sa)throw Error(O(174));return t}function kc(t,e){switch(ue(Wn,e),ue(qn,t),ue(zt,sa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Vl(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Vl(e,t)}me(zt),ue(zt,e)}function Is(){me(zt),me(qn),me(Wn)}function pm(t){Hr(Wn.current);var e=Hr(zt.current),r=Vl(e,t.type);e!==r&&(ue(qn,t),ue(zt,r))}function Sc(t){qn.current===t&&(me(zt),me(qn))}var xe=Rr(0);function oi(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var xl=[];function Cc(){for(var t=0;t<xl.length;t++)xl[t]._workInProgressVersionPrimary=null;xl.length=0}var Ia=ar.ReactCurrentDispatcher,yl=ar.ReactCurrentBatchConfig,Qr=0,ye=null,Pe=null,Oe=null,ci=!1,Nn=!1,Vn=0,wg=0;function Be(){throw Error(O(321))}function Ec(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Dt(t[r],e[r]))return!1;return!0}function Tc(t,e,r,s,a,i){if(Qr=i,ye=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ia.current=t===null||t.memoizedState===null?_g:kg,t=r(s,a),Nn){i=0;do{if(Nn=!1,Vn=0,25<=i)throw Error(O(301));i+=1,Oe=Pe=null,e.updateQueue=null,Ia.current=Sg,t=r(s,a)}while(Nn)}if(Ia.current=di,e=Pe!==null&&Pe.next!==null,Qr=0,Oe=Pe=ye=null,ci=!1,e)throw Error(O(300));return t}function Pc(){var t=Vn!==0;return Vn=0,t}function $t(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Oe===null?ye.memoizedState=Oe=t:Oe=Oe.next=t,Oe}function _t(){if(Pe===null){var t=ye.alternate;t=t!==null?t.memoizedState:null}else t=Pe.next;var e=Oe===null?ye.memoizedState:Oe.next;if(e!==null)Oe=e,Pe=t;else{if(t===null)throw Error(O(310));Pe=t,t={memoizedState:Pe.memoizedState,baseState:Pe.baseState,baseQueue:Pe.baseQueue,queue:Pe.queue,next:null},Oe===null?ye.memoizedState=Oe=t:Oe=Oe.next=t}return Oe}function Hn(t,e){return typeof e=="function"?e(t):e}function vl(t){var e=_t(),r=e.queue;if(r===null)throw Error(O(311));r.lastRenderedReducer=t;var s=Pe,a=s.baseQueue,i=r.pending;if(i!==null){if(a!==null){var l=a.next;a.next=i.next,i.next=l}s.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,s=s.baseState;var o=l=null,c=null,d=i;do{var h=d.lane;if((Qr&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:t(s,d.action);else{var u={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=u,l=s):c=c.next=u,ye.lanes|=h,Yr|=h}d=d.next}while(d!==null&&d!==i);c===null?l=s:c.next=o,Dt(s,e.memoizedState)||(at=!0),e.memoizedState=s,e.baseState=l,e.baseQueue=c,r.lastRenderedState=s}if(t=r.interleaved,t!==null){a=t;do i=a.lane,ye.lanes|=i,Yr|=i,a=a.next;while(a!==t)}else a===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function wl(t){var e=_t(),r=e.queue;if(r===null)throw Error(O(311));r.lastRenderedReducer=t;var s=r.dispatch,a=r.pending,i=e.memoizedState;if(a!==null){r.pending=null;var l=a=a.next;do i=t(i,l.action),l=l.next;while(l!==a);Dt(i,e.memoizedState)||(at=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,s]}function gm(){}function xm(t,e){var r=ye,s=_t(),a=e(),i=!Dt(s.memoizedState,a);if(i&&(s.memoizedState=a,at=!0),s=s.queue,Ac(wm.bind(null,r,s,t),[t]),s.getSnapshot!==e||i||Oe!==null&&Oe.memoizedState.tag&1){if(r.flags|=2048,Kn(9,vm.bind(null,r,s,a,e),void 0,null),Ue===null)throw Error(O(349));Qr&30||ym(r,e,a)}return a}function ym(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=ye.updateQueue,e===null?(e={lastEffect:null,stores:null},ye.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function vm(t,e,r,s){e.value=r,e.getSnapshot=s,bm(e)&&jm(t)}function wm(t,e,r){return r(function(){bm(e)&&jm(t)})}function bm(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Dt(t,r)}catch{return!0}}function jm(t){var e=rr(t,1);e!==null&&Rt(e,t,1,-1)}function Kd(t){var e=$t();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hn,lastRenderedState:t},e.queue=t,t=t.dispatch=Ng.bind(null,ye,t),[e.memoizedState,t]}function Kn(t,e,r,s){return t={tag:t,create:e,destroy:r,deps:s,next:null},e=ye.updateQueue,e===null?(e={lastEffect:null,stores:null},ye.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(s=r.next,r.next=t,t.next=s,e.lastEffect=t)),t}function Nm(){return _t().memoizedState}function La(t,e,r,s){var a=$t();ye.flags|=t,a.memoizedState=Kn(1|e,r,void 0,s===void 0?null:s)}function Ri(t,e,r,s){var a=_t();s=s===void 0?null:s;var i=void 0;if(Pe!==null){var l=Pe.memoizedState;if(i=l.destroy,s!==null&&Ec(s,l.deps)){a.memoizedState=Kn(e,r,i,s);return}}ye.flags|=t,a.memoizedState=Kn(1|e,r,i,s)}function Gd(t,e){return La(8390656,8,t,e)}function Ac(t,e){return Ri(2048,8,t,e)}function _m(t,e){return Ri(4,2,t,e)}function km(t,e){return Ri(4,4,t,e)}function Sm(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Cm(t,e,r){return r=r!=null?r.concat([t]):null,Ri(4,4,Sm.bind(null,e,t),r)}function Rc(){}function Em(t,e){var r=_t();e=e===void 0?null:e;var s=r.memoizedState;return s!==null&&e!==null&&Ec(e,s[1])?s[0]:(r.memoizedState=[t,e],t)}function Tm(t,e){var r=_t();e=e===void 0?null:e;var s=r.memoizedState;return s!==null&&e!==null&&Ec(e,s[1])?s[0]:(t=t(),r.memoizedState=[t,e],t)}function Pm(t,e,r){return Qr&21?(Dt(r,e)||(r=Uh(),ye.lanes|=r,Yr|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,at=!0),t.memoizedState=r)}function bg(t,e){var r=oe;oe=r!==0&&4>r?r:4,t(!0);var s=yl.transition;yl.transition={};try{t(!1),e()}finally{oe=r,yl.transition=s}}function Am(){return _t().memoizedState}function jg(t,e,r){var s=Sr(t);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},Rm(t))Dm(e,r);else if(r=mm(t,e,r,s),r!==null){var a=Qe();Rt(r,t,s,a),Om(r,e,s)}}function Ng(t,e,r){var s=Sr(t),a={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(Rm(t))Dm(e,a);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var l=e.lastRenderedState,o=i(l,r);if(a.hasEagerState=!0,a.eagerState=o,Dt(o,l)){var c=e.interleaved;c===null?(a.next=a,Nc(e)):(a.next=c.next,c.next=a),e.interleaved=a;return}}catch{}finally{}r=mm(t,e,a,s),r!==null&&(a=Qe(),Rt(r,t,s,a),Om(r,e,s))}}function Rm(t){var e=t.alternate;return t===ye||e!==null&&e===ye}function Dm(t,e){Nn=ci=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Om(t,e,r){if(r&4194240){var s=e.lanes;s&=t.pendingLanes,r|=s,e.lanes=r,cc(t,r)}}var di={readContext:Nt,useCallback:Be,useContext:Be,useEffect:Be,useImperativeHandle:Be,useInsertionEffect:Be,useLayoutEffect:Be,useMemo:Be,useReducer:Be,useRef:Be,useState:Be,useDebugValue:Be,useDeferredValue:Be,useTransition:Be,useMutableSource:Be,useSyncExternalStore:Be,useId:Be,unstable_isNewReconciler:!1},_g={readContext:Nt,useCallback:function(t,e){return $t().memoizedState=[t,e===void 0?null:e],t},useContext:Nt,useEffect:Gd,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,La(4194308,4,Sm.bind(null,e,t),r)},useLayoutEffect:function(t,e){return La(4194308,4,t,e)},useInsertionEffect:function(t,e){return La(4,2,t,e)},useMemo:function(t,e){var r=$t();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var s=$t();return e=r!==void 0?r(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=jg.bind(null,ye,t),[s.memoizedState,t]},useRef:function(t){var e=$t();return t={current:t},e.memoizedState=t},useState:Kd,useDebugValue:Rc,useDeferredValue:function(t){return $t().memoizedState=t},useTransition:function(){var t=Kd(!1),e=t[0];return t=bg.bind(null,t[1]),$t().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var s=ye,a=$t();if(ge){if(r===void 0)throw Error(O(407));r=r()}else{if(r=e(),Ue===null)throw Error(O(349));Qr&30||ym(s,e,r)}a.memoizedState=r;var i={value:r,getSnapshot:e};return a.queue=i,Gd(wm.bind(null,s,i,t),[t]),s.flags|=2048,Kn(9,vm.bind(null,s,i,r,e),void 0,null),r},useId:function(){var t=$t(),e=Ue.identifierPrefix;if(ge){var r=Yt,s=Qt;r=(s&~(1<<32-At(s)-1)).toString(32)+r,e=":"+e+"R"+r,r=Vn++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=wg++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},kg={readContext:Nt,useCallback:Em,useContext:Nt,useEffect:Ac,useImperativeHandle:Cm,useInsertionEffect:_m,useLayoutEffect:km,useMemo:Tm,useReducer:vl,useRef:Nm,useState:function(){return vl(Hn)},useDebugValue:Rc,useDeferredValue:function(t){var e=_t();return Pm(e,Pe.memoizedState,t)},useTransition:function(){var t=vl(Hn)[0],e=_t().memoizedState;return[t,e]},useMutableSource:gm,useSyncExternalStore:xm,useId:Am,unstable_isNewReconciler:!1},Sg={readContext:Nt,useCallback:Em,useContext:Nt,useEffect:Ac,useImperativeHandle:Cm,useInsertionEffect:_m,useLayoutEffect:km,useMemo:Tm,useReducer:wl,useRef:Nm,useState:function(){return wl(Hn)},useDebugValue:Rc,useDeferredValue:function(t){var e=_t();return Pe===null?e.memoizedState=t:Pm(e,Pe.memoizedState,t)},useTransition:function(){var t=wl(Hn)[0],e=_t().memoizedState;return[t,e]},useMutableSource:gm,useSyncExternalStore:xm,useId:Am,unstable_isNewReconciler:!1};function Ct(t,e){if(t&&t.defaultProps){e=ve({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function mo(t,e,r,s){e=t.memoizedState,r=r(s,e),r=r==null?e:ve({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Di={isMounted:function(t){return(t=t._reactInternals)?rs(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var s=Qe(),a=Sr(t),i=Xt(s,a);i.payload=e,r!=null&&(i.callback=r),e=_r(t,i,a),e!==null&&(Rt(e,t,a,s),$a(e,t,a))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var s=Qe(),a=Sr(t),i=Xt(s,a);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=_r(t,i,a),e!==null&&(Rt(e,t,a,s),$a(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Qe(),s=Sr(t),a=Xt(r,s);a.tag=2,e!=null&&(a.callback=e),e=_r(t,a,s),e!==null&&(Rt(e,t,s,r),$a(e,t,s))}};function Jd(t,e,r,s,a,i,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,i,l):e.prototype&&e.prototype.isPureReactComponent?!Mn(r,s)||!Mn(a,i):!0}function Um(t,e,r){var s=!1,a=Pr,i=e.contextType;return typeof i=="object"&&i!==null?i=Nt(i):(a=lt(e)?Jr:Ve.current,s=e.contextTypes,i=(s=s!=null)?Os(t,a):Pr),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Di,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=i),e}function Zd(t,e,r,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,s),e.state!==t&&Di.enqueueReplaceState(e,e.state,null)}function fo(t,e,r,s){var a=t.stateNode;a.props=r,a.state=t.memoizedState,a.refs={},_c(t);var i=e.contextType;typeof i=="object"&&i!==null?a.context=Nt(i):(i=lt(e)?Jr:Ve.current,a.context=Os(t,i)),a.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(mo(t,e,i,r),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&Di.enqueueReplaceState(a,a.state,null),li(t,r,a,s),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function Ls(t,e){try{var r="",s=e;do r+=e0(s),s=s.return;while(s);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:a,digest:null}}function bl(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function po(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Cg=typeof WeakMap=="function"?WeakMap:Map;function $m(t,e,r){r=Xt(-1,r),r.tag=3,r.payload={element:null};var s=e.value;return r.callback=function(){hi||(hi=!0,ko=s),po(t,e)},r}function Im(t,e,r){r=Xt(-1,r),r.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var a=e.value;r.payload=function(){return s(a)},r.callback=function(){po(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){po(t,e),typeof s!="function"&&(kr===null?kr=new Set([this]):kr.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),r}function Qd(t,e,r){var s=t.pingCache;if(s===null){s=t.pingCache=new Cg;var a=new Set;s.set(e,a)}else a=s.get(e),a===void 0&&(a=new Set,s.set(e,a));a.has(r)||(a.add(r),t=zg.bind(null,t,e,r),e.then(t,t))}function Yd(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Xd(t,e,r,s,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Xt(-1,1),e.tag=2,_r(r,e,1))),r.lanes|=1),t)}var Eg=ar.ReactCurrentOwner,at=!1;function Ze(t,e,r,s){e.child=t===null?hm(e,null,r,s):$s(e,t.child,r,s)}function eu(t,e,r,s,a){r=r.render;var i=e.ref;return Ts(e,a),s=Tc(t,e,r,s,i,a),r=Pc(),t!==null&&!at?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,sr(t,e,a)):(ge&&r&&xc(e),e.flags|=1,Ze(t,e,s,a),e.child)}function tu(t,e,r,s,a){if(t===null){var i=r.type;return typeof i=="function"&&!Fc(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,Lm(t,e,i,s,a)):(t=Ba(r.type,null,s,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&a)){var l=i.memoizedProps;if(r=r.compare,r=r!==null?r:Mn,r(l,s)&&t.ref===e.ref)return sr(t,e,a)}return e.flags|=1,t=Cr(i,s),t.ref=e.ref,t.return=e,e.child=t}function Lm(t,e,r,s,a){if(t!==null){var i=t.memoizedProps;if(Mn(i,s)&&t.ref===e.ref)if(at=!1,e.pendingProps=s=i,(t.lanes&a)!==0)t.flags&131072&&(at=!0);else return e.lanes=t.lanes,sr(t,e,a)}return go(t,e,r,s,a)}function Mm(t,e,r){var s=e.pendingProps,a=s.children,i=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ue(_s,ct),ct|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ue(_s,ct),ct|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:r,ue(_s,ct),ct|=s}else i!==null?(s=i.baseLanes|r,e.memoizedState=null):s=r,ue(_s,ct),ct|=s;return Ze(t,e,a,r),e.child}function Fm(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function go(t,e,r,s,a){var i=lt(r)?Jr:Ve.current;return i=Os(e,i),Ts(e,a),r=Tc(t,e,r,s,i,a),s=Pc(),t!==null&&!at?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,sr(t,e,a)):(ge&&s&&xc(e),e.flags|=1,Ze(t,e,r,a),e.child)}function ru(t,e,r,s,a){if(lt(r)){var i=!0;ri(e)}else i=!1;if(Ts(e,a),e.stateNode===null)Ma(t,e),Um(e,r,s),fo(e,r,s,a),s=!0;else if(t===null){var l=e.stateNode,o=e.memoizedProps;l.props=o;var c=l.context,d=r.contextType;typeof d=="object"&&d!==null?d=Nt(d):(d=lt(r)?Jr:Ve.current,d=Os(e,d));var h=r.getDerivedStateFromProps,u=typeof h=="function"||typeof l.getSnapshotBeforeUpdate=="function";u||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==s||c!==d)&&Zd(e,l,s,d),hr=!1;var m=e.memoizedState;l.state=m,li(e,s,l,a),c=e.memoizedState,o!==s||m!==c||it.current||hr?(typeof h=="function"&&(mo(e,r,h,s),c=e.memoizedState),(o=hr||Jd(e,r,o,s,m,c,d))?(u||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=c),l.props=s,l.state=c,l.context=d,s=o):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{l=e.stateNode,fm(t,e),o=e.memoizedProps,d=e.type===e.elementType?o:Ct(e.type,o),l.props=d,u=e.pendingProps,m=l.context,c=r.contextType,typeof c=="object"&&c!==null?c=Nt(c):(c=lt(r)?Jr:Ve.current,c=Os(e,c));var y=r.getDerivedStateFromProps;(h=typeof y=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==u||m!==c)&&Zd(e,l,s,c),hr=!1,m=e.memoizedState,l.state=m,li(e,s,l,a);var w=e.memoizedState;o!==u||m!==w||it.current||hr?(typeof y=="function"&&(mo(e,r,y,s),w=e.memoizedState),(d=hr||Jd(e,r,d,s,m,w,c)||!1)?(h||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(s,w,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(s,w,c)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=w),l.props=s,l.state=w,l.context=c,s=d):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),s=!1)}return xo(t,e,r,s,i,a)}function xo(t,e,r,s,a,i){Fm(t,e);var l=(e.flags&128)!==0;if(!s&&!l)return a&&zd(e,r,!1),sr(t,e,i);s=e.stateNode,Eg.current=e;var o=l&&typeof r.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&l?(e.child=$s(e,t.child,null,i),e.child=$s(e,null,o,i)):Ze(t,e,o,i),e.memoizedState=s.state,a&&zd(e,r,!0),e.child}function zm(t){var e=t.stateNode;e.pendingContext?Fd(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Fd(t,e.context,!1),kc(t,e.containerInfo)}function su(t,e,r,s,a){return Us(),vc(a),e.flags|=256,Ze(t,e,r,s),e.child}var yo={dehydrated:null,treeContext:null,retryLane:0};function vo(t){return{baseLanes:t,cachePool:null,transitions:null}}function Bm(t,e,r){var s=e.pendingProps,a=xe.current,i=!1,l=(e.flags&128)!==0,o;if((o=l)||(o=t!==null&&t.memoizedState===null?!1:(a&2)!==0),o?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),ue(xe,a&1),t===null)return uo(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=s.children,t=s.fallback,i?(s=e.mode,i=e.child,l={mode:"hidden",children:l},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=$i(l,s,0,null),t=Gr(t,s,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=vo(r),e.memoizedState=yo,t):Dc(e,l));if(a=t.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return Tg(t,e,l,s,o,a,r);if(i){i=s.fallback,l=e.mode,a=t.child,o=a.sibling;var c={mode:"hidden",children:s.children};return!(l&1)&&e.child!==a?(s=e.child,s.childLanes=0,s.pendingProps=c,e.deletions=null):(s=Cr(a,c),s.subtreeFlags=a.subtreeFlags&14680064),o!==null?i=Cr(o,i):(i=Gr(i,l,r,null),i.flags|=2),i.return=e,s.return=e,s.sibling=i,e.child=s,s=i,i=e.child,l=t.child.memoizedState,l=l===null?vo(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=t.childLanes&~r,e.memoizedState=yo,s}return i=t.child,t=i.sibling,s=Cr(i,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=r),s.return=e,s.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=s,e.memoizedState=null,s}function Dc(t,e){return e=$i({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ja(t,e,r,s){return s!==null&&vc(s),$s(e,t.child,null,r),t=Dc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Tg(t,e,r,s,a,i,l){if(r)return e.flags&256?(e.flags&=-257,s=bl(Error(O(422))),ja(t,e,l,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=s.fallback,a=e.mode,s=$i({mode:"visible",children:s.children},a,0,null),i=Gr(i,a,l,null),i.flags|=2,s.return=e,i.return=e,s.sibling=i,e.child=s,e.mode&1&&$s(e,t.child,null,l),e.child.memoizedState=vo(l),e.memoizedState=yo,i);if(!(e.mode&1))return ja(t,e,l,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var o=s.dgst;return s=o,i=Error(O(419)),s=bl(i,s,void 0),ja(t,e,l,s)}if(o=(l&t.childLanes)!==0,at||o){if(s=Ue,s!==null){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|l)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,rr(t,a),Rt(s,t,a,-1))}return Mc(),s=bl(Error(O(421))),ja(t,e,l,s)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=Bg.bind(null,t),a._reactRetry=e,null):(t=i.treeContext,dt=Nr(a.nextSibling),ut=e,ge=!0,Pt=null,t!==null&&(xt[yt++]=Qt,xt[yt++]=Yt,xt[yt++]=Zr,Qt=t.id,Yt=t.overflow,Zr=e),e=Dc(e,s.children),e.flags|=4096,e)}function nu(t,e,r){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),ho(t.return,e,r)}function jl(t,e,r,s,a){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:a}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=r,i.tailMode=a)}function qm(t,e,r){var s=e.pendingProps,a=s.revealOrder,i=s.tail;if(Ze(t,e,s.children,r),s=xe.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&nu(t,r,e);else if(t.tag===19)nu(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(ue(xe,s),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(r=e.child,a=null;r!==null;)t=r.alternate,t!==null&&oi(t)===null&&(a=r),r=r.sibling;r=a,r===null?(a=e.child,e.child=null):(a=r.sibling,r.sibling=null),jl(e,!1,a,r,i);break;case"backwards":for(r=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&oi(t)===null){e.child=a;break}t=a.sibling,a.sibling=r,r=a,a=t}jl(e,!0,r,null,i);break;case"together":jl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ma(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function sr(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Yr|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(O(153));if(e.child!==null){for(t=e.child,r=Cr(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Cr(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Pg(t,e,r){switch(e.tag){case 3:zm(e),Us();break;case 5:pm(e);break;case 1:lt(e.type)&&ri(e);break;case 4:kc(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,a=e.memoizedProps.value;ue(ai,s._currentValue),s._currentValue=a;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(ue(xe,xe.current&1),e.flags|=128,null):r&e.child.childLanes?Bm(t,e,r):(ue(xe,xe.current&1),t=sr(t,e,r),t!==null?t.sibling:null);ue(xe,xe.current&1);break;case 19:if(s=(r&e.childLanes)!==0,t.flags&128){if(s)return qm(t,e,r);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ue(xe,xe.current),s)break;return null;case 22:case 23:return e.lanes=0,Mm(t,e,r)}return sr(t,e,r)}var Wm,wo,Vm,Hm;Wm=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};wo=function(){};Vm=function(t,e,r,s){var a=t.memoizedProps;if(a!==s){t=e.stateNode,Hr(zt.current);var i=null;switch(r){case"input":a=zl(t,a),s=zl(t,s),i=[];break;case"select":a=ve({},a,{value:void 0}),s=ve({},s,{value:void 0}),i=[];break;case"textarea":a=Wl(t,a),s=Wl(t,s),i=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=ei)}Hl(r,s);var l;r=null;for(d in a)if(!s.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var o=a[d];for(l in o)o.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Rn.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in s){var c=s[d];if(o=a!=null?a[d]:void 0,s.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(r||(r={}),r[l]=c[l])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Rn.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&he("scroll",t),i||o===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Hm=function(t,e,r,s){r!==s&&(e.flags|=4)};function cn(t,e){if(!ge)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function qe(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,s=0;if(e)for(var a=t.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=s,t.childLanes=r,e}function Ag(t,e,r){var s=e.pendingProps;switch(yc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qe(e),null;case 1:return lt(e.type)&&ti(),qe(e),null;case 3:return s=e.stateNode,Is(),me(it),me(Ve),Cc(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(wa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Pt!==null&&(Eo(Pt),Pt=null))),wo(t,e),qe(e),null;case 5:Sc(e);var a=Hr(Wn.current);if(r=e.type,t!==null&&e.stateNode!=null)Vm(t,e,r,s,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(O(166));return qe(e),null}if(t=Hr(zt.current),wa(e)){s=e.stateNode,r=e.type;var i=e.memoizedProps;switch(s[Lt]=e,s[Bn]=i,t=(e.mode&1)!==0,r){case"dialog":he("cancel",s),he("close",s);break;case"iframe":case"object":case"embed":he("load",s);break;case"video":case"audio":for(a=0;a<pn.length;a++)he(pn[a],s);break;case"source":he("error",s);break;case"img":case"image":case"link":he("error",s),he("load",s);break;case"details":he("toggle",s);break;case"input":md(s,i),he("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},he("invalid",s);break;case"textarea":pd(s,i),he("invalid",s)}Hl(r,i),a=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?s.textContent!==o&&(i.suppressHydrationWarning!==!0&&va(s.textContent,o,t),a=["children",o]):typeof o=="number"&&s.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&va(s.textContent,o,t),a=["children",""+o]):Rn.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&he("scroll",s)}switch(r){case"input":ua(s),fd(s,i,!0);break;case"textarea":ua(s),gd(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=ei)}s=a,e.updateQueue=s,s!==null&&(e.flags|=4)}else{l=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=wh(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=l.createElement(r,{is:s.is}):(t=l.createElement(r),r==="select"&&(l=t,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):t=l.createElementNS(t,r),t[Lt]=e,t[Bn]=s,Wm(t,e,!1,!1),e.stateNode=t;e:{switch(l=Kl(r,s),r){case"dialog":he("cancel",t),he("close",t),a=s;break;case"iframe":case"object":case"embed":he("load",t),a=s;break;case"video":case"audio":for(a=0;a<pn.length;a++)he(pn[a],t);a=s;break;case"source":he("error",t),a=s;break;case"img":case"image":case"link":he("error",t),he("load",t),a=s;break;case"details":he("toggle",t),a=s;break;case"input":md(t,s),a=zl(t,s),he("invalid",t);break;case"option":a=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},a=ve({},s,{value:void 0}),he("invalid",t);break;case"textarea":pd(t,s),a=Wl(t,s),he("invalid",t);break;default:a=s}Hl(r,a),o=a;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?Nh(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&bh(t,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Dn(t,c):typeof c=="number"&&Dn(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Rn.hasOwnProperty(i)?c!=null&&i==="onScroll"&&he("scroll",t):c!=null&&sc(t,i,c,l))}switch(r){case"input":ua(t),fd(t,s,!1);break;case"textarea":ua(t),gd(t);break;case"option":s.value!=null&&t.setAttribute("value",""+Tr(s.value));break;case"select":t.multiple=!!s.multiple,i=s.value,i!=null?ks(t,!!s.multiple,i,!1):s.defaultValue!=null&&ks(t,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=ei)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return qe(e),null;case 6:if(t&&e.stateNode!=null)Hm(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(O(166));if(r=Hr(Wn.current),Hr(zt.current),wa(e)){if(s=e.stateNode,r=e.memoizedProps,s[Lt]=e,(i=s.nodeValue!==r)&&(t=ut,t!==null))switch(t.tag){case 3:va(s.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&va(s.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[Lt]=e,e.stateNode=s}return qe(e),null;case 13:if(me(xe),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ge&&dt!==null&&e.mode&1&&!(e.flags&128))dm(),Us(),e.flags|=98560,i=!1;else if(i=wa(e),s!==null&&s.dehydrated!==null){if(t===null){if(!i)throw Error(O(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(O(317));i[Lt]=e}else Us(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;qe(e),i=!1}else Pt!==null&&(Eo(Pt),Pt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||xe.current&1?Re===0&&(Re=3):Mc())),e.updateQueue!==null&&(e.flags|=4),qe(e),null);case 4:return Is(),wo(t,e),t===null&&Fn(e.stateNode.containerInfo),qe(e),null;case 10:return jc(e.type._context),qe(e),null;case 17:return lt(e.type)&&ti(),qe(e),null;case 19:if(me(xe),i=e.memoizedState,i===null)return qe(e),null;if(s=(e.flags&128)!==0,l=i.rendering,l===null)if(s)cn(i,!1);else{if(Re!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=oi(t),l!==null){for(e.flags|=128,cn(i,!1),s=l.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=r,r=e.child;r!==null;)i=r,t=s,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,t=l.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return ue(xe,xe.current&1|2),e.child}t=t.sibling}i.tail!==null&&je()>Ms&&(e.flags|=128,s=!0,cn(i,!1),e.lanes=4194304)}else{if(!s)if(t=oi(l),t!==null){if(e.flags|=128,s=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),cn(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!ge)return qe(e),null}else 2*je()-i.renderingStartTime>Ms&&r!==1073741824&&(e.flags|=128,s=!0,cn(i,!1),e.lanes=4194304);i.isBackwards?(l.sibling=e.child,e.child=l):(r=i.last,r!==null?r.sibling=l:e.child=l,i.last=l)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=je(),e.sibling=null,r=xe.current,ue(xe,s?r&1|2:r&1),e):(qe(e),null);case 22:case 23:return Lc(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?ct&1073741824&&(qe(e),e.subtreeFlags&6&&(e.flags|=8192)):qe(e),null;case 24:return null;case 25:return null}throw Error(O(156,e.tag))}function Rg(t,e){switch(yc(e),e.tag){case 1:return lt(e.type)&&ti(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Is(),me(it),me(Ve),Cc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Sc(e),null;case 13:if(me(xe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(O(340));Us()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return me(xe),null;case 4:return Is(),null;case 10:return jc(e.type._context),null;case 22:case 23:return Lc(),null;case 24:return null;default:return null}}var Na=!1,We=!1,Dg=typeof WeakSet=="function"?WeakSet:Set,M=null;function Ns(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){be(t,e,s)}else r.current=null}function bo(t,e,r){try{r()}catch(s){be(t,e,s)}}var au=!1;function Og(t,e){if(so=Qa,t=Qh(),gc(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var a=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var l=0,o=-1,c=-1,d=0,h=0,u=t,m=null;t:for(;;){for(var y;u!==r||a!==0&&u.nodeType!==3||(o=l+a),u!==i||s!==0&&u.nodeType!==3||(c=l+s),u.nodeType===3&&(l+=u.nodeValue.length),(y=u.firstChild)!==null;)m=u,u=y;for(;;){if(u===t)break t;if(m===r&&++d===a&&(o=l),m===i&&++h===s&&(c=l),(y=u.nextSibling)!==null)break;u=m,m=u.parentNode}u=y}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(no={focusedElem:t,selectionRange:r},Qa=!1,M=e;M!==null;)if(e=M,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,M=t;else for(;M!==null;){e=M;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var _=w.memoizedProps,N=w.memoizedState,x=e.stateNode,p=x.getSnapshotBeforeUpdate(e.elementType===e.type?_:Ct(e.type,_),N);x.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var f=e.stateNode.containerInfo;f.nodeType===1?f.textContent="":f.nodeType===9&&f.documentElement&&f.removeChild(f.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(b){be(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,M=t;break}M=e.return}return w=au,au=!1,w}function _n(t,e,r){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&t)===t){var i=a.destroy;a.destroy=void 0,i!==void 0&&bo(e,r,i)}a=a.next}while(a!==s)}}function Oi(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var s=r.create;r.destroy=s()}r=r.next}while(r!==e)}}function jo(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Km(t){var e=t.alternate;e!==null&&(t.alternate=null,Km(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Lt],delete e[Bn],delete e[lo],delete e[gg],delete e[xg])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Gm(t){return t.tag===5||t.tag===3||t.tag===4}function iu(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Gm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function No(t,e,r){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=ei));else if(s!==4&&(t=t.child,t!==null))for(No(t,e,r),t=t.sibling;t!==null;)No(t,e,r),t=t.sibling}function _o(t,e,r){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(_o(t,e,r),t=t.sibling;t!==null;)_o(t,e,r),t=t.sibling}var $e=null,Et=!1;function or(t,e,r){for(r=r.child;r!==null;)Jm(t,e,r),r=r.sibling}function Jm(t,e,r){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(Si,r)}catch{}switch(r.tag){case 5:We||Ns(r,e);case 6:var s=$e,a=Et;$e=null,or(t,e,r),$e=s,Et=a,$e!==null&&(Et?(t=$e,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):$e.removeChild(r.stateNode));break;case 18:$e!==null&&(Et?(t=$e,r=r.stateNode,t.nodeType===8?pl(t.parentNode,r):t.nodeType===1&&pl(t,r),In(t)):pl($e,r.stateNode));break;case 4:s=$e,a=Et,$e=r.stateNode.containerInfo,Et=!0,or(t,e,r),$e=s,Et=a;break;case 0:case 11:case 14:case 15:if(!We&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var i=a,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&bo(r,e,l),a=a.next}while(a!==s)}or(t,e,r);break;case 1:if(!We&&(Ns(r,e),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(o){be(r,e,o)}or(t,e,r);break;case 21:or(t,e,r);break;case 22:r.mode&1?(We=(s=We)||r.memoizedState!==null,or(t,e,r),We=s):or(t,e,r);break;default:or(t,e,r)}}function lu(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Dg),e.forEach(function(s){var a=qg.bind(null,t,s);r.has(s)||(r.add(s),s.then(a,a))})}}function kt(t,e){var r=e.deletions;if(r!==null)for(var s=0;s<r.length;s++){var a=r[s];try{var i=t,l=e,o=l;e:for(;o!==null;){switch(o.tag){case 5:$e=o.stateNode,Et=!1;break e;case 3:$e=o.stateNode.containerInfo,Et=!0;break e;case 4:$e=o.stateNode.containerInfo,Et=!0;break e}o=o.return}if($e===null)throw Error(O(160));Jm(i,l,a),$e=null,Et=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){be(a,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Zm(e,t),e=e.sibling}function Zm(t,e){var r=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(kt(e,t),Ut(t),s&4){try{_n(3,t,t.return),Oi(3,t)}catch(_){be(t,t.return,_)}try{_n(5,t,t.return)}catch(_){be(t,t.return,_)}}break;case 1:kt(e,t),Ut(t),s&512&&r!==null&&Ns(r,r.return);break;case 5:if(kt(e,t),Ut(t),s&512&&r!==null&&Ns(r,r.return),t.flags&32){var a=t.stateNode;try{Dn(a,"")}catch(_){be(t,t.return,_)}}if(s&4&&(a=t.stateNode,a!=null)){var i=t.memoizedProps,l=r!==null?r.memoizedProps:i,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&yh(a,i),Kl(o,l);var d=Kl(o,i);for(l=0;l<c.length;l+=2){var h=c[l],u=c[l+1];h==="style"?Nh(a,u):h==="dangerouslySetInnerHTML"?bh(a,u):h==="children"?Dn(a,u):sc(a,h,u,d)}switch(o){case"input":Bl(a,i);break;case"textarea":vh(a,i);break;case"select":var m=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?ks(a,!!i.multiple,y,!1):m!==!!i.multiple&&(i.defaultValue!=null?ks(a,!!i.multiple,i.defaultValue,!0):ks(a,!!i.multiple,i.multiple?[]:"",!1))}a[Bn]=i}catch(_){be(t,t.return,_)}}break;case 6:if(kt(e,t),Ut(t),s&4){if(t.stateNode===null)throw Error(O(162));a=t.stateNode,i=t.memoizedProps;try{a.nodeValue=i}catch(_){be(t,t.return,_)}}break;case 3:if(kt(e,t),Ut(t),s&4&&r!==null&&r.memoizedState.isDehydrated)try{In(e.containerInfo)}catch(_){be(t,t.return,_)}break;case 4:kt(e,t),Ut(t);break;case 13:kt(e,t),Ut(t),a=t.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||($c=je())),s&4&&lu(t);break;case 22:if(h=r!==null&&r.memoizedState!==null,t.mode&1?(We=(d=We)||h,kt(e,t),We=d):kt(e,t),Ut(t),s&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(M=t,h=t.child;h!==null;){for(u=M=h;M!==null;){switch(m=M,y=m.child,m.tag){case 0:case 11:case 14:case 15:_n(4,m,m.return);break;case 1:Ns(m,m.return);var w=m.stateNode;if(typeof w.componentWillUnmount=="function"){s=m,r=m.return;try{e=s,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(_){be(s,r,_)}}break;case 5:Ns(m,m.return);break;case 22:if(m.memoizedState!==null){cu(u);continue}}y!==null?(y.return=m,M=y):cu(u)}h=h.sibling}e:for(h=null,u=t;;){if(u.tag===5){if(h===null){h=u;try{a=u.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=u.stateNode,c=u.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=jh("display",l))}catch(_){be(t,t.return,_)}}}else if(u.tag===6){if(h===null)try{u.stateNode.nodeValue=d?"":u.memoizedProps}catch(_){be(t,t.return,_)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===t)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===t)break e;for(;u.sibling===null;){if(u.return===null||u.return===t)break e;h===u&&(h=null),u=u.return}h===u&&(h=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:kt(e,t),Ut(t),s&4&&lu(t);break;case 21:break;default:kt(e,t),Ut(t)}}function Ut(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Gm(r)){var s=r;break e}r=r.return}throw Error(O(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(Dn(a,""),s.flags&=-33);var i=iu(t);_o(t,i,a);break;case 3:case 4:var l=s.stateNode.containerInfo,o=iu(t);No(t,o,l);break;default:throw Error(O(161))}}catch(c){be(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Ug(t,e,r){M=t,Qm(t)}function Qm(t,e,r){for(var s=(t.mode&1)!==0;M!==null;){var a=M,i=a.child;if(a.tag===22&&s){var l=a.memoizedState!==null||Na;if(!l){var o=a.alternate,c=o!==null&&o.memoizedState!==null||We;o=Na;var d=We;if(Na=l,(We=c)&&!d)for(M=a;M!==null;)l=M,c=l.child,l.tag===22&&l.memoizedState!==null?du(a):c!==null?(c.return=l,M=c):du(a);for(;i!==null;)M=i,Qm(i),i=i.sibling;M=a,Na=o,We=d}ou(t)}else a.subtreeFlags&8772&&i!==null?(i.return=a,M=i):ou(t)}}function ou(t){for(;M!==null;){var e=M;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:We||Oi(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!We)if(r===null)s.componentDidMount();else{var a=e.elementType===e.type?r.memoizedProps:Ct(e.type,r.memoizedProps);s.componentDidUpdate(a,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Hd(e,i,s);break;case 3:var l=e.updateQueue;if(l!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Hd(e,l,r)}break;case 5:var o=e.stateNode;if(r===null&&e.flags&4){r=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var u=h.dehydrated;u!==null&&In(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}We||e.flags&512&&jo(e)}catch(m){be(e,e.return,m)}}if(e===t){M=null;break}if(r=e.sibling,r!==null){r.return=e.return,M=r;break}M=e.return}}function cu(t){for(;M!==null;){var e=M;if(e===t){M=null;break}var r=e.sibling;if(r!==null){r.return=e.return,M=r;break}M=e.return}}function du(t){for(;M!==null;){var e=M;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Oi(4,e)}catch(c){be(e,r,c)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var a=e.return;try{s.componentDidMount()}catch(c){be(e,a,c)}}var i=e.return;try{jo(e)}catch(c){be(e,i,c)}break;case 5:var l=e.return;try{jo(e)}catch(c){be(e,l,c)}}}catch(c){be(e,e.return,c)}if(e===t){M=null;break}var o=e.sibling;if(o!==null){o.return=e.return,M=o;break}M=e.return}}var $g=Math.ceil,ui=ar.ReactCurrentDispatcher,Oc=ar.ReactCurrentOwner,bt=ar.ReactCurrentBatchConfig,ae=0,Ue=null,ke=null,Le=0,ct=0,_s=Rr(0),Re=0,Gn=null,Yr=0,Ui=0,Uc=0,kn=null,st=null,$c=0,Ms=1/0,Ht=null,hi=!1,ko=null,kr=null,_a=!1,yr=null,mi=0,Sn=0,So=null,Fa=-1,za=0;function Qe(){return ae&6?je():Fa!==-1?Fa:Fa=je()}function Sr(t){return t.mode&1?ae&2&&Le!==0?Le&-Le:vg.transition!==null?(za===0&&(za=Uh()),za):(t=oe,t!==0||(t=window.event,t=t===void 0?16:Bh(t.type)),t):1}function Rt(t,e,r,s){if(50<Sn)throw Sn=0,So=null,Error(O(185));ea(t,r,s),(!(ae&2)||t!==Ue)&&(t===Ue&&(!(ae&2)&&(Ui|=r),Re===4&&fr(t,Le)),ot(t,s),r===1&&ae===0&&!(e.mode&1)&&(Ms=je()+500,Ai&&Dr()))}function ot(t,e){var r=t.callbackNode;v0(t,e);var s=Za(t,t===Ue?Le:0);if(s===0)r!==null&&vd(r),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(r!=null&&vd(r),e===1)t.tag===0?yg(uu.bind(null,t)):lm(uu.bind(null,t)),fg(function(){!(ae&6)&&Dr()}),r=null;else{switch($h(s)){case 1:r=oc;break;case 4:r=Dh;break;case 16:r=Ja;break;case 536870912:r=Oh;break;default:r=Ja}r=af(r,Ym.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Ym(t,e){if(Fa=-1,za=0,ae&6)throw Error(O(327));var r=t.callbackNode;if(Ps()&&t.callbackNode!==r)return null;var s=Za(t,t===Ue?Le:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=fi(t,s);else{e=s;var a=ae;ae|=2;var i=ef();(Ue!==t||Le!==e)&&(Ht=null,Ms=je()+500,Kr(t,e));do try{Mg();break}catch(o){Xm(t,o)}while(!0);bc(),ui.current=i,ae=a,ke!==null?e=0:(Ue=null,Le=0,e=Re)}if(e!==0){if(e===2&&(a=Yl(t),a!==0&&(s=a,e=Co(t,a))),e===1)throw r=Gn,Kr(t,0),fr(t,s),ot(t,je()),r;if(e===6)fr(t,s);else{if(a=t.current.alternate,!(s&30)&&!Ig(a)&&(e=fi(t,s),e===2&&(i=Yl(t),i!==0&&(s=i,e=Co(t,i))),e===1))throw r=Gn,Kr(t,0),fr(t,s),ot(t,je()),r;switch(t.finishedWork=a,t.finishedLanes=s,e){case 0:case 1:throw Error(O(345));case 2:zr(t,st,Ht);break;case 3:if(fr(t,s),(s&130023424)===s&&(e=$c+500-je(),10<e)){if(Za(t,0)!==0)break;if(a=t.suspendedLanes,(a&s)!==s){Qe(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=io(zr.bind(null,t,st,Ht),e);break}zr(t,st,Ht);break;case 4:if(fr(t,s),(s&4194240)===s)break;for(e=t.eventTimes,a=-1;0<s;){var l=31-At(s);i=1<<l,l=e[l],l>a&&(a=l),s&=~i}if(s=a,s=je()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*$g(s/1960))-s,10<s){t.timeoutHandle=io(zr.bind(null,t,st,Ht),s);break}zr(t,st,Ht);break;case 5:zr(t,st,Ht);break;default:throw Error(O(329))}}}return ot(t,je()),t.callbackNode===r?Ym.bind(null,t):null}function Co(t,e){var r=kn;return t.current.memoizedState.isDehydrated&&(Kr(t,e).flags|=256),t=fi(t,e),t!==2&&(e=st,st=r,e!==null&&Eo(e)),t}function Eo(t){st===null?st=t:st.push.apply(st,t)}function Ig(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var a=r[s],i=a.getSnapshot;a=a.value;try{if(!Dt(i(),a))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function fr(t,e){for(e&=~Uc,e&=~Ui,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-At(e),s=1<<r;t[r]=-1,e&=~s}}function uu(t){if(ae&6)throw Error(O(327));Ps();var e=Za(t,0);if(!(e&1))return ot(t,je()),null;var r=fi(t,e);if(t.tag!==0&&r===2){var s=Yl(t);s!==0&&(e=s,r=Co(t,s))}if(r===1)throw r=Gn,Kr(t,0),fr(t,e),ot(t,je()),r;if(r===6)throw Error(O(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,zr(t,st,Ht),ot(t,je()),null}function Ic(t,e){var r=ae;ae|=1;try{return t(e)}finally{ae=r,ae===0&&(Ms=je()+500,Ai&&Dr())}}function Xr(t){yr!==null&&yr.tag===0&&!(ae&6)&&Ps();var e=ae;ae|=1;var r=bt.transition,s=oe;try{if(bt.transition=null,oe=1,t)return t()}finally{oe=s,bt.transition=r,ae=e,!(ae&6)&&Dr()}}function Lc(){ct=_s.current,me(_s)}function Kr(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,mg(r)),ke!==null)for(r=ke.return;r!==null;){var s=r;switch(yc(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&ti();break;case 3:Is(),me(it),me(Ve),Cc();break;case 5:Sc(s);break;case 4:Is();break;case 13:me(xe);break;case 19:me(xe);break;case 10:jc(s.type._context);break;case 22:case 23:Lc()}r=r.return}if(Ue=t,ke=t=Cr(t.current,null),Le=ct=e,Re=0,Gn=null,Uc=Ui=Yr=0,st=kn=null,Vr!==null){for(e=0;e<Vr.length;e++)if(r=Vr[e],s=r.interleaved,s!==null){r.interleaved=null;var a=s.next,i=r.pending;if(i!==null){var l=i.next;i.next=a,s.next=l}r.pending=s}Vr=null}return t}function Xm(t,e){do{var r=ke;try{if(bc(),Ia.current=di,ci){for(var s=ye.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}ci=!1}if(Qr=0,Oe=Pe=ye=null,Nn=!1,Vn=0,Oc.current=null,r===null||r.return===null){Re=1,Gn=e,ke=null;break}e:{var i=t,l=r.return,o=r,c=e;if(e=Le,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=o,u=h.tag;if(!(h.mode&1)&&(u===0||u===11||u===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=Yd(l);if(y!==null){y.flags&=-257,Xd(y,l,o,i,e),y.mode&1&&Qd(i,d,e),e=y,c=d;var w=e.updateQueue;if(w===null){var _=new Set;_.add(c),e.updateQueue=_}else w.add(c);break e}else{if(!(e&1)){Qd(i,d,e),Mc();break e}c=Error(O(426))}}else if(ge&&o.mode&1){var N=Yd(l);if(N!==null){!(N.flags&65536)&&(N.flags|=256),Xd(N,l,o,i,e),vc(Ls(c,o));break e}}i=c=Ls(c,o),Re!==4&&(Re=2),kn===null?kn=[i]:kn.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=$m(i,c,e);Vd(i,x);break e;case 1:o=c;var p=i.type,f=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(kr===null||!kr.has(f)))){i.flags|=65536,e&=-e,i.lanes|=e;var b=Im(i,o,e);Vd(i,b);break e}}i=i.return}while(i!==null)}rf(r)}catch(v){e=v,ke===r&&r!==null&&(ke=r=r.return);continue}break}while(!0)}function ef(){var t=ui.current;return ui.current=di,t===null?di:t}function Mc(){(Re===0||Re===3||Re===2)&&(Re=4),Ue===null||!(Yr&268435455)&&!(Ui&268435455)||fr(Ue,Le)}function fi(t,e){var r=ae;ae|=2;var s=ef();(Ue!==t||Le!==e)&&(Ht=null,Kr(t,e));do try{Lg();break}catch(a){Xm(t,a)}while(!0);if(bc(),ae=r,ui.current=s,ke!==null)throw Error(O(261));return Ue=null,Le=0,Re}function Lg(){for(;ke!==null;)tf(ke)}function Mg(){for(;ke!==null&&!d0();)tf(ke)}function tf(t){var e=nf(t.alternate,t,ct);t.memoizedProps=t.pendingProps,e===null?rf(t):ke=e,Oc.current=null}function rf(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Rg(r,e),r!==null){r.flags&=32767,ke=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Re=6,ke=null;return}}else if(r=Ag(r,e,ct),r!==null){ke=r;return}if(e=e.sibling,e!==null){ke=e;return}ke=e=t}while(e!==null);Re===0&&(Re=5)}function zr(t,e,r){var s=oe,a=bt.transition;try{bt.transition=null,oe=1,Fg(t,e,r,s)}finally{bt.transition=a,oe=s}return null}function Fg(t,e,r,s){do Ps();while(yr!==null);if(ae&6)throw Error(O(327));r=t.finishedWork;var a=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(O(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(w0(t,i),t===Ue&&(ke=Ue=null,Le=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||_a||(_a=!0,af(Ja,function(){return Ps(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=bt.transition,bt.transition=null;var l=oe;oe=1;var o=ae;ae|=4,Oc.current=null,Og(t,r),Zm(r,t),ig(no),Qa=!!so,no=so=null,t.current=r,Ug(r),u0(),ae=o,oe=l,bt.transition=i}else t.current=r;if(_a&&(_a=!1,yr=t,mi=a),i=t.pendingLanes,i===0&&(kr=null),f0(r.stateNode),ot(t,je()),e!==null)for(s=t.onRecoverableError,r=0;r<e.length;r++)a=e[r],s(a.value,{componentStack:a.stack,digest:a.digest});if(hi)throw hi=!1,t=ko,ko=null,t;return mi&1&&t.tag!==0&&Ps(),i=t.pendingLanes,i&1?t===So?Sn++:(Sn=0,So=t):Sn=0,Dr(),null}function Ps(){if(yr!==null){var t=$h(mi),e=bt.transition,r=oe;try{if(bt.transition=null,oe=16>t?16:t,yr===null)var s=!1;else{if(t=yr,yr=null,mi=0,ae&6)throw Error(O(331));var a=ae;for(ae|=4,M=t.current;M!==null;){var i=M,l=i.child;if(M.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(M=d;M!==null;){var h=M;switch(h.tag){case 0:case 11:case 15:_n(8,h,i)}var u=h.child;if(u!==null)u.return=h,M=u;else for(;M!==null;){h=M;var m=h.sibling,y=h.return;if(Km(h),h===d){M=null;break}if(m!==null){m.return=y,M=m;break}M=y}}}var w=i.alternate;if(w!==null){var _=w.child;if(_!==null){w.child=null;do{var N=_.sibling;_.sibling=null,_=N}while(_!==null)}}M=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,M=l;else e:for(;M!==null;){if(i=M,i.flags&2048)switch(i.tag){case 0:case 11:case 15:_n(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,M=x;break e}M=i.return}}var p=t.current;for(M=p;M!==null;){l=M;var f=l.child;if(l.subtreeFlags&2064&&f!==null)f.return=l,M=f;else e:for(l=p;M!==null;){if(o=M,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Oi(9,o)}}catch(v){be(o,o.return,v)}if(o===l){M=null;break e}var b=o.sibling;if(b!==null){b.return=o.return,M=b;break e}M=o.return}}if(ae=a,Dr(),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(Si,t)}catch{}s=!0}return s}finally{oe=r,bt.transition=e}}return!1}function hu(t,e,r){e=Ls(r,e),e=$m(t,e,1),t=_r(t,e,1),e=Qe(),t!==null&&(ea(t,1,e),ot(t,e))}function be(t,e,r){if(t.tag===3)hu(t,t,r);else for(;e!==null;){if(e.tag===3){hu(e,t,r);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(kr===null||!kr.has(s))){t=Ls(r,t),t=Im(e,t,1),e=_r(e,t,1),t=Qe(),e!==null&&(ea(e,1,t),ot(e,t));break}}e=e.return}}function zg(t,e,r){var s=t.pingCache;s!==null&&s.delete(e),e=Qe(),t.pingedLanes|=t.suspendedLanes&r,Ue===t&&(Le&r)===r&&(Re===4||Re===3&&(Le&130023424)===Le&&500>je()-$c?Kr(t,0):Uc|=r),ot(t,e)}function sf(t,e){e===0&&(t.mode&1?(e=fa,fa<<=1,!(fa&130023424)&&(fa=4194304)):e=1);var r=Qe();t=rr(t,e),t!==null&&(ea(t,e,r),ot(t,r))}function Bg(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),sf(t,r)}function qg(t,e){var r=0;switch(t.tag){case 13:var s=t.stateNode,a=t.memoizedState;a!==null&&(r=a.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(O(314))}s!==null&&s.delete(e),sf(t,r)}var nf;nf=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||it.current)at=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return at=!1,Pg(t,e,r);at=!!(t.flags&131072)}else at=!1,ge&&e.flags&1048576&&om(e,ni,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;Ma(t,e),t=e.pendingProps;var a=Os(e,Ve.current);Ts(e,r),a=Tc(null,e,s,t,a,r);var i=Pc();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,lt(s)?(i=!0,ri(e)):i=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,_c(e),a.updater=Di,e.stateNode=a,a._reactInternals=e,fo(e,s,t,r),e=xo(null,e,s,!0,i,r)):(e.tag=0,ge&&i&&xc(e),Ze(null,e,a,r),e=e.child),e;case 16:s=e.elementType;e:{switch(Ma(t,e),t=e.pendingProps,a=s._init,s=a(s._payload),e.type=s,a=e.tag=Vg(s),t=Ct(s,t),a){case 0:e=go(null,e,s,t,r);break e;case 1:e=ru(null,e,s,t,r);break e;case 11:e=eu(null,e,s,t,r);break e;case 14:e=tu(null,e,s,Ct(s.type,t),r);break e}throw Error(O(306,s,""))}return e;case 0:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:Ct(s,a),go(t,e,s,a,r);case 1:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:Ct(s,a),ru(t,e,s,a,r);case 3:e:{if(zm(e),t===null)throw Error(O(387));s=e.pendingProps,i=e.memoizedState,a=i.element,fm(t,e),li(e,s,null,r);var l=e.memoizedState;if(s=l.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){a=Ls(Error(O(423)),e),e=su(t,e,s,r,a);break e}else if(s!==a){a=Ls(Error(O(424)),e),e=su(t,e,s,r,a);break e}else for(dt=Nr(e.stateNode.containerInfo.firstChild),ut=e,ge=!0,Pt=null,r=hm(e,null,s,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Us(),s===a){e=sr(t,e,r);break e}Ze(t,e,s,r)}e=e.child}return e;case 5:return pm(e),t===null&&uo(e),s=e.type,a=e.pendingProps,i=t!==null?t.memoizedProps:null,l=a.children,ao(s,a)?l=null:i!==null&&ao(s,i)&&(e.flags|=32),Fm(t,e),Ze(t,e,l,r),e.child;case 6:return t===null&&uo(e),null;case 13:return Bm(t,e,r);case 4:return kc(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=$s(e,null,s,r):Ze(t,e,s,r),e.child;case 11:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:Ct(s,a),eu(t,e,s,a,r);case 7:return Ze(t,e,e.pendingProps,r),e.child;case 8:return Ze(t,e,e.pendingProps.children,r),e.child;case 12:return Ze(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(s=e.type._context,a=e.pendingProps,i=e.memoizedProps,l=a.value,ue(ai,s._currentValue),s._currentValue=l,i!==null)if(Dt(i.value,l)){if(i.children===a.children&&!it.current){e=sr(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var c=o.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=Xt(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),ho(i.return,r,e),o.lanes|=r;break}c=c.next}}else if(i.tag===10)l=i.type===e.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(O(341));l.lanes|=r,o=l.alternate,o!==null&&(o.lanes|=r),ho(l,r,e),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===e){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}Ze(t,e,a.children,r),e=e.child}return e;case 9:return a=e.type,s=e.pendingProps.children,Ts(e,r),a=Nt(a),s=s(a),e.flags|=1,Ze(t,e,s,r),e.child;case 14:return s=e.type,a=Ct(s,e.pendingProps),a=Ct(s.type,a),tu(t,e,s,a,r);case 15:return Lm(t,e,e.type,e.pendingProps,r);case 17:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:Ct(s,a),Ma(t,e),e.tag=1,lt(s)?(t=!0,ri(e)):t=!1,Ts(e,r),Um(e,s,a),fo(e,s,a,r),xo(null,e,s,!0,t,r);case 19:return qm(t,e,r);case 22:return Mm(t,e,r)}throw Error(O(156,e.tag))};function af(t,e){return Rh(t,e)}function Wg(t,e,r,s){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vt(t,e,r,s){return new Wg(t,e,r,s)}function Fc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Vg(t){if(typeof t=="function")return Fc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ac)return 11;if(t===ic)return 14}return 2}function Cr(t,e){var r=t.alternate;return r===null?(r=vt(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Ba(t,e,r,s,a,i){var l=2;if(s=t,typeof t=="function")Fc(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case fs:return Gr(r.children,a,i,e);case nc:l=8,a|=8;break;case Il:return t=vt(12,r,e,a|2),t.elementType=Il,t.lanes=i,t;case Ll:return t=vt(13,r,e,a),t.elementType=Ll,t.lanes=i,t;case Ml:return t=vt(19,r,e,a),t.elementType=Ml,t.lanes=i,t;case ph:return $i(r,a,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case mh:l=10;break e;case fh:l=9;break e;case ac:l=11;break e;case ic:l=14;break e;case ur:l=16,s=null;break e}throw Error(O(130,t==null?t:typeof t,""))}return e=vt(l,r,e,a),e.elementType=t,e.type=s,e.lanes=i,e}function Gr(t,e,r,s){return t=vt(7,t,s,e),t.lanes=r,t}function $i(t,e,r,s){return t=vt(22,t,s,e),t.elementType=ph,t.lanes=r,t.stateNode={isHidden:!1},t}function Nl(t,e,r){return t=vt(6,t,null,e),t.lanes=r,t}function _l(t,e,r){return e=vt(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Hg(t,e,r,s,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nl(0),this.expirationTimes=nl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nl(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function zc(t,e,r,s,a,i,l,o,c){return t=new Hg(t,e,r,o,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=vt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},_c(i),t}function Kg(t,e,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ms,key:s==null?null:""+s,children:t,containerInfo:e,implementation:r}}function lf(t){if(!t)return Pr;t=t._reactInternals;e:{if(rs(t)!==t||t.tag!==1)throw Error(O(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(lt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(O(171))}if(t.tag===1){var r=t.type;if(lt(r))return im(t,r,e)}return e}function of(t,e,r,s,a,i,l,o,c){return t=zc(r,s,!0,t,a,i,l,o,c),t.context=lf(null),r=t.current,s=Qe(),a=Sr(r),i=Xt(s,a),i.callback=e??null,_r(r,i,a),t.current.lanes=a,ea(t,a,s),ot(t,s),t}function Ii(t,e,r,s){var a=e.current,i=Qe(),l=Sr(a);return r=lf(r),e.context===null?e.context=r:e.pendingContext=r,e=Xt(i,l),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=_r(a,e,l),t!==null&&(Rt(t,a,l,i),$a(t,a,l)),l}function pi(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function mu(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Bc(t,e){mu(t,e),(t=t.alternate)&&mu(t,e)}function Gg(){return null}var cf=typeof reportError=="function"?reportError:function(t){console.error(t)};function qc(t){this._internalRoot=t}Li.prototype.render=qc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(O(409));Ii(t,e,null,null)};Li.prototype.unmount=qc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Xr(function(){Ii(null,t,null,null)}),e[tr]=null}};function Li(t){this._internalRoot=t}Li.prototype.unstable_scheduleHydration=function(t){if(t){var e=Mh();t={blockedOn:null,target:t,priority:e};for(var r=0;r<mr.length&&e!==0&&e<mr[r].priority;r++);mr.splice(r,0,t),r===0&&zh(t)}};function Wc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Mi(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function fu(){}function Jg(t,e,r,s,a){if(a){if(typeof s=="function"){var i=s;s=function(){var d=pi(l);i.call(d)}}var l=of(e,s,t,0,null,!1,!1,"",fu);return t._reactRootContainer=l,t[tr]=l.current,Fn(t.nodeType===8?t.parentNode:t),Xr(),l}for(;a=t.lastChild;)t.removeChild(a);if(typeof s=="function"){var o=s;s=function(){var d=pi(c);o.call(d)}}var c=zc(t,0,!1,null,null,!1,!1,"",fu);return t._reactRootContainer=c,t[tr]=c.current,Fn(t.nodeType===8?t.parentNode:t),Xr(function(){Ii(e,c,r,s)}),c}function Fi(t,e,r,s,a){var i=r._reactRootContainer;if(i){var l=i;if(typeof a=="function"){var o=a;a=function(){var c=pi(l);o.call(c)}}Ii(e,l,t,a)}else l=Jg(r,e,t,a,s);return pi(l)}Ih=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=fn(e.pendingLanes);r!==0&&(cc(e,r|1),ot(e,je()),!(ae&6)&&(Ms=je()+500,Dr()))}break;case 13:Xr(function(){var s=rr(t,1);if(s!==null){var a=Qe();Rt(s,t,1,a)}}),Bc(t,1)}};dc=function(t){if(t.tag===13){var e=rr(t,134217728);if(e!==null){var r=Qe();Rt(e,t,134217728,r)}Bc(t,134217728)}};Lh=function(t){if(t.tag===13){var e=Sr(t),r=rr(t,e);if(r!==null){var s=Qe();Rt(r,t,e,s)}Bc(t,e)}};Mh=function(){return oe};Fh=function(t,e){var r=oe;try{return oe=t,e()}finally{oe=r}};Jl=function(t,e,r){switch(e){case"input":if(Bl(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var s=r[e];if(s!==t&&s.form===t.form){var a=Pi(s);if(!a)throw Error(O(90));xh(s),Bl(s,a)}}}break;case"textarea":vh(t,r);break;case"select":e=r.value,e!=null&&ks(t,!!r.multiple,e,!1)}};Sh=Ic;Ch=Xr;var Zg={usingClientEntryPoint:!1,Events:[ra,ys,Pi,_h,kh,Ic]},dn={findFiberByHostInstance:Wr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Qg={bundleType:dn.bundleType,version:dn.version,rendererPackageName:dn.rendererPackageName,rendererConfig:dn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ar.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ph(t),t===null?null:t.stateNode},findFiberByHostInstance:dn.findFiberByHostInstance||Gg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ka=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ka.isDisabled&&ka.supportsFiber)try{Si=ka.inject(Qg),Ft=ka}catch{}}mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zg;mt.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wc(e))throw Error(O(200));return Kg(t,e,null,r)};mt.createRoot=function(t,e){if(!Wc(t))throw Error(O(299));var r=!1,s="",a=cf;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=zc(t,1,!1,null,null,r,!1,s,a),t[tr]=e.current,Fn(t.nodeType===8?t.parentNode:t),new qc(e)};mt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(O(188)):(t=Object.keys(t).join(","),Error(O(268,t)));return t=Ph(e),t=t===null?null:t.stateNode,t};mt.flushSync=function(t){return Xr(t)};mt.hydrate=function(t,e,r){if(!Mi(e))throw Error(O(200));return Fi(null,t,e,!0,r)};mt.hydrateRoot=function(t,e,r){if(!Wc(t))throw Error(O(405));var s=r!=null&&r.hydratedSources||null,a=!1,i="",l=cf;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),e=of(e,null,t,1,r??null,a,!1,i,l),t[tr]=e.current,Fn(t),s)for(t=0;t<s.length;t++)r=s[t],a=r._getVersion,a=a(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,a]:e.mutableSourceEagerHydrationData.push(r,a);return new Li(e)};mt.render=function(t,e,r){if(!Mi(e))throw Error(O(200));return Fi(null,t,e,!1,r)};mt.unmountComponentAtNode=function(t){if(!Mi(t))throw Error(O(40));return t._reactRootContainer?(Xr(function(){Fi(null,null,t,!1,function(){t._reactRootContainer=null,t[tr]=null})}),!0):!1};mt.unstable_batchedUpdates=Ic;mt.unstable_renderSubtreeIntoContainer=function(t,e,r,s){if(!Mi(r))throw Error(O(200));if(t==null||t._reactInternals===void 0)throw Error(O(38));return Fi(t,e,r,!1,s)};mt.version="18.3.1-next-f1338f8080-20240426";function df(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(df)}catch(t){console.error(t)}}df(),ch.exports=mt;var Yg=ch.exports,pu=Yg;Ul.createRoot=pu.createRoot,Ul.hydrateRoot=pu.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jn(){return Jn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Jn.apply(this,arguments)}var vr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(vr||(vr={}));const gu="popstate";function Xg(t){t===void 0&&(t={});function e(s,a){let{pathname:i,search:l,hash:o}=s.location;return To("",{pathname:i,search:l,hash:o},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(s,a){return typeof a=="string"?a:gi(a)}return tx(e,r,null,t)}function Ne(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function uf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ex(){return Math.random().toString(36).substr(2,8)}function xu(t,e){return{usr:t.state,key:t.key,idx:e}}function To(t,e,r,s){return r===void 0&&(r=null),Jn({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Gs(e):e,{state:r,key:e&&e.key||s||ex()})}function gi(t){let{pathname:e="/",search:r="",hash:s=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Gs(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function tx(t,e,r,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:i=!1}=s,l=a.history,o=vr.Pop,c=null,d=h();d==null&&(d=0,l.replaceState(Jn({},l.state,{idx:d}),""));function h(){return(l.state||{idx:null}).idx}function u(){o=vr.Pop;let N=h(),x=N==null?null:N-d;d=N,c&&c({action:o,location:_.location,delta:x})}function m(N,x){o=vr.Push;let p=To(_.location,N,x);d=h()+1;let f=xu(p,d),b=_.createHref(p);try{l.pushState(f,"",b)}catch(v){if(v instanceof DOMException&&v.name==="DataCloneError")throw v;a.location.assign(b)}i&&c&&c({action:o,location:_.location,delta:1})}function y(N,x){o=vr.Replace;let p=To(_.location,N,x);d=h();let f=xu(p,d),b=_.createHref(p);l.replaceState(f,"",b),i&&c&&c({action:o,location:_.location,delta:0})}function w(N){let x=a.location.origin!=="null"?a.location.origin:a.location.href,p=typeof N=="string"?N:gi(N);return p=p.replace(/ $/,"%20"),Ne(x,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,x)}let _={get action(){return o},get location(){return t(a,l)},listen(N){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(gu,u),c=N,()=>{a.removeEventListener(gu,u),c=null}},createHref(N){return e(a,N)},createURL:w,encodeLocation(N){let x=w(N);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:m,replace:y,go(N){return l.go(N)}};return _}var yu;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(yu||(yu={}));function rx(t,e,r){return r===void 0&&(r="/"),sx(t,e,r)}function sx(t,e,r,s){let a=typeof e=="string"?Gs(e):e,i=Vc(a.pathname||"/",r);if(i==null)return null;let l=hf(t);nx(l);let o=null;for(let c=0;o==null&&c<l.length;++c){let d=gx(i);o=mx(l[c],d)}return o}function hf(t,e,r,s){e===void 0&&(e=[]),r===void 0&&(r=[]),s===void 0&&(s="");let a=(i,l,o)=>{let c={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};c.relativePath.startsWith("/")&&(Ne(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let d=Er([s,c.relativePath]),h=r.concat(c);i.children&&i.children.length>0&&(Ne(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),hf(i.children,e,h,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:ux(d,i.index),routesMeta:h})};return t.forEach((i,l)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))a(i,l);else for(let c of mf(i.path))a(i,l,c)}),e}function mf(t){let e=t.split("/");if(e.length===0)return[];let[r,...s]=e,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(s.length===0)return a?[i,""]:[i];let l=mf(s.join("/")),o=[];return o.push(...l.map(c=>c===""?i:[i,c].join("/"))),a&&o.push(...l),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function nx(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:hx(e.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const ax=/^:[\w-]+$/,ix=3,lx=2,ox=1,cx=10,dx=-2,vu=t=>t==="*";function ux(t,e){let r=t.split("/"),s=r.length;return r.some(vu)&&(s+=dx),e&&(s+=lx),r.filter(a=>!vu(a)).reduce((a,i)=>a+(ax.test(i)?ix:i===""?ox:cx),s)}function hx(t,e){return t.length===e.length&&t.slice(0,-1).every((s,a)=>s===e[a])?t[t.length-1]-e[e.length-1]:0}function mx(t,e,r){let{routesMeta:s}=t,a={},i="/",l=[];for(let o=0;o<s.length;++o){let c=s[o],d=o===s.length-1,h=i==="/"?e:e.slice(i.length)||"/",u=fx({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),m=c.route;if(!u)return null;Object.assign(a,u.params),l.push({params:a,pathname:Er([i,u.pathname]),pathnameBase:wx(Er([i,u.pathnameBase])),route:m}),u.pathnameBase!=="/"&&(i=Er([i,u.pathnameBase]))}return l}function fx(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,s]=px(t.path,t.caseSensitive,t.end),a=e.match(r);if(!a)return null;let i=a[0],l=i.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:s.reduce((d,h,u)=>{let{paramName:m,isOptional:y}=h;if(m==="*"){let _=o[u]||"";l=i.slice(0,i.length-_.length).replace(/(.)\/+$/,"$1")}const w=o[u];return y&&!w?d[m]=void 0:d[m]=(w||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:l,pattern:t}}function px(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),uf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,c)=>(s.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function gx(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return uf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Vc(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,s=t.charAt(r);return s&&s!=="/"?null:t.slice(r)||"/"}function xx(t,e){e===void 0&&(e="/");let{pathname:r,search:s="",hash:a=""}=typeof t=="string"?Gs(t):t;return{pathname:r?r.startsWith("/")?r:yx(r,e):e,search:bx(s),hash:jx(a)}}function yx(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function kl(t,e,r,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function vx(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Hc(t,e){let r=vx(t);return e?r.map((s,a)=>a===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function Kc(t,e,r,s){s===void 0&&(s=!1);let a;typeof t=="string"?a=Gs(t):(a=Jn({},t),Ne(!a.pathname||!a.pathname.includes("?"),kl("?","pathname","search",a)),Ne(!a.pathname||!a.pathname.includes("#"),kl("#","pathname","hash",a)),Ne(!a.search||!a.search.includes("#"),kl("#","search","hash",a)));let i=t===""||a.pathname==="",l=i?"/":a.pathname,o;if(l==null)o=r;else{let u=e.length-1;if(!s&&l.startsWith("..")){let m=l.split("/");for(;m[0]==="..";)m.shift(),u-=1;a.pathname=m.join("/")}o=u>=0?e[u]:"/"}let c=xx(a,o),d=l&&l!=="/"&&l.endsWith("/"),h=(i||l===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}const Er=t=>t.join("/").replace(/\/\/+/g,"/"),wx=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),bx=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,jx=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Nx(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ff=["post","put","patch","delete"];new Set(ff);const _x=["get",...ff];new Set(_x);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zn(){return Zn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Zn.apply(this,arguments)}const Gc=g.createContext(null),kx=g.createContext(null),Or=g.createContext(null),zi=g.createContext(null),ir=g.createContext({outlet:null,matches:[],isDataRoute:!1}),pf=g.createContext(null);function Sx(t,e){let{relative:r}=e===void 0?{}:e;Js()||Ne(!1);let{basename:s,navigator:a}=g.useContext(Or),{hash:i,pathname:l,search:o}=xf(t,{relative:r}),c=l;return s!=="/"&&(c=l==="/"?s:Er([s,l])),a.createHref({pathname:c,search:o,hash:i})}function Js(){return g.useContext(zi)!=null}function Zs(){return Js()||Ne(!1),g.useContext(zi).location}function gf(t){g.useContext(Or).static||g.useLayoutEffect(t)}function Qs(){let{isDataRoute:t}=g.useContext(ir);return t?Fx():Cx()}function Cx(){Js()||Ne(!1);let t=g.useContext(Gc),{basename:e,future:r,navigator:s}=g.useContext(Or),{matches:a}=g.useContext(ir),{pathname:i}=Zs(),l=JSON.stringify(Hc(a,r.v7_relativeSplatPath)),o=g.useRef(!1);return gf(()=>{o.current=!0}),g.useCallback(function(d,h){if(h===void 0&&(h={}),!o.current)return;if(typeof d=="number"){s.go(d);return}let u=Kc(d,JSON.parse(l),i,h.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:Er([e,u.pathname])),(h.replace?s.replace:s.push)(u,h.state,h)},[e,s,l,i,t])}function Ex(){let{matches:t}=g.useContext(ir),e=t[t.length-1];return e?e.params:{}}function xf(t,e){let{relative:r}=e===void 0?{}:e,{future:s}=g.useContext(Or),{matches:a}=g.useContext(ir),{pathname:i}=Zs(),l=JSON.stringify(Hc(a,s.v7_relativeSplatPath));return g.useMemo(()=>Kc(t,JSON.parse(l),i,r==="path"),[t,l,i,r])}function Tx(t,e){return Px(t,e)}function Px(t,e,r,s){Js()||Ne(!1);let{navigator:a}=g.useContext(Or),{matches:i}=g.useContext(ir),l=i[i.length-1],o=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let d=Zs(),h;if(e){var u;let N=typeof e=="string"?Gs(e):e;c==="/"||(u=N.pathname)!=null&&u.startsWith(c)||Ne(!1),h=N}else h=d;let m=h.pathname||"/",y=m;if(c!=="/"){let N=c.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(N.length).join("/")}let w=rx(t,{pathname:y}),_=Ux(w&&w.map(N=>Object.assign({},N,{params:Object.assign({},o,N.params),pathname:Er([c,a.encodeLocation?a.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?c:Er([c,a.encodeLocation?a.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),i,r,s);return e&&_?g.createElement(zi.Provider,{value:{location:Zn({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:vr.Pop}},_):_}function Ax(){let t=Mx(),e=Nx(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},e),r?g.createElement("pre",{style:a},r):null,null)}const Rx=g.createElement(Ax,null);class Dx extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?g.createElement(ir.Provider,{value:this.props.routeContext},g.createElement(pf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ox(t){let{routeContext:e,match:r,children:s}=t,a=g.useContext(Gc);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),g.createElement(ir.Provider,{value:e},s)}function Ux(t,e,r,s){var a;if(e===void 0&&(e=[]),r===void 0&&(r=null),s===void 0&&(s=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=s)!=null&&i.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let l=t,o=(a=r)==null?void 0:a.errors;if(o!=null){let h=l.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id])!==void 0);h>=0||Ne(!1),l=l.slice(0,Math.min(l.length,h+1))}let c=!1,d=-1;if(r&&s&&s.v7_partialHydration)for(let h=0;h<l.length;h++){let u=l[h];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(d=h),u.route.id){let{loaderData:m,errors:y}=r,w=u.route.loader&&m[u.route.id]===void 0&&(!y||y[u.route.id]===void 0);if(u.route.lazy||w){c=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}return l.reduceRight((h,u,m)=>{let y,w=!1,_=null,N=null;r&&(y=o&&u.route.id?o[u.route.id]:void 0,_=u.route.errorElement||Rx,c&&(d<0&&m===0?(zx("route-fallback"),w=!0,N=null):d===m&&(w=!0,N=u.route.hydrateFallbackElement||null)));let x=e.concat(l.slice(0,m+1)),p=()=>{let f;return y?f=_:w?f=N:u.route.Component?f=g.createElement(u.route.Component,null):u.route.element?f=u.route.element:f=h,g.createElement(Ox,{match:u,routeContext:{outlet:h,matches:x,isDataRoute:r!=null},children:f})};return r&&(u.route.ErrorBoundary||u.route.errorElement||m===0)?g.createElement(Dx,{location:r.location,revalidation:r.revalidation,component:_,error:y,children:p(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):p()},null)}var yf=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(yf||{}),vf=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(vf||{});function $x(t){let e=g.useContext(Gc);return e||Ne(!1),e}function Ix(t){let e=g.useContext(kx);return e||Ne(!1),e}function Lx(t){let e=g.useContext(ir);return e||Ne(!1),e}function wf(t){let e=Lx(),r=e.matches[e.matches.length-1];return r.route.id||Ne(!1),r.route.id}function Mx(){var t;let e=g.useContext(pf),r=Ix(),s=wf();return e!==void 0?e:(t=r.errors)==null?void 0:t[s]}function Fx(){let{router:t}=$x(yf.UseNavigateStable),e=wf(vf.UseNavigateStable),r=g.useRef(!1);return gf(()=>{r.current=!0}),g.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?t.navigate(a):t.navigate(a,Zn({fromRouteId:e},i)))},[t,e])}const wu={};function zx(t,e,r){wu[t]||(wu[t]=!0)}function Bx(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function bf(t){let{to:e,replace:r,state:s,relative:a}=t;Js()||Ne(!1);let{future:i,static:l}=g.useContext(Or),{matches:o}=g.useContext(ir),{pathname:c}=Zs(),d=Qs(),h=Kc(e,Hc(o,i.v7_relativeSplatPath),c,a==="path"),u=JSON.stringify(h);return g.useEffect(()=>d(JSON.parse(u),{replace:r,state:s,relative:a}),[d,u,a,r,s]),null}function Je(t){Ne(!1)}function qx(t){let{basename:e="/",children:r=null,location:s,navigationType:a=vr.Pop,navigator:i,static:l=!1,future:o}=t;Js()&&Ne(!1);let c=e.replace(/^\/*/,"/"),d=g.useMemo(()=>({basename:c,navigator:i,static:l,future:Zn({v7_relativeSplatPath:!1},o)}),[c,o,i,l]);typeof s=="string"&&(s=Gs(s));let{pathname:h="/",search:u="",hash:m="",state:y=null,key:w="default"}=s,_=g.useMemo(()=>{let N=Vc(h,c);return N==null?null:{location:{pathname:N,search:u,hash:m,state:y,key:w},navigationType:a}},[c,h,u,m,y,w,a]);return _==null?null:g.createElement(Or.Provider,{value:d},g.createElement(zi.Provider,{children:r,value:_}))}function Wx(t){let{children:e,location:r}=t;return Tx(Po(e),r)}new Promise(()=>{});function Po(t,e){e===void 0&&(e=[]);let r=[];return g.Children.forEach(t,(s,a)=>{if(!g.isValidElement(s))return;let i=[...e,a];if(s.type===g.Fragment){r.push.apply(r,Po(s.props.children,i));return}s.type!==Je&&Ne(!1),!s.props.index||!s.props.children||Ne(!1);let l={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=Po(s.props.children,i)),r.push(l)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ao(){return Ao=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Ao.apply(this,arguments)}function Vx(t,e){if(t==null)return{};var r={},s=Object.keys(t),a,i;for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&(r[a]=t[a]);return r}function Hx(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Kx(t,e){return t.button===0&&(!e||e==="_self")&&!Hx(t)}const Gx=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Jx="6";try{window.__reactRouterVersion=Jx}catch{}const Zx="startTransition",bu=zp[Zx];function Qx(t){let{basename:e,children:r,future:s,window:a}=t,i=g.useRef();i.current==null&&(i.current=Xg({window:a,v5Compat:!0}));let l=i.current,[o,c]=g.useState({action:l.action,location:l.location}),{v7_startTransition:d}=s||{},h=g.useCallback(u=>{d&&bu?bu(()=>c(u)):c(u)},[c,d]);return g.useLayoutEffect(()=>l.listen(h),[l,h]),g.useEffect(()=>Bx(s),[s]),g.createElement(qx,{basename:e,children:r,location:o.location,navigationType:o.action,navigator:l,future:s})}const Yx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Xx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ey=g.forwardRef(function(e,r){let{onClick:s,relative:a,reloadDocument:i,replace:l,state:o,target:c,to:d,preventScrollReset:h,viewTransition:u}=e,m=Vx(e,Gx),{basename:y}=g.useContext(Or),w,_=!1;if(typeof d=="string"&&Xx.test(d)&&(w=d,Yx))try{let f=new URL(window.location.href),b=d.startsWith("//")?new URL(f.protocol+d):new URL(d),v=Vc(b.pathname,y);b.origin===f.origin&&v!=null?d=v+b.search+b.hash:_=!0}catch{}let N=Sx(d,{relative:a}),x=ty(d,{replace:l,state:o,target:c,preventScrollReset:h,relative:a,viewTransition:u});function p(f){s&&s(f),f.defaultPrevented||x(f)}return g.createElement("a",Ao({},m,{href:w||N,onClick:_||i?s:p,ref:r,target:c}))});var ju;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(ju||(ju={}));var Nu;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Nu||(Nu={}));function ty(t,e){let{target:r,replace:s,state:a,preventScrollReset:i,relative:l,viewTransition:o}=e===void 0?{}:e,c=Qs(),d=Zs(),h=xf(t,{relative:l});return g.useCallback(u=>{if(Kx(u,r)){u.preventDefault();let m=s!==void 0?s:gi(d)===gi(h);c(t,{replace:m,state:a,preventScrollReset:i,relative:l,viewTransition:o})}},[d,c,h,s,a,r,t,i,l,o])}let ry={data:""},sy=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||ry,ny=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,ay=/\/\*[^]*?\*\/|  +/g,_u=/\n+/g,pr=(t,e)=>{let r="",s="",a="";for(let i in t){let l=t[i];i[0]=="@"?i[1]=="i"?r=i+" "+l+";":s+=i[1]=="f"?pr(l,i):i+"{"+pr(l,i[1]=="k"?"":e)+"}":typeof l=="object"?s+=pr(l,e?e.replace(/([^,])+/g,o=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,o):o?o+" "+c:c)):i):l!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=pr.p?pr.p(i,l):i+":"+l+";")}return r+(e&&a?e+"{"+a+"}":a)+s},Wt={},jf=t=>{if(typeof t=="object"){let e="";for(let r in t)e+=r+jf(t[r]);return e}return t},iy=(t,e,r,s,a)=>{let i=jf(t),l=Wt[i]||(Wt[i]=(c=>{let d=0,h=11;for(;d<c.length;)h=101*h+c.charCodeAt(d++)>>>0;return"go"+h})(i));if(!Wt[l]){let c=i!==t?t:(d=>{let h,u,m=[{}];for(;h=ny.exec(d.replace(ay,""));)h[4]?m.shift():h[3]?(u=h[3].replace(_u," ").trim(),m.unshift(m[0][u]=m[0][u]||{})):m[0][h[1]]=h[2].replace(_u," ").trim();return m[0]})(t);Wt[l]=pr(a?{["@keyframes "+l]:c}:c,r?"":"."+l)}let o=r&&Wt.g?Wt.g:null;return r&&(Wt.g=Wt[l]),((c,d,h,u)=>{u?d.data=d.data.replace(u,c):d.data.indexOf(c)===-1&&(d.data=h?c+d.data:d.data+c)})(Wt[l],e,s,o),l},ly=(t,e,r)=>t.reduce((s,a,i)=>{let l=e[i];if(l&&l.call){let o=l(r),c=o&&o.props&&o.props.className||/^go/.test(o)&&o;l=c?"."+c:o&&typeof o=="object"?o.props?"":pr(o,""):o===!1?"":o}return s+a+(l??"")},"");function Bi(t){let e=this||{},r=t.call?t(e.p):t;return iy(r.unshift?r.raw?ly(r,[].slice.call(arguments,1),e.p):r.reduce((s,a)=>Object.assign(s,a&&a.call?a(e.p):a),{}):r,sy(e.target),e.g,e.o,e.k)}let Nf,Ro,Do;Bi.bind({g:1});let nr=Bi.bind({k:1});function oy(t,e,r,s){pr.p=e,Nf=t,Ro=r,Do=s}function Ur(t,e){let r=this||{};return function(){let s=arguments;function a(i,l){let o=Object.assign({},i),c=o.className||a.className;r.p=Object.assign({theme:Ro&&Ro()},o),r.o=/ *go\d+/.test(c),o.className=Bi.apply(r,s)+(c?" "+c:"");let d=t;return t[0]&&(d=o.as||t,delete o.as),Do&&d[0]&&Do(o),Nf(d,o)}return a}}var cy=t=>typeof t=="function",xi=(t,e)=>cy(t)?t(e):t,dy=(()=>{let t=0;return()=>(++t).toString()})(),_f=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),uy=20,Jc="default",kf=(t,e)=>{let{toastLimit:r}=t.settings;switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,r)};case 1:return{...t,toasts:t.toasts.map(l=>l.id===e.toast.id?{...l,...e.toast}:l)};case 2:let{toast:s}=e;return kf(t,{type:t.toasts.find(l=>l.id===s.id)?1:0,toast:s});case 3:let{toastId:a}=e;return{...t,toasts:t.toasts.map(l=>l.id===a||a===void 0?{...l,dismissed:!0,visible:!1}:l)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(l=>l.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(l=>({...l,pauseDuration:l.pauseDuration+i}))}}},qa=[],Sf={toasts:[],pausedAt:void 0,settings:{toastLimit:uy}},Mt={},Cf=(t,e=Jc)=>{Mt[e]=kf(Mt[e]||Sf,t),qa.forEach(([r,s])=>{r===e&&s(Mt[e])})},Ef=t=>Object.keys(Mt).forEach(e=>Cf(t,e)),hy=t=>Object.keys(Mt).find(e=>Mt[e].toasts.some(r=>r.id===t)),qi=(t=Jc)=>e=>{Cf(e,t)},my={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},fy=(t={},e=Jc)=>{let[r,s]=g.useState(Mt[e]||Sf),a=g.useRef(Mt[e]);g.useEffect(()=>(a.current!==Mt[e]&&s(Mt[e]),qa.push([e,s]),()=>{let l=qa.findIndex(([o])=>o===e);l>-1&&qa.splice(l,1)}),[e]);let i=r.toasts.map(l=>{var o,c,d;return{...t,...t[l.type],...l,removeDelay:l.removeDelay||((o=t[l.type])==null?void 0:o.removeDelay)||(t==null?void 0:t.removeDelay),duration:l.duration||((c=t[l.type])==null?void 0:c.duration)||(t==null?void 0:t.duration)||my[l.type],style:{...t.style,...(d=t[l.type])==null?void 0:d.style,...l.style}}});return{...r,toasts:i}},py=(t,e="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...r,id:(r==null?void 0:r.id)||dy()}),na=t=>(e,r)=>{let s=py(e,t,r);return qi(s.toasterId||hy(s.id))({type:2,toast:s}),s.id},Ae=(t,e)=>na("blank")(t,e);Ae.error=na("error");Ae.success=na("success");Ae.loading=na("loading");Ae.custom=na("custom");Ae.dismiss=(t,e)=>{let r={type:3,toastId:t};e?qi(e)(r):Ef(r)};Ae.dismissAll=t=>Ae.dismiss(void 0,t);Ae.remove=(t,e)=>{let r={type:4,toastId:t};e?qi(e)(r):Ef(r)};Ae.removeAll=t=>Ae.remove(void 0,t);Ae.promise=(t,e,r)=>{let s=Ae.loading(e.loading,{...r,...r==null?void 0:r.loading});return typeof t=="function"&&(t=t()),t.then(a=>{let i=e.success?xi(e.success,a):void 0;return i?Ae.success(i,{id:s,...r,...r==null?void 0:r.success}):Ae.dismiss(s),a}).catch(a=>{let i=e.error?xi(e.error,a):void 0;i?Ae.error(i,{id:s,...r,...r==null?void 0:r.error}):Ae.dismiss(s)}),t};var gy=1e3,xy=(t,e="default")=>{let{toasts:r,pausedAt:s}=fy(t,e),a=g.useRef(new Map).current,i=g.useCallback((u,m=gy)=>{if(a.has(u))return;let y=setTimeout(()=>{a.delete(u),l({type:4,toastId:u})},m);a.set(u,y)},[]);g.useEffect(()=>{if(s)return;let u=Date.now(),m=r.map(y=>{if(y.duration===1/0)return;let w=(y.duration||0)+y.pauseDuration-(u-y.createdAt);if(w<0){y.visible&&Ae.dismiss(y.id);return}return setTimeout(()=>Ae.dismiss(y.id,e),w)});return()=>{m.forEach(y=>y&&clearTimeout(y))}},[r,s,e]);let l=g.useCallback(qi(e),[e]),o=g.useCallback(()=>{l({type:5,time:Date.now()})},[l]),c=g.useCallback((u,m)=>{l({type:1,toast:{id:u,height:m}})},[l]),d=g.useCallback(()=>{s&&l({type:6,time:Date.now()})},[s,l]),h=g.useCallback((u,m)=>{let{reverseOrder:y=!1,gutter:w=8,defaultPosition:_}=m||{},N=r.filter(f=>(f.position||_)===(u.position||_)&&f.height),x=N.findIndex(f=>f.id===u.id),p=N.filter((f,b)=>b<x&&f.visible).length;return N.filter(f=>f.visible).slice(...y?[p+1]:[0,p]).reduce((f,b)=>f+(b.height||0)+w,0)},[r]);return g.useEffect(()=>{r.forEach(u=>{if(u.dismissed)i(u.id,u.removeDelay);else{let m=a.get(u.id);m&&(clearTimeout(m),a.delete(u.id))}})},[r,i]),{toasts:r,handlers:{updateHeight:c,startPause:o,endPause:d,calculateOffset:h}}},yy=nr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,vy=nr`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,wy=nr`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,by=Ur("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${yy} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${vy} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${wy} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,jy=nr`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Ny=Ur("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${jy} 1s linear infinite;
`,_y=nr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,ky=nr`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Sy=Ur("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${_y} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${ky} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Cy=Ur("div")`
  position: absolute;
`,Ey=Ur("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Ty=nr`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Py=Ur("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Ty} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Ay=({toast:t})=>{let{icon:e,type:r,iconTheme:s}=t;return e!==void 0?typeof e=="string"?g.createElement(Py,null,e):e:r==="blank"?null:g.createElement(Ey,null,g.createElement(Ny,{...s}),r!=="loading"&&g.createElement(Cy,null,r==="error"?g.createElement(by,{...s}):g.createElement(Sy,{...s})))},Ry=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Dy=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,Oy="0%{opacity:0;} 100%{opacity:1;}",Uy="0%{opacity:1;} 100%{opacity:0;}",$y=Ur("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Iy=Ur("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Ly=(t,e)=>{let r=t.includes("top")?1:-1,[s,a]=_f()?[Oy,Uy]:[Ry(r),Dy(r)];return{animation:e?`${nr(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${nr(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},My=g.memo(({toast:t,position:e,style:r,children:s})=>{let a=t.height?Ly(t.position||e||"top-center",t.visible):{opacity:0},i=g.createElement(Ay,{toast:t}),l=g.createElement(Iy,{...t.ariaProps},xi(t.message,t));return g.createElement($y,{className:t.className,style:{...a,...r,...t.style}},typeof s=="function"?s({icon:i,message:l}):g.createElement(g.Fragment,null,i,l))});oy(g.createElement);var Fy=({id:t,className:e,style:r,onHeightUpdate:s,children:a})=>{let i=g.useCallback(l=>{if(l){let o=()=>{let c=l.getBoundingClientRect().height;s(t,c)};o(),new MutationObserver(o).observe(l,{subtree:!0,childList:!0,characterData:!0})}},[t,s]);return g.createElement("div",{ref:i,className:e,style:r},a)},zy=(t,e)=>{let r=t.includes("top"),s=r?{top:0}:{bottom:0},a=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:_f()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(r?1:-1)}px)`,...s,...a}},By=Bi`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Sa=16,qy=({reverseOrder:t,position:e="top-center",toastOptions:r,gutter:s,children:a,toasterId:i,containerStyle:l,containerClassName:o})=>{let{toasts:c,handlers:d}=xy(r,i);return g.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:Sa,left:Sa,right:Sa,bottom:Sa,pointerEvents:"none",...l},className:o,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map(h=>{let u=h.position||e,m=d.calculateOffset(h,{reverseOrder:t,gutter:s,defaultPosition:e}),y=zy(u,m);return g.createElement(Fy,{id:h.id,key:h.id,onHeightUpdate:d.updateHeight,className:h.visible?By:"",style:y},h.type==="custom"?xi(h.message,h):a?a(h):g.createElement(My,{toast:h,position:u}))}))},Y=Ae;const Wy="modulepreload",Vy=function(t){return"/"+t},ku={},Ys=function(e,r,s){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=Vy(c),c in ku)return;ku[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const u=document.createElement("link");if(u.rel=d?"stylesheet":Wy,d||(u.as="script"),u.crossOrigin="",u.href=c,o&&u.setAttribute("nonce",o),document.head.appendChild(u),d)return new Promise((m,y)=>{u.addEventListener("load",m),u.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return a.then(l=>{for(const o of l||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})},Hy=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Ys(async()=>{const{default:s}=await Promise.resolve().then(()=>Xs);return{default:s}},void 0).then(({default:s})=>s(...r)):e=fetch,(...r)=>e(...r)};class Zc extends Error{constructor(e,r="FunctionsError",s){super(e),this.name=r,this.context=s}}class Ky extends Zc{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Su extends Zc{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Cu extends Zc{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Oo;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Oo||(Oo={}));var Gy=function(t,e,r,s){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(h){try{d(s.next(h))}catch(u){l(u)}}function c(h){try{d(s.throw(h))}catch(u){l(u)}}function d(h){h.done?i(h.value):a(h.value).then(o,c)}d((s=s.apply(t,e||[])).next())})};class Jy{constructor(e,{headers:r={},customFetch:s,region:a=Oo.Any}={}){this.url=e,this.headers=r,this.region=a,this.fetch=Hy(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var s;return Gy(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:l}=r;let o={},{region:c}=r;c||(c=this.region);const d=new URL(`${this.url}/${e}`);c&&c!=="any"&&(o["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let h;l&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",h=l):typeof l=="string"?(o["Content-Type"]="text/plain",h=l):typeof FormData<"u"&&l instanceof FormData?h=l:(o["Content-Type"]="application/json",h=JSON.stringify(l)));const u=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),a),body:h}).catch(_=>{throw new Ky(_)}),m=u.headers.get("x-relay-error");if(m&&m==="true")throw new Su(u);if(!u.ok)throw new Cu(u);let y=((s=u.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),w;return y==="application/json"?w=yield u.json():y==="application/octet-stream"?w=yield u.blob():y==="text/event-stream"?w=u:y==="multipart/form-data"?w=yield u.formData():w=yield u.text(),{data:w,error:null,response:u}}catch(a){return{data:null,error:a,response:a instanceof Cu||a instanceof Su?a.context:void 0}}})}}var nt={},Qc={},Wi={},aa={},Vi={},Hi={},Zy=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Fs=Zy();const Qy=Fs.fetch,Tf=Fs.fetch.bind(Fs),Pf=Fs.Headers,Yy=Fs.Request,Xy=Fs.Response,Xs=Object.freeze(Object.defineProperty({__proto__:null,Headers:Pf,Request:Yy,Response:Xy,default:Tf,fetch:Qy},Symbol.toStringTag,{value:"Module"})),ev=kp(Xs);var Ki={};Object.defineProperty(Ki,"__esModule",{value:!0});let tv=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Ki.default=tv;var Af=jt&&jt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Hi,"__esModule",{value:!0});const rv=Af(ev),sv=Af(Ki);let nv=class{constructor(e){var r,s;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(r=e.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=e.signal,this.isMaybeSingle=(s=e.isMaybeSingle)!==null&&s!==void 0?s:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=rv.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=new Headers(this.headers),this.headers.set(e,r),this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let a=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var l,o,c,d;let h=null,u=null,m=null,y=i.status,w=i.statusText;if(i.ok){if(this.method!=="HEAD"){const p=await i.text();p===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((l=this.headers.get("Accept"))===null||l===void 0)&&l.includes("application/vnd.pgrst.plan+text"))?u=p:u=JSON.parse(p))}const N=(o=this.headers.get("Prefer"))===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),x=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");N&&x&&x.length>1&&(m=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(h={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,m=null,y=406,w="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const N=await i.text();try{h=JSON.parse(N),Array.isArray(h)&&i.status===404&&(u=[],h=null,y=200,w="OK")}catch{i.status===404&&N===""?(y=204,w="No Content"):h={message:N}}if(h&&this.isMaybeSingle&&(!((d=h==null?void 0:h.details)===null||d===void 0)&&d.includes("0 rows"))&&(h=null,y=200,w="OK"),h&&this.shouldThrowOnError)throw new sv.default(h)}return{error:h,data:u,count:m,status:y,statusText:w}});return this.shouldThrowOnError||(a=a.catch(i=>{var l,o,c;return{error:{message:`${(l=i==null?void 0:i.name)!==null&&l!==void 0?l:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(o=i==null?void 0:i.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(e,r)}returns(){return this}overrideTypes(){return this}};Hi.default=nv;var av=jt&&jt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Vi,"__esModule",{value:!0});const iv=av(Hi);let lv=class extends iv.default{select(e){let r=!1;const s=(e??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:r=!0,nullsFirst:s,foreignTable:a,referencedTable:i=a}={}){const l=i?`${i}.order`:"order",o=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${o?`${o},`:""}${e}.${r?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:s=r}={}){const a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${e}`),this}range(e,r,{foreignTable:s,referencedTable:a=s}={}){const i=typeof a>"u"?"offset":`${a}.offset`,l=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(l,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:r=!1,settings:s=!1,buffers:a=!1,wal:i=!1,format:l="text"}={}){var o;const c=[e?"analyze":null,r?"verbose":null,s?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${d}"; options=${c};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Vi.default=lv;var ov=jt&&jt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(aa,"__esModule",{value:!0});const cv=ov(Vi);let dv=class extends cv.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const s=Array.from(new Set(r)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:s,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const l=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${i}fts${l}.${r}`),this}match(e){return Object.entries(e).forEach(([r,s])=>{this.url.searchParams.append(r,`eq.${s}`)}),this}not(e,r,s){return this.url.searchParams.append(e,`not.${r}.${s}`),this}or(e,{foreignTable:r,referencedTable:s=r}={}){const a=s?`${s}.or`:"or";return this.url.searchParams.append(a,`(${e})`),this}filter(e,r,s){return this.url.searchParams.append(e,`${r}.${s}`),this}};aa.default=dv;var uv=jt&&jt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Wi,"__esModule",{value:!0});const un=uv(aa);let hv=class{constructor(e,{headers:r={},schema:s,fetch:a}){this.url=e,this.headers=new Headers(r),this.schema=s,this.fetch=a}select(e,{head:r=!1,count:s}={}){const a=r?"HEAD":"GET";let i=!1;const l=(e??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",l),s&&this.headers.append("Prefer",`count=${s}`),new un.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:r,defaultToNull:s=!0}={}){var a;const i="POST";if(r&&this.headers.append("Prefer",`count=${r}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((o,c)=>o.concat(Object.keys(c)),[]);if(l.length>0){const o=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",o.join(","))}}return new un.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(e,{onConflict:r,ignoreDuplicates:s=!1,count:a,defaultToNull:i=!0}={}){var l;const o="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),a&&this.headers.append("Prefer",`count=${a}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(c.length>0){const d=[...new Set(c)].map(h=>`"${h}"`);this.url.searchParams.set("columns",d.join(","))}}return new un.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}update(e,{count:r}={}){var s;const a="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new un.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:e}={}){var r;const s="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new un.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};Wi.default=hv;var Rf=jt&&jt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Qc,"__esModule",{value:!0});const mv=Rf(Wi),fv=Rf(aa);let pv=class Df{constructor(e,{headers:r={},schema:s,fetch:a}={}){this.url=e,this.headers=new Headers(r),this.schemaName=s,this.fetch=a}from(e){const r=new URL(`${this.url}/${e}`);return new mv.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Df(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:s=!1,get:a=!1,count:i}={}){var l;let o;const c=new URL(`${this.url}/rpc/${e}`);let d;s||a?(o=s?"HEAD":"GET",Object.entries(r).filter(([u,m])=>m!==void 0).map(([u,m])=>[u,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([u,m])=>{c.searchParams.append(u,m)})):(o="POST",d=r);const h=new Headers(this.headers);return i&&h.set("Prefer",`count=${i}`),new fv.default({method:o,url:c,headers:h,schema:this.schemaName,body:d,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};Qc.default=pv;var en=jt&&jt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(nt,"__esModule",{value:!0});nt.PostgrestError=nt.PostgrestBuilder=nt.PostgrestTransformBuilder=nt.PostgrestFilterBuilder=nt.PostgrestQueryBuilder=nt.PostgrestClient=void 0;const Of=en(Qc);nt.PostgrestClient=Of.default;const Uf=en(Wi);nt.PostgrestQueryBuilder=Uf.default;const $f=en(aa);nt.PostgrestFilterBuilder=$f.default;const If=en(Vi);nt.PostgrestTransformBuilder=If.default;const Lf=en(Hi);nt.PostgrestBuilder=Lf.default;const Mf=en(Ki);nt.PostgrestError=Mf.default;var gv=nt.default={PostgrestClient:Of.default,PostgrestQueryBuilder:Uf.default,PostgrestFilterBuilder:$f.default,PostgrestTransformBuilder:If.default,PostgrestBuilder:Lf.default,PostgrestError:Mf.default};const{PostgrestClient:xv,PostgrestQueryBuilder:Z1,PostgrestFilterBuilder:Q1,PostgrestTransformBuilder:Y1,PostgrestBuilder:X1,PostgrestError:eb}=gv;class yv{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const r=parseInt(process.versions.node.split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const s=this.getWebSocketConstructor();return new s(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const vv="2.15.1",wv=`realtime-js/${vv}`,bv="1.0.0",Uo=1e4,jv=1e3,Nv=100;var Cn;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Cn||(Cn={}));var Ee;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ee||(Ee={}));var Tt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Tt||(Tt={}));var $o;(function(t){t.websocket="websocket"})($o||($o={}));var qr;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(qr||(qr={}));class _v{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,r,s)}_decodeBroadcast(e,r,s){const a=r.getUint8(1),i=r.getUint8(2);let l=this.HEADER_LENGTH+2;const o=s.decode(e.slice(l,l+a));l=l+a;const c=s.decode(e.slice(l,l+i));l=l+i;const d=JSON.parse(s.decode(e.slice(l,e.byteLength)));return{ref:null,topic:o,event:c,payload:d}}}class Ff{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var de;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(de||(de={}));const Eu=(t,e,r={})=>{var s;const a=(s=r.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((i,l)=>(i[l]=kv(l,t,e,a),i),{})},kv=(t,e,r,s)=>{const a=e.find(o=>o.name===t),i=a==null?void 0:a.type,l=r[t];return i&&!s.includes(i)?zf(i,l):Io(l)},zf=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return Tv(e,r)}switch(t){case de.bool:return Sv(e);case de.float4:case de.float8:case de.int2:case de.int4:case de.int8:case de.numeric:case de.oid:return Cv(e);case de.json:case de.jsonb:return Ev(e);case de.timestamp:return Pv(e);case de.abstime:case de.date:case de.daterange:case de.int4range:case de.int8range:case de.money:case de.reltime:case de.text:case de.time:case de.timestamptz:case de.timetz:case de.tsrange:case de.tstzrange:return Io(e);default:return Io(e)}},Io=t=>t,Sv=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Cv=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Ev=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Tv=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,s=t[r];if(t[0]==="{"&&s==="}"){let i;const l=t.slice(1,r);try{i=JSON.parse("["+l+"]")}catch{i=l?l.split(","):[]}return i.map(o=>zf(e,o))}return t},Pv=t=>typeof t=="string"?t.replace(" ","T"):t,Bf=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Sl{constructor(e,r,s={},a=Uo){this.channel=e,this.event=r,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var s;return this._hasReceived(e)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Tu;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Tu||(Tu={}));class En{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:i,onLeave:l,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=En.syncState(this.state,a,i,l),this.pendingDiffs.forEach(c=>{this.state=En.syncDiff(this.state,c,i,l)}),this.pendingDiffs=[],o()}),this.channel._on(s.diff,{},a=>{const{onJoin:i,onLeave:l,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=En.syncDiff(this.state,a,i,l),o())}),this.onJoin((a,i,l)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:l})}),this.onLeave((a,i,l)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,s,a){const i=this.cloneDeep(e),l=this.transformState(r),o={},c={};return this.map(i,(d,h)=>{l[d]||(c[d]=h)}),this.map(l,(d,h)=>{const u=i[d];if(u){const m=h.map(N=>N.presence_ref),y=u.map(N=>N.presence_ref),w=h.filter(N=>y.indexOf(N.presence_ref)<0),_=u.filter(N=>m.indexOf(N.presence_ref)<0);w.length>0&&(o[d]=w),_.length>0&&(c[d]=_)}else o[d]=h}),this.syncDiff(i,{joins:o,leaves:c},s,a)}static syncDiff(e,r,s,a){const{joins:i,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(i,(o,c)=>{var d;const h=(d=e[o])!==null&&d!==void 0?d:[];if(e[o]=this.cloneDeep(c),h.length>0){const u=e[o].map(y=>y.presence_ref),m=h.filter(y=>u.indexOf(y.presence_ref)<0);e[o].unshift(...m)}s(o,h,c)}),this.map(l,(o,c)=>{let d=e[o];if(!d)return;const h=c.map(u=>u.presence_ref);d=d.filter(u=>h.indexOf(u.presence_ref)<0),e[o]=d,a(o,d,c),d.length===0&&delete e[o]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(s=>r(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,s)=>{const a=e[s];return"metas"in a?r[s]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[s]=a,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Pu;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Pu||(Pu={}));var Tn;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Tn||(Tn={}));var Kt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Kt||(Kt={}));class Yc{constructor(e,r={config:{}},s){this.topic=e,this.params=r,this.socket=s,this.bindings={},this.state=Ee.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Sl(this,Tt.join,this.params,this.timeout),this.rejoinTimer=new Ff(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ee.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ee.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Ee.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ee.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Ee.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Tt.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new En(this),this.broadcastEndpointURL=Bf(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Ee.closed){const{config:{broadcast:i,presence:l,private:o}}=this.params,c=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(m=>m.filter))!==null&&a!==void 0?a:[],d=!!this.bindings[Tn.PRESENCE]&&this.bindings[Tn.PRESENCE].length>0,h={},u={broadcast:i,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:c,private:o};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(m=>e==null?void 0:e(Kt.CHANNEL_ERROR,m)),this._onClose(()=>e==null?void 0:e(Kt.CLOSED)),this.updateJoinPayload(Object.assign({config:u},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var y;if(this.socket.setAuth(),m===void 0){e==null||e(Kt.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,_=(y=w==null?void 0:w.length)!==null&&y!==void 0?y:0,N=[];for(let x=0;x<_;x++){const p=w[x],{filter:{event:f,schema:b,table:v,filter:C}}=p,P=m&&m[x];if(P&&P.event===f&&P.schema===b&&P.table===v&&P.filter===C)N.push(Object.assign(Object.assign({},p),{id:P.id}));else{this.unsubscribe(),this.state=Ee.errored,e==null||e(Kt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=N,e&&e(Kt.SUBSCRIBED);return}}).receive("error",m=>{this.state=Ee.errored,e==null||e(Kt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Kt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,s){return this.state===Ee.joined&&e===Tn.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,s)}async send(e,r={}){var s,a;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:l}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:l,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var l,o,c;const d=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(o=(l=this.params)===null||l===void 0?void 0:l.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ee.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Tt.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new Sl(this,Tt.leave,{},e),s.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ee.closed,this.bindings={}}async _fetchWithTimeout(e,r,s){const a=new AbortController,i=setTimeout(()=>a.abort(),s),l=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),l}_push(e,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Sl(this,e,r,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Nv){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,s){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,s){var a,i;const l=e.toLocaleLowerCase(),{close:o,error:c,leave:d,join:h}=Tt;if(s&&[o,c,d,h].indexOf(l)>=0&&s!==this._joinRef())return;let m=this._onMessage(l,r,s);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(y=>{var w,_,N;return((w=y.filter)===null||w===void 0?void 0:w.event)==="*"||((N=(_=y.filter)===null||_===void 0?void 0:_.event)===null||N===void 0?void 0:N.toLocaleLowerCase())===l}).map(y=>y.callback(m,s)):(i=this.bindings[l])===null||i===void 0||i.filter(y=>{var w,_,N,x,p,f;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in y){const b=y.id,v=(w=y.filter)===null||w===void 0?void 0:w.event;return b&&((_=r.ids)===null||_===void 0?void 0:_.includes(b))&&(v==="*"||(v==null?void 0:v.toLocaleLowerCase())===((N=r.data)===null||N===void 0?void 0:N.type.toLocaleLowerCase()))}else{const b=(p=(x=y==null?void 0:y.filter)===null||x===void 0?void 0:x.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return b==="*"||b===((f=r==null?void 0:r.event)===null||f===void 0?void 0:f.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===l}).map(y=>{if(typeof m=="object"&&"ids"in m){const w=m.data,{schema:_,table:N,commit_timestamp:x,type:p,errors:f}=w;m=Object.assign(Object.assign({},{schema:_,table:N,commit_timestamp:x,eventType:p,new:{},old:{},errors:f}),this._getPayloadRecords(w))}y.callback(m,s)})}_isClosed(){return this.state===Ee.closed}_isJoined(){return this.state===Ee.joined}_isJoining(){return this.state===Ee.joining}_isLeaving(){return this.state===Ee.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,s){const a=e.toLocaleLowerCase(),i={type:a,filter:r,callback:s};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(e,r){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&Yc.isEqual(a.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const s in e)if(e[s]!==r[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Tt.close,{},e)}_onError(e){this._on(Tt.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ee.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Eu(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Eu(e.columns,e.old_record)),r}}const Au=()=>{},Ca={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Av=[1e3,2e3,5e3,1e4],Rv=1e4,Dv=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Ov{constructor(e,r){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Uo,this.transport=null,this.heartbeatIntervalMs=Ca.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Au,this.ref=0,this.reconnectTimer=null,this.logger=Au,this.conn=null,this.sendBuffer=[],this.serializer=new _v,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let i;return a?i=a:typeof fetch>"u"?i=(...l)=>Ys(async()=>{const{default:o}=await Promise.resolve().then(()=>Xs);return{default:o}},void 0).then(({default:o})=>o(...l)).catch(o=>{throw new Error(`Failed to load @supabase/node-fetch: ${o.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...l)=>i(...l)},!(!((s=r==null?void 0:r.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${$o.websocket}`,this.httpEndpoint=Bf(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=yv.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:bv}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,s){this.logger(e,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Cn.connecting:return qr.Connecting;case Cn.open:return qr.Open;case Cn.closing:return qr.Closing;default:return qr.Closed}}isConnected(){return this.connectionState()===qr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const s=`realtime:${e}`,a=this.getChannels().find(i=>i.topic===s);if(a)return a;{const i=new Yc(`realtime:${e}`,r,this);return this.channels.push(i),i}}push(e){const{topic:r,event:s,payload:a,ref:i}=e,l=()=>{this.encode(e,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${r} ${s} (${i})`,a),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(jv,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Ca.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{r.topic==="phoenix"&&r.event==="phx_reply"&&this.heartbeatCallback(r.payload.status==="ok"?"ok":"error"),r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:a,payload:i,ref:l}=r,o=l?`(${l})`:"",c=i.status||"";this.log("receive",`${c} ${s} ${a} ${o}`.trim(),i),this.channels.filter(d=>d._isMember(s)).forEach(d=>d._trigger(a,i,l)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Tt.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const s=e.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${e}${s}${a}`}_workerObjectUrl(e){let r;if(e)r=e;else{const s=new Blob([Dv],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const a={access_token:r,version:wv};r&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(Tt.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(r)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new Ff(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ca.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,s,a,i,l,o,c,d;if(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:Uo,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:Ca.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(l=e==null?void 0:e.accessToken)!==null&&l!==void 0?l:null,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(o=e==null?void 0:e.reconnectAfterMs)!==null&&o!==void 0?o:h=>Av[h-1]||Rv,this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(h,u)=>u(JSON.stringify(h)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Xc extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Te(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Uv extends Xc{constructor(e,r,s){super(e),this.name="StorageApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Lo extends Xc{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var $v=function(t,e,r,s){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(h){try{d(s.next(h))}catch(u){l(u)}}function c(h){try{d(s.throw(h))}catch(u){l(u)}}function d(h){h.done?i(h.value):a(h.value).then(o,c)}d((s=s.apply(t,e||[])).next())})};const qf=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Ys(async()=>{const{default:s}=await Promise.resolve().then(()=>Xs);return{default:s}},void 0).then(({default:s})=>s(...r)):e=fetch,(...r)=>e(...r)},Iv=()=>$v(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ys(()=>Promise.resolve().then(()=>Xs),void 0)).Response:Response}),Mo=t=>{if(Array.isArray(t))return t.map(r=>Mo(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,s])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[a]=Mo(s)}),e},Lv=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var ss=function(t,e,r,s){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(h){try{d(s.next(h))}catch(u){l(u)}}function c(h){try{d(s.throw(h))}catch(u){l(u)}}function d(h){h.done?i(h.value):a(h.value).then(o,c)}d((s=s.apply(t,e||[])).next())})};const Cl=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Mv=(t,e,r)=>ss(void 0,void 0,void 0,function*(){const s=yield Iv();t instanceof s&&!(r!=null&&r.noResolveJson)?t.json().then(a=>{const i=t.status||500,l=(a==null?void 0:a.statusCode)||i+"";e(new Uv(Cl(a),i,l))}).catch(a=>{e(new Lo(Cl(a),a))}):e(new Lo(Cl(t),t))}),Fv=(t,e,r,s)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!s?a:(Lv(s)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(s)):a.body=s,e!=null&&e.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),r))};function ia(t,e,r,s,a,i){return ss(this,void 0,void 0,function*(){return new Promise((l,o)=>{t(r,Fv(e,s,a,i)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>l(c)).catch(c=>Mv(c,o,s))})})}function yi(t,e,r,s){return ss(this,void 0,void 0,function*(){return ia(t,"GET",e,r,s)})}function It(t,e,r,s,a){return ss(this,void 0,void 0,function*(){return ia(t,"POST",e,s,a,r)})}function Fo(t,e,r,s,a){return ss(this,void 0,void 0,function*(){return ia(t,"PUT",e,s,a,r)})}function zv(t,e,r,s){return ss(this,void 0,void 0,function*(){return ia(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function Wf(t,e,r,s,a){return ss(this,void 0,void 0,function*(){return ia(t,"DELETE",e,s,a,r)})}var Ge=function(t,e,r,s){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(h){try{d(s.next(h))}catch(u){l(u)}}function c(h){try{d(s.throw(h))}catch(u){l(u)}}function d(h){h.done?i(h.value):a(h.value).then(o,c)}d((s=s.apply(t,e||[])).next())})};const Bv={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ru={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class qv{constructor(e,r={},s,a){this.url=e,this.headers=r,this.bucketId=s,this.fetch=qf(a)}uploadOrUpdate(e,r,s,a){return Ge(this,void 0,void 0,function*(){try{let i;const l=Object.assign(Object.assign({},Ru),a);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const c=l.metadata;typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",l.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.append("cacheControl",l.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=s,o["cache-control"]=`max-age=${l.cacheControl}`,o["content-type"]=l.contentType,c&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(o=Object.assign(Object.assign({},o),a.headers));const d=this._removeEmptyFolders(r),h=this._getFinalPath(d),u=yield(e=="PUT"?Fo:It)(this.fetch,`${this.url}/object/${h}`,i,Object.assign({headers:o},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:d,id:u.Id,fullPath:u.Key},error:null}}catch(i){if(Te(i))return{data:null,error:i};throw i}})}upload(e,r,s){return Ge(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,s)})}uploadToSignedUrl(e,r,s,a){return Ge(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),l=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${l}`);o.searchParams.set("token",r);try{let c;const d=Object.assign({upsert:Ru.upsert},a),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",d.cacheControl)):(c=s,h["cache-control"]=`max-age=${d.cacheControl}`,h["content-type"]=d.contentType);const u=yield Fo(this.fetch,o.toString(),c,{headers:h});return{data:{path:i,fullPath:u.Key},error:null}}catch(c){if(Te(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return Ge(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const i=yield It(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),l=new URL(this.url+i.url),o=l.searchParams.get("token");if(!o)throw new Xc("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:o},error:null}}catch(s){if(Te(s))return{data:null,error:s};throw s}})}update(e,r,s){return Ge(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,s)})}move(e,r,s){return Ge(this,void 0,void 0,function*(){try{return{data:yield It(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(Te(a))return{data:null,error:a};throw a}})}copy(e,r,s){return Ge(this,void 0,void 0,function*(){try{return{data:{path:(yield It(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(Te(a))return{data:null,error:a};throw a}})}createSignedUrl(e,r,s){return Ge(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),i=yield It(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const l=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${l}`)},{data:i,error:null}}catch(a){if(Te(a))return{data:null,error:a};throw a}})}createSignedUrls(e,r,s){return Ge(this,void 0,void 0,function*(){try{const a=yield It(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${i}`):null})),error:null}}catch(a){if(Te(a))return{data:null,error:a};throw a}})}download(e,r){return Ge(this,void 0,void 0,function*(){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),l=i?`?${i}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield yi(this.fetch,`${this.url}/${a}/${o}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(Te(o))return{data:null,error:o};throw o}})}info(e){return Ge(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const s=yield yi(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Mo(s),error:null}}catch(s){if(Te(s))return{data:null,error:s};throw s}})}exists(e){return Ge(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield zv(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(Te(s)&&s instanceof Lo){const a=s.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,r){const s=this._getFinalPath(e),a=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&a.push(i);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&a.push(c);let d=a.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${s}${d}`)}}}remove(e){return Ge(this,void 0,void 0,function*(){try{return{data:yield Wf(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(Te(r))return{data:null,error:r};throw r}})}list(e,r,s){return Ge(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},Bv),r),{prefix:e||""});return{data:yield It(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(Te(a))return{data:null,error:a};throw a}})}listV2(e,r){return Ge(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield It(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Te(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const Wv="2.11.0",Vv={"X-Client-Info":`storage-js/${Wv}`};var is=function(t,e,r,s){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(h){try{d(s.next(h))}catch(u){l(u)}}function c(h){try{d(s.throw(h))}catch(u){l(u)}}function d(h){h.done?i(h.value):a(h.value).then(o,c)}d((s=s.apply(t,e||[])).next())})};class Hv{constructor(e,r={},s,a){const i=new URL(e);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},Vv),r),this.fetch=qf(s)}listBuckets(){return is(this,void 0,void 0,function*(){try{return{data:yield yi(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Te(e))return{data:null,error:e};throw e}})}getBucket(e){return is(this,void 0,void 0,function*(){try{return{data:yield yi(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(Te(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return is(this,void 0,void 0,function*(){try{return{data:yield It(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Te(s))return{data:null,error:s};throw s}})}updateBucket(e,r){return is(this,void 0,void 0,function*(){try{return{data:yield Fo(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Te(s))return{data:null,error:s};throw s}})}emptyBucket(e){return is(this,void 0,void 0,function*(){try{return{data:yield It(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Te(r))return{data:null,error:r};throw r}})}deleteBucket(e){return is(this,void 0,void 0,function*(){try{return{data:yield Wf(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(Te(r))return{data:null,error:r};throw r}})}}class Kv extends Hv{constructor(e,r={},s,a){super(e,r,s,a)}from(e){return new qv(this.url,this.headers,e,this.fetch)}}const Gv="2.56.0";let gn="";typeof Deno<"u"?gn="deno":typeof document<"u"?gn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?gn="react-native":gn="node";const Jv={"X-Client-Info":`supabase-js-${gn}/${Gv}`},Zv={headers:Jv},Qv={schema:"public"},Yv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Xv={};var ew=function(t,e,r,s){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(h){try{d(s.next(h))}catch(u){l(u)}}function c(h){try{d(s.throw(h))}catch(u){l(u)}}function d(h){h.done?i(h.value):a(h.value).then(o,c)}d((s=s.apply(t,e||[])).next())})};const tw=t=>{let e;return t?e=t:typeof fetch>"u"?e=Tf:e=fetch,(...r)=>e(...r)},rw=()=>typeof Headers>"u"?Pf:Headers,sw=(t,e,r)=>{const s=tw(r),a=rw();return(i,l)=>ew(void 0,void 0,void 0,function*(){var o;const c=(o=yield e())!==null&&o!==void 0?o:t;let d=new a(l==null?void 0:l.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),s(i,Object.assign(Object.assign({},l),{headers:d}))})};var nw=function(t,e,r,s){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(h){try{d(s.next(h))}catch(u){l(u)}}function c(h){try{d(s.throw(h))}catch(u){l(u)}}function d(h){h.done?i(h.value):a(h.value).then(o,c)}d((s=s.apply(t,e||[])).next())})};function aw(t){return t.endsWith("/")?t:t+"/"}function iw(t,e){var r,s;const{db:a,auth:i,realtime:l,global:o}=t,{db:c,auth:d,realtime:h,global:u}=e,m={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},h),l),storage:{},global:Object.assign(Object.assign(Object.assign({},u),o),{headers:Object.assign(Object.assign({},(r=u==null?void 0:u.headers)!==null&&r!==void 0?r:{}),(s=o==null?void 0:o.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>nw(this,void 0,void 0,function*(){return""})};return t.accessToken?m.accessToken=t.accessToken:delete m.accessToken,m}const Vf="2.71.1",us=30*1e3,zo=3,El=zo*us,lw="http://localhost:9999",ow="supabase.auth.token",cw={"X-Client-Info":`gotrue-js/${Vf}`},Bo="X-Supabase-Api-Version",Hf={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},dw=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,uw=10*60*1e3;class ed extends Error{constructor(e,r,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function Q(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class hw extends ed{constructor(e,r,s){super(e,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function mw(t){return Q(t)&&t.name==="AuthApiError"}class Kf extends ed{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class $r extends ed{constructor(e,r,s,a){super(e,s,a),this.name=r,this.status=s}}class dr extends $r{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function fw(t){return Q(t)&&t.name==="AuthSessionMissingError"}class Ea extends $r{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ta extends $r{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Pa extends $r{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function pw(t){return Q(t)&&t.name==="AuthImplicitGrantRedirectError"}class Du extends $r{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class qo extends $r{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Tl(t){return Q(t)&&t.name==="AuthRetryableFetchError"}class Ou extends $r{constructor(e,r,s){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class Wo extends $r{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const vi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Uu=` 	
\r=`.split(""),gw=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Uu.length;e+=1)t[Uu[e].charCodeAt(0)]=-2;for(let e=0;e<vi.length;e+=1)t[vi[e].charCodeAt(0)]=e;return t})();function $u(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;r(vi[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;r(vi[s]),e.queuedBits-=6}}function Gf(t,e,r){const s=gw[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Iu(t){const e=[],r=l=>{e.push(String.fromCodePoint(l))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=l=>{vw(l,s,r)};for(let l=0;l<t.length;l+=1)Gf(t.charCodeAt(l),a,i);return e.join("")}function xw(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function yw(t,e){for(let r=0;r<t.length;r+=1){let s=t.charCodeAt(r);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(t.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}xw(s,e)}}function vw(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let s=1;s<6;s+=1)if(!(t>>7-s&1)){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function ww(t){const e=[],r={queue:0,queuedBits:0},s=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)Gf(t.charCodeAt(a),r,s);return new Uint8Array(e)}function bw(t){const e=[];return yw(t,r=>e.push(r)),new Uint8Array(e)}function jw(t){const e=[],r={queue:0,queuedBits:0},s=a=>{e.push(a)};return t.forEach(a=>$u(a,r,s)),$u(null,r,s),e.join("")}function Nw(t){return Math.round(Date.now()/1e3)+t}function _w(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const St=()=>typeof window<"u"&&typeof document<"u",Lr={tested:!1,writable:!1},Jf=()=>{if(!St())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Lr.tested)return Lr.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Lr.tested=!0,Lr.writable=!0}catch{Lr.tested=!0,Lr.writable=!1}return Lr.writable};function kw(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{e[i]=a})}catch{}return r.searchParams.forEach((s,a)=>{e[a]=s}),e}const Zf=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Ys(async()=>{const{default:s}=await Promise.resolve().then(()=>Xs);return{default:s}},void 0).then(({default:s})=>s(...r)):e=fetch,(...r)=>e(...r)},Sw=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",hs=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Mr=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},cr=async(t,e)=>{await t.removeItem(e)};class Gi{constructor(){this.promise=new Gi.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Gi.promiseConstructor=Promise;function Pl(t){const e=t.split(".");if(e.length!==3)throw new Wo("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!dw.test(e[s]))throw new Wo("JWT not in base64url format");return{header:JSON.parse(Iu(e[0])),payload:JSON.parse(Iu(e[1])),signature:ww(e[2]),raw:{header:e[0],payload:e[1]}}}async function Cw(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Ew(t,e){return new Promise((s,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const l=await t(i);if(!e(i,null,l)){s(l);return}}catch(l){if(!e(i,l)){a(l);return}}})()})}function Tw(t){return("0"+t.toString(16)).substr(-2)}function Pw(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(e),Array.from(e,Tw).join("")}async function Aw(t){const r=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(s);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function Rw(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await Aw(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ls(t,e,r=!1){const s=Pw();let a=s;r&&(a+="/PASSWORD_RECOVERY"),await hs(t,`${e}-code-verifier`,a);const i=await Rw(s);return[i,s===i?"plain":"s256"]}const Dw=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Ow(t){const e=t.headers.get(Bo);if(!e||!e.match(Dw))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Uw(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function $w(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Iw=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function os(t){if(!Iw.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Al(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Lu(t){return JSON.parse(JSON.stringify(t))}var Lw=function(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(r[s[a]]=t[s[a]]);return r};const Br=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Mw=[502,503,504];async function Mu(t){var e;if(!Sw(t))throw new qo(Br(t),0);if(Mw.includes(t.status))throw new qo(Br(t),t.status);let r;try{r=await t.json()}catch(i){throw new Kf(Br(i),i)}let s;const a=Ow(t);if(a&&a.getTime()>=Hf["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new Ou(Br(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new dr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0))throw new Ou(Br(r),t.status,r.weak_password.reasons);throw new hw(Br(r),t.status||500,s)}const Fw=(t,e,r,s)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),r))};async function ee(t,e,r,s){var a;const i=Object.assign({},s==null?void 0:s.headers);i[Bo]||(i[Bo]=Hf["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const l=(a=s==null?void 0:s.query)!==null&&a!==void 0?a:{};s!=null&&s.redirectTo&&(l.redirect_to=s.redirectTo);const o=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",c=await zw(t,e,r+o,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function zw(t,e,r,s,a,i){const l=Fw(e,s,a,i);let o;try{o=await t(r,Object.assign({},l))}catch(c){throw console.error(c),new qo(Br(c),0)}if(o.ok||await Mu(o),s!=null&&s.noResolveJson)return o;try{return await o.json()}catch(c){await Mu(c)}}function Vt(t){var e;let r=null;Vw(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=Nw(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:s},error:null}}function Fu(t){const e=Vt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function gr(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Bw(t){return{data:t,error:null}}function qw(t){const{action_link:e,email_otp:r,hashed_token:s,redirect_to:a,verification_type:i}=t,l=Lw(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:r,hashed_token:s,redirect_to:a,verification_type:i},c=Object.assign({},l);return{data:{properties:o,user:c},error:null}}function Ww(t){return t}function Vw(t){return t.access_token&&t.refresh_token&&t.expires_in}const Rl=["global","local","others"];var Hw=function(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(r[s[a]]=t[s[a]]);return r};class Kw{constructor({url:e="",headers:r={},fetch:s}){this.url=e,this.headers=r,this.fetch=Zf(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r=Rl[0]){if(Rl.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Rl.join(", ")}`);try{return await ee(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Q(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,r={}){try{return await ee(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:gr})}catch(s){if(Q(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:r}=e,s=Hw(e,["options"]),a=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(a.new_email=s==null?void 0:s.newEmail,delete a.newEmail),await ee(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:qw,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Q(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await ee(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:gr})}catch(r){if(Q(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,s,a,i,l,o,c;try{const d={nextPage:null,lastPage:0,total:0},h=await ee(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(i=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:Ww});if(h.error)throw h.error;const u=await h.json(),m=(l=h.headers.get("x-total-count"))!==null&&l!==void 0?l:0,y=(c=(o=h.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return y.length>0&&(y.forEach(w=>{const _=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(w.split(";")[1].split("=")[1]);d[`${N}Page`]=_}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},u),d),error:null}}catch(d){if(Q(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){os(e);try{return await ee(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:gr})}catch(r){if(Q(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){os(e);try{return await ee(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:gr})}catch(s){if(Q(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,r=!1){os(e);try{return await ee(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:gr})}catch(s){if(Q(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){os(e.userId);try{const{data:r,error:s}=await ee(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:s}}catch(r){if(Q(r))return{data:null,error:r};throw r}}async _deleteFactor(e){os(e.userId),os(e.id);try{return{data:await ee(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(Q(r))return{data:null,error:r};throw r}}}function zu(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function Gw(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const cs={debug:!!(globalThis&&Jf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Qf extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Jw extends Qf{}async function Zw(t,e,r){cs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),cs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){cs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await r()}finally{cs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw cs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Jw(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(cs.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}Gw();const Qw={url:lw,storageKey:ow,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:cw,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Bu(t,e,r){return await r()}const ds={};class Qn{constructor(e){var r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Qn.nextInstanceID,Qn.nextInstanceID+=1,this.instanceID>0&&St()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},Qw),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new Kw({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=Zf(a.fetch),this.lock=a.lock||Bu,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:St()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Zw:this.lock=Bu,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:Jf()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=zu(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=zu(this.memoryStorage)),St()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,r;return(r=(e=ds[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){ds[this.storageKey]=Object.assign(Object.assign({},ds[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=ds[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ds[this.storageKey]=Object.assign(Object.assign({},ds[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Vf}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=kw(window.location.href);let s="none";if(this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce"),St()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),pw(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:l,redirectType:o}=a;return this._debug("#_initialize()","detected session in URL",l,"redirect type",o),await this._saveSession(l),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Q(r)?{error:r}:{error:new Kf("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,s,a;try{const i=await ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:Vt}),{data:l,error:o}=i;if(o||!l)return{data:{user:null,session:null},error:o};const c=l.session,d=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(Q(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var r,s,a;try{let i;if("email"in e){const{email:h,password:u,options:m}=e;let y=null,w=null;this.flowType==="pkce"&&([y,w]=await ls(this.storage,this.storageKey)),i=await ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:h,password:u,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:y,code_challenge_method:w},xform:Vt})}else if("phone"in e){const{phone:h,password:u,options:m}=e;i=await ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:u,data:(s=m==null?void 0:m.data)!==null&&s!==void 0?s:{},channel:(a=m==null?void 0:m.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Vt})}else throw new Ta("You must provide either an email or phone number and a password");const{data:l,error:o}=i;if(o||!l)return{data:{user:null,session:null},error:o};const c=l.session,d=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(Q(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let r;if("email"in e){const{email:i,password:l,options:o}=e;r=await ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Fu})}else if("phone"in e){const{phone:i,password:l,options:o}=e;r=await ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Fu})}else throw new Ta("You must provide either an email or phone number and a password");const{data:s,error:a}=r;return a?{data:{user:null,session:null},error:a}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Ea}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(r){if(Q(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,s,a,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;if(r==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(e){var r,s,a,i,l,o,c,d,h,u,m,y;let w,_;if("message"in e)w=e.message,_=e.signature;else{const{chain:N,wallet:x,statement:p,options:f}=e;let b;if(St())if(typeof x=="object")b=x;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))b=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(f!=null&&f.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=x}const v=new URL((r=f==null?void 0:f.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in b&&b.signIn){const C=await b.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},f==null?void 0:f.signInWithSolana),{version:"1",domain:v.host,uri:v.href}),p?{statement:p}:null));let P;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")P=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)P=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)w=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),_=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in b)||typeof b.signMessage!="function"||!("publicKey"in b)||typeof b!="object"||!b.publicKey||!("toBase58"in b.publicKey)||typeof b.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${v.host} wants you to sign in with your Solana account:`,b.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${v.href}`,`Issued At: ${(a=(s=f==null?void 0:f.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=f==null?void 0:f.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${f.signInWithSolana.notBefore}`]:[],...!((l=f==null?void 0:f.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${f.signInWithSolana.expirationTime}`]:[],...!((o=f==null?void 0:f.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${f.signInWithSolana.chainId}`]:[],...!((c=f==null?void 0:f.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${f.signInWithSolana.nonce}`]:[],...!((d=f==null?void 0:f.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${f.signInWithSolana.requestId}`]:[],...!((u=(h=f==null?void 0:f.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||u===void 0)&&u.length?["Resources",...f.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const C=await b.signMessage(new TextEncoder().encode(w),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=C}}try{const{data:N,error:x}=await ee(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:jw(_)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Vt});if(x)throw x;return!N||!N.session||!N.user?{data:{user:null,session:null},error:new Ea}:(N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),{data:Object.assign({},N),error:x})}catch(N){if(Q(N))return{data:{user:null,session:null},error:N};throw N}}async _exchangeCodeForSession(e){const r=await Mr(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(r??"").split("/");try{const{data:i,error:l}=await ee(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Vt});if(await cr(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Ea}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:l})}catch(i){if(Q(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:r,provider:s,token:a,access_token:i,nonce:l}=e,o=await ee(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:i,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Vt}),{data:c,error:d}=o;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Ea}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(r){if(Q(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,s,a,i,l;try{if("email"in e){const{email:o,options:c}=e;let d=null,h=null;this.flowType==="pkce"&&([d,h]=await ls(this.storage,this.storageKey));const{error:u}=await ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:u}}if("phone"in e){const{phone:o,options:c}=e,{data:d,error:h}=await ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(l=c==null?void 0:c.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:h}}throw new Ta("You must provide either an email or phone number.")}catch(o){if(Q(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var r,s;try{let a,i;"options"in e&&(a=(r=e.options)===null||r===void 0?void 0:r.redirectTo,i=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:l,error:o}=await ee(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Vt});if(o)throw o;if(!l)throw new Error("An error occurred on token verification.");const c=l.session,d=l.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(Q(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var r,s,a;try{let i=null,l=null;return this.flowType==="pkce"&&([i,l]=await ls(this.storage,this.storageKey)),await ee(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:l}),headers:this.headers,xform:Bw})}catch(i){if(Q(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:s}=e;if(s)throw s;if(!r)throw new dr;const{error:a}=await ee(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(Q(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:s,type:a,options:i}=e,{error:l}=await ee(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:s,type:a,options:i}=e,{data:l,error:o}=await ee(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:o}}throw new Ta("You must provide either an email or phone number and a type")}catch(r){if(Q(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Mr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<El:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const l=await Mr(this.userStorage,this.storageKey+"-user");l!=null&&l.user?e.user=l.user:e.user=Al()}if(this.storage.isServer&&e.user){let l=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,h)=>(!l&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,h))})}return{data:{session:e},error:null}}const{session:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ee(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:gr}):await this._useSession(async r=>{var s,a,i;const{data:l,error:o}=r;if(o)throw o;return!(!((s=l.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new dr}:await ee(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=l.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:gr})})}catch(r){if(Q(r))return fw(r)&&(await this._removeSession(),await cr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async s=>{const{data:a,error:i}=s;if(i)throw i;if(!a.session)throw new dr;const l=a.session;let o=null,c=null;this.flowType==="pkce"&&e.email!=null&&([o,c]=await ls(this.storage,this.storageKey));const{data:d,error:h}=await ee(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:c}),jwt:l.access_token,xform:gr});if(h)throw h;return l.user=d.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(s){if(Q(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new dr;const r=Date.now()/1e3;let s=r,a=!0,i=null;const{payload:l}=Pl(e.access_token);if(l.exp&&(s=l.exp,a=s<=r),a){const{session:o,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(Q(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var s;if(!e){const{data:l,error:o}=r;if(o)throw o;e=(s=l.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new dr;const{session:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Q(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!St())throw new Pa("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Pa(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Du("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Pa("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Du("No code detected.");const{data:p,error:f}=await this._exchangeCodeForSession(e.code);if(f)throw f;const b=new URL(window.location.href);return b.searchParams.delete("code"),window.history.replaceState(window.history.state,"",b.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:i,refresh_token:l,expires_in:o,expires_at:c,token_type:d}=e;if(!i||!o||!l||!d)throw new Pa("No session defined in URL");const h=Math.round(Date.now()/1e3),u=parseInt(o);let m=h+u;c&&(m=parseInt(c));const y=m-h;y*1e3<=us&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${u}s`);const w=m-u;h-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,m,h):h-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,m,h);const{data:_,error:N}=await this._getUser(i);if(N)throw N;const x={provider_token:s,provider_refresh_token:a,access_token:i,expires_in:u,expires_at:m,refresh_token:l,token_type:d,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:e.type},error:null}}catch(s){if(Q(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Mr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:a,error:i}=r;if(i)return{error:i};const l=(s=a.session)===null||s===void 0?void 0:s.access_token;if(l){const{error:o}=await this.admin.signOut(l,e);if(o&&!(mw(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await cr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=_w(),s={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async r=>{var s,a;try{const{data:{session:i},error:l}=r;if(l)throw l;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,r={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await ls(this.storage,this.storageKey,!0));try{return await ee(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(Q(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(Q(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:s,error:a}=await this._useSession(async i=>{var l,o,c,d,h;const{data:u,error:m}=i;if(m)throw m;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ee(this.fetch,"GET",y,{headers:this.headers,jwt:(h=(d=u.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0})});if(a)throw a;return St()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(Q(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var s,a;const{data:i,error:l}=r;if(l)throw l;return await ee(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(Q(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await Ew(async a=>(a>0&&await Cw(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await ee(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Vt})),(a,i)=>{const l=200*Math.pow(2,a);return i&&Tl(i)&&Date.now()+l-s<us})}catch(s){if(this._debug(r,"error",s),Q(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",s),St()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,r;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await Mr(this.storage,this.storageKey);if(a&&this.userStorage){let l=await Mr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:a.user},await hs(this.userStorage,this.storageKey+"-user",l)),a.user=(e=l==null?void 0:l.user)!==null&&e!==void 0?e:Al()}else if(a&&!a.user&&!a.user){const l=await Mr(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(a.user=l.user,await cr(this.storage,this.storageKey+"-user"),await hs(this.storage,this.storageKey,a)):a.user=Al()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<El;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${El}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:l}=await this._callRefreshToken(a.refresh_token);l&&(console.error(l),Tl(l)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:o}=await this._getUser(a.access_token);!o&&(l!=null&&l.user)?(a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(s,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var r,s;if(!e)throw new dr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Gi;const{data:i,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!i.session)throw new dr;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(a,"error",i),Q(i)){const l={session:null,error:i};return Tl(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,r,s=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:r});const i=[],l=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,r)}catch(c){i.push(c)}});if(await Promise.all(l),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&r.user&&await hs(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=Lu(a);await hs(this.storage,this.storageKey,i)}else{const a=Lu(r);await hs(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await cr(this.storage,this.storageKey),await cr(this.storage,this.storageKey+"-code-verifier"),await cr(this.storage,this.storageKey+"-user"),this.userStorage&&await cr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&St()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),us);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-e)/us);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${us}ms, refresh threshold is ${zo} ticks`),a<=zo&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Qf)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!St()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,s){const a=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,l]=await ls(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(l)}`});a.push(o.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);a.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var s;const{data:a,error:i}=r;return i?{data:null,error:i}:await ee(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(Q(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var s,a;const{data:i,error:l}=r;if(l)return{data:null,error:l};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=await ee(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(Q(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:i}=r;if(i)return{data:null,error:i};const{data:l,error:o}=await ee(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:o})})}catch(r){if(Q(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:i}=r;return i?{data:null,error:i}:await ee(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(Q(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const s=(e==null?void 0:e.factors)||[],a=s.filter(l=>l.factor_type==="totp"&&l.status==="verified"),i=s.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:s,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,s;const{data:{session:a},error:i}=e;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Pl(a.access_token);let o=null;l.aal&&(o=l.aal);let c=o;((s=(r=a.user.factors)===null||r===void 0?void 0:r.filter(u=>u.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const h=l.amr||[];return{data:{currentLevel:o,nextLevel:c,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(e,r={keys:[]}){let s=r.keys.find(o=>o.kid===e);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(o=>o.kid===e),s&&this.jwks_cached_at+uw>a)return s;const{data:i,error:l}=await ee(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,s=i.keys.find(o=>o.kid===e),!s)?null:s}async getClaims(e,r={}){try{let s=e;if(!s){const{data:y,error:w}=await this.getSession();if(w||!y.session)return{data:null,error:w};s=y.session.access_token}const{header:a,payload:i,signature:l,raw:{header:o,payload:c}}=Pl(s);r!=null&&r.allowExpired||Uw(i.exp);const d=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!d){const{error:y}=await this.getUser(s);if(y)throw y;return{data:{claims:i,header:a,signature:l},error:null}}const h=$w(a.alg),u=await crypto.subtle.importKey("jwk",d,h,!0,["verify"]);if(!await crypto.subtle.verify(h,u,l,bw(`${o}.${c}`)))throw new Wo("Invalid JWT signature");return{data:{claims:i,header:a,signature:l},error:null}}catch(s){if(Q(s))return{data:null,error:s};throw s}}}Qn.nextInstanceID=0;const Yw=Qn;class Xw extends Yw{constructor(e){super(e)}}var e1=function(t,e,r,s){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(h){try{d(s.next(h))}catch(u){l(u)}}function c(h){try{d(s.throw(h))}catch(u){l(u)}}function d(h){h.done?i(h.value):a(h.value).then(o,c)}d((s=s.apply(t,e||[])).next())})};class t1{constructor(e,r,s){var a,i,l;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const o=aw(e),c=new URL(o);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,h={db:Qv,realtime:Xv,auth:Object.assign(Object.assign({},Yv),{storageKey:d}),global:Zv},u=iw(s??{},h);this.storageKey=(a=u.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(m,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=u.auth)!==null&&l!==void 0?l:{},this.headers,u.global.fetch),this.fetch=sw(r,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new xv(new URL("rest/v1",c).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new Kv(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new Jy(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},s={}){return this.rest.rpc(e,r,s)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return e1(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(r=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:s,storage:a,storageKey:i,flowType:l,lock:o,debug:c},d,h){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Xw({url:this.authUrl.href,headers:Object.assign(Object.assign({},u),d),storageKey:i,autoRefreshToken:e,persistSession:r,detectSessionInUrl:s,storage:a,flowType:l,lock:o,debug:c,fetch:h,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Ov(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,s)=>{this._handleTokenChanged(r,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,r,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Yf=(t,e,r)=>new t1(t,e,r);function r1(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}r1()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Xf="https://ijsktwmevnqgzwwuggkf.supabase.co",s1="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imlqc2t0d21ldm5xZ3p3d3VnZ2tmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA3MDU4MTYsImV4cCI6MjA2NjI4MTgxNn0.w4eBL4hOZoAOo33ZXX-lSqQmIuSoP3fBEO1lBlpIRNw",n1="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imlqc2t0d21ldm5xZ3p3d3VnZ2tmIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1MDcwNTgxNiwiZXhwIjoyMDY2MjgxODE2fQ.3F4KHZ1CTAKvujWNb8G5usPDvKNxhOqGV_-uwGXiAZ4",L=Yf(Xf,s1),xn=Yf(Xf,n1);class a1{constructor(){Yi(this,"currentUser",null);Yi(this,"authState",{user:null,isAuthenticated:!1,isLoading:!0,error:null})}async init(){try{const e=await this.getCurrentSession();return e&&await this.fetchCurrentUser(e.email),this.authState.isLoading=!1,this.authState}catch{return this.authState.isLoading=!1,this.authState.error="Failed to initialize authentication",this.authState}}getCurrentSession(){const e=localStorage.getItem("ontimely_staff_session");if(e)try{return JSON.parse(e)}catch{return localStorage.removeItem("ontimely_staff_session"),null}return null}storeSession(e,r){localStorage.setItem("ontimely_staff_session",JSON.stringify({email:e,token:r}))}clearSession(){localStorage.removeItem("ontimely_staff_session")}async login(e){try{console.log(" STAFF AUTH: Login attempt for:",e.email),this.authState.isLoading=!0,this.authState.error=null;const{data:r,error:s}=await L.from("ontimely_staff").select("*").eq("email",e.email).eq("is_active",!0).single();if(console.log(" STAFF AUTH: Database query result:",{staffMember:r,staffError:s}),s||!r)throw new Error("Invalid credentials or account not found");const{passwordUtils:a}=await Ys(async()=>{const{passwordUtils:o}=await import("./passwordUtils-Cf7_p-p0.js");return{passwordUtils:o}},[]);if(!await a.verifyPassword(e.password,r.password_hash))throw console.log(" STAFF AUTH: Password check failed"),new Error("Invalid password");await L.from("ontimely_staff").update({last_login:new Date().toISOString()}).eq("id",r.id);const l=this.generateSimpleToken(r.email);return this.storeSession(r.email,l),this.currentUser=r,this.authState.user=r,this.authState.isAuthenticated=!0,this.authState.isLoading=!1,console.log(" STAFF AUTH: Login successful!",{user:r,authState:this.authState,session:this.getCurrentSession()}),this.authState}catch(r){return this.authState.error=r instanceof Error?r.message:"Login failed",this.authState.isLoading=!1,this.authState.isAuthenticated=!1,this.authState}}async logout(){return this.clearSession(),this.currentUser=null,this.authState={user:null,isAuthenticated:!1,isLoading:!1,error:null},this.authState}async getCurrentUser(){if(this.currentUser)return this.currentUser;const e=this.getCurrentSession();return e?(await this.fetchCurrentUser(e.email),this.currentUser):null}async fetchCurrentUser(e){try{const{data:r,error:s}=await L.from("ontimely_staff").select("*").eq("email",e).eq("is_active",!0).single();if(s||!r){this.clearSession();return}this.currentUser=r,this.authState.user=r,this.authState.isAuthenticated=!0}catch{this.clearSession()}}hasRole(e){if(!this.currentUser)return!1;const r={director:3,admin:2,staff:1};return r[this.currentUser.role]>=r[e]}isDirector(){return this.hasRole("director")}isAdmin(){return this.hasRole("admin")}isStaff(){return this.hasRole("staff")}generateSimpleToken(e){return btoa(`${e}:${Date.now()}`)}getAuthState(){return{...this.authState}}isAuthenticated(){return this.authState.isAuthenticated}}const es=new a1;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var i1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),B=(t,e)=>{const r=g.forwardRef(({color:s="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:o="",children:c,...d},h)=>g.createElement("svg",{ref:h,...i1,width:a,height:a,stroke:s,strokeWidth:l?Number(i)*24/Number(a):i,className:["lucide",`lucide-${l1(t)}`,o].join(" "),...d},[...e.map(([u,m])=>g.createElement(u,m)),...Array.isArray(c)?c:[c]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=B("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const td=B("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wi=B("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1=B("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bi=B("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=B("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qu=B("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=B("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wu=B("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1=B("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=B("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=B("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=B("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=B("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d1=B("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dl=B("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1=B("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=B("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ep=B("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=B("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=B("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h1=B("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vu=B("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tp=B("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=B("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1=B("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hu=B("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1=B("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=B("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p1=B("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=B("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=B("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g1=B("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x1=B("MousePointer",[["path",{d:"m3 3 7.07 16.97 2.51-7.39 7.39-2.51L3 3z",key:"y2ucgo"}],["path",{d:"m13 13 6 6",key:"1nhxnf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y1=B("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=B("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v1=B("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=B("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=B("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rp=B("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w1=B("ScreenShare",[["path",{d:"M13 3H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-3",key:"i8wdob"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"m17 8 5-5",key:"fqif7o"}],["path",{d:"M17 3h5v5",key:"1o3tu8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=B("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ku=B("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rd=B("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=B("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _i=B("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1=B("StarOff",[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gu=B("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=B("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=B("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=B("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=B("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zo=B("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sp=B("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=B("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j1=B("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=B("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ju=B("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),N1=()=>{const t=Qs(),[e,r]=g.useState({email:"",password:""}),[s,a]=g.useState(!1),[i,l]=g.useState(!1),[o,c]=g.useState(null);g.useEffect(()=>{(async()=>{(await es.init()).isAuthenticated&&t("/dashboard")})()},[t]);const d=async u=>{u.preventDefault(),l(!0),c(null);try{const m=await es.login(e);m.isAuthenticated?t("/dashboard"):c(m.error||"Login failed")}catch{c("An unexpected error occurred")}finally{l(!1)}},h=u=>{r(m=>({...m,[u.target.name]:u.target.value}))};return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-green-100 flex items-center justify-center p-4",children:n.jsxs("div",{className:"max-w-md w-full space-y-8",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"mx-auto h-16 w-16 bg-gradient-to-r from-green-600 to-green-700 rounded-full flex items-center justify-center mb-4",children:n.jsx(Hu,{className:"h-8 w-8 text-white"})}),n.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Staff Portal"}),n.jsx("p",{className:"text-gray-600",children:"Sign in to access the OnTimely management portal"})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8",children:[n.jsxs("form",{onSubmit:d,className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:n.jsx(ji,{className:"h-5 w-5 text-gray-400"})}),n.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e.email,onChange:h,className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors",placeholder:"Enter your email"})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:n.jsx(Hu,{className:"h-5 w-5 text-gray-400"})}),n.jsx("input",{id:"password",name:"password",type:s?"text":"password",autoComplete:"current-password",required:!0,value:e.password,onChange:h,className:"block w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors",placeholder:"Enter your password"}),n.jsx("button",{type:"button",onClick:()=>a(!s),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:s?n.jsx(ep,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):n.jsx(qs,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]}),o&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:n.jsx("p",{className:"text-sm text-red-600",children:o})}),n.jsx("button",{type:"submit",disabled:i,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:i?n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing in..."]}):"Sign In"})]}),n.jsx("div",{className:"mt-6 text-center",children:n.jsx("p",{className:"text-sm text-gray-500",children:"Need help? Contact your administrator"})})]}),n.jsx("div",{className:"text-center",children:n.jsx("p",{className:"text-sm text-gray-500",children:" 2024 OnTimely. All rights reserved."})})]})})},Ol={async createUserWithAuth(t){try{console.log("Starting user creation for:",t.email);let e=null;if(t.company_id)try{const{data:l}=await xn.from("companies").select("name").eq("id",t.company_id).single();e=l==null?void 0:l.name}catch(l){console.warn("Could not fetch company name:",l)}console.log("Creating Supabase Auth user...");const r=async(l=0)=>{var o;try{const{data:c,error:d}=await xn.auth.admin.createUser({email:t.email,password:t.password,email_confirm:!0,user_metadata:{name:t.name,company_id:t.company_id,role:t.role||"user",status:t.status||"offline"}});if(d){if(console.error(" SUPABASE AUTH ERROR:",{message:d.message,status:d.status,details:d}),d.message.includes("For security purposes, you can only request this after")&&l<3){const h=Math.pow(2,l)*1e3+5e3;return console.log(`Rate limited, waiting ${h}ms before retry ${l+1}/3...`),await new Promise(u=>setTimeout(u,h)),r(l+1)}throw d}return{data:c,error:null}}catch(c){if(l<3&&c instanceof Error&&((o=c.message)!=null&&o.includes("For security purposes, you can only request this after"))){const d=Math.pow(2,l)*1e3+5e3;return console.log(`Rate limited, waiting ${d}ms before retry ${l+1}/3...`),await new Promise(h=>setTimeout(h,d)),r(l+1)}throw c}},{data:s}=await r();if(!s.user)throw new Error("Supabase Auth user creation succeeded but no user data returned");console.log("Supabase Auth user created successfully:",s.user.id);const{data:a,error:i}=await xn.from("users").insert([{id:s.user.id,email:t.email,name:t.name,company_id:t.company_id,role:t.role||"user",status:t.status||"offline",avatar:"",company_name:e,avatar_url:null,description:null,company_role:null}]).select().single();if(i){console.error("Profile creation failed:",i);try{await xn.auth.admin.deleteUser(s.user.id),console.log("Cleaned up Supabase Auth user after profile creation failure")}catch(l){console.warn("Failed to clean up Supabase Auth user:",l)}throw i}console.log("User profile created successfully with matching ID:",a.id);try{await this.sendWelcomeEmailViaSupabase({email:t.email,name:t.name,temporaryPassword:t.password,companyName:e})}catch(l){console.warn("Email sending failed, but user was created successfully:",l)}return{profile:a,auth:s.user}}catch(e){throw console.error("Error creating user with auth:",e),e}},async sendWelcomeEmailViaSupabase(t){console.log(" STARTING EMAIL SEND PROCESS:",{email:t.email,name:t.name,companyName:t.companyName});try{const e=`https://accountsetup.ontimely.co.uk/set-initial-password?token=${encodeURIComponent(t.email)}&type=signup`;console.log(" CONFIRMATION URL:",e),console.log(" CALLING Edge Function for email...");const r=await fetch("https://portal.ontimely.co.uk/api/send-account-confirmation-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t.email,name:t.name,companyName:t.companyName,confirmationUrl:e})});if(!r.ok){const a=await r.json();throw new Error(`Edge Function failed: ${a.error||r.statusText}`)}const s=await r.json();console.log(" Edge Function email result:",s),console.log(` Professional confirmation email sent successfully to ${t.email} via Edge Function`)}catch(e){console.error(" Error sending confirmation email via Edge Function:",e),console.error(" ERROR DETAILS:",{message:e instanceof Error?e.message:String(e),stack:e instanceof Error?e.stack:"No stack trace",name:e instanceof Error?e.name:"Unknown error type"});try{console.log(" TRYING FALLBACK EMAIL via Edge Function...");const r=`https://accountsetup.ontimely.co.uk/confirm-account?token=${encodeURIComponent(t.email)}&type=signup`,s=await fetch("https://portal.ontimely.co.uk/api/send-account-confirmation-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t.email,name:t.name,companyName:t.companyName,confirmationUrl:r})});if(!s.ok){const i=await s.json();throw new Error(`Fallback Edge Function failed: ${i.error||s.statusText}`)}const a=await s.json();console.log(" Fallback Edge Function email result:",a)}catch(r){console.error(" Fallback email also failed:",r)}}},async bulkCreateUsersWithAuth(t){try{const e=[];for(const r of t)try{const s=this.generateTemporaryPassword(),a=await this.createUserWithAuth({...r,password:s});e.push(a)}catch(s){console.error(`Failed to create user ${r.email}:`,s)}return e}catch(e){throw console.error("Error in bulk user creation:",e),e}},generateTemporaryPassword(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let r="";r+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(Math.random()*26)],r+="abcdefghijklmnopqrstuvwxyz"[Math.floor(Math.random()*26)],r+="0123456789"[Math.floor(Math.random()*10)],r+="!@#$%^&*"[Math.floor(Math.random()*8)];for(let s=4;s<12;s++)r+=e[Math.floor(Math.random()*e.length)];return r.split("").sort(()=>Math.random()-.5).join("")},async getCompanyName(t){try{const{data:e,error:r}=await L.from("companies").select("name").eq("id",t).single();if(r)throw r;return e==null?void 0:e.name}catch(e){console.warn("Could not fetch company name:",e);return}},async resetUserPassword(t){try{const{data:e,error:r}=await L.from("users").select("email, name, company_id").eq("id",t).single();if(r)throw r;const s=this.generateTemporaryPassword();return await this.sendWelcomeEmailViaSupabase({email:e.email,name:e.name,temporaryPassword:s,companyName:e.company_id?await this.getCompanyName(e.company_id):void 0}),s}catch(e){throw console.error("Error resetting user password:",e),e}},async sendPasswordResetEmail(t,e){try{const{data:r,error:s}=await L.from("users").select("id").eq("email",t).single();if(s||!r)throw new Error("Email not found in database");const a=`https://dashboard.ontimely.co.uk/set-initial-password?token=${encodeURIComponent(t)}&type=recovery`,i=await fetch("https://portal.ontimely.co.uk/api/send-account-confirmation-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,name:e,companyName:void 0,confirmationUrl:a})});if(!i.ok){const l=await i.json();throw new Error(`Edge Function failed: ${l.error||i.statusText}`)}console.log(` Password reset email sent successfully to ${t} via Edge Function`)}catch(r){throw console.error("Error sending password reset email:",r),r}}};function _1(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let r="";r+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(Math.random()*26)],r+="abcdefghijklmnopqrstuvwxyz"[Math.floor(Math.random()*26)],r+="0123456789"[Math.floor(Math.random()*10)],r+="!@#$%^&*"[Math.floor(Math.random()*8)];for(let s=4;s<12;s++)r+=e[Math.floor(Math.random()*e.length)];return r.split("").sort(()=>Math.random()-.5).join("")}const k1={async getCompanies(){const{data:t,error:e}=await L.from("companies").select("*").order("created_at",{ascending:!1});if(e)throw e;return(t||[]).filter(r=>!r.deleted_at)},async getCompany(t){const{data:e,error:r}=await L.from("companies").select("*").eq("id",t).single();if(r)throw r;return e},async createCompany(t){const{data:e,error:r}=await L.from("companies").insert([t]).select().single();if(r)throw r;return e},async updateCompany(t,e){const{data:r,error:s}=await L.from("companies").update(e).eq("id",t).select().single();if(s)throw s;return r},async deleteCompany(t){const{error:e}=await L.from("companies").delete().eq("id",t);if(e)throw e},async softDeleteCompany(t){const{error:e}=await L.from("companies").update({deleted_at:new Date().toISOString()}).eq("id",t);if(e)throw e},async restoreCompany(t){const{error:e}=await L.from("companies").update({deleted_at:null}).eq("id",t);if(e)throw e},async getDeletedCompanies(){const{data:t,error:e}=await L.from("companies").select("*").not("deleted_at","is",null).order("deleted_at",{ascending:!1});if(e)throw e;return t||[]},async getCompanyStats(t){const{data:e,error:r}=await L.from("users").select("id, status").eq("company_id",t);if(r)throw r;const s=(e==null?void 0:e.length)||0,a=(e==null?void 0:e.filter(i=>i.status==="online").length)||0;return{totalUsers:s,onlineUsers:a}}},S1={async getUsers(){const{data:t,error:e}=await L.from("users").select(`
        *,
        companies (
          name,
          subscription_plan
        )
      `).order("created_at",{ascending:!1});if(e)throw e;return(t||[]).filter(r=>!r.deleted_at)},async getUsersByCompany(t){const{data:e,error:r}=await L.from("users").select("*").eq("company_id",t).order("created_at",{ascending:!1});if(r)throw r;return e||[]},async createUser(t){var e;try{console.log(" DATABASE: createUser called with:",t);const r=_1();console.log(" DATABASE: Generated temporary password"),console.log(" DATABASE: Calling emailService.createUserWithAuth...");const s=await Ol.createUserWithAuth({...t,password:r});return console.log(" DATABASE: emailService.createUserWithAuth completed:",{hasProfile:!!s.profile,hasAuth:!!s.auth,profileId:(e=s.profile)==null?void 0:e.id}),s.profile}catch(r){throw console.error(" DATABASE: Error creating user:",r),r}},async bulkCreateUsers(t){try{return(await Ol.bulkCreateUsersWithAuth(t)).map(r=>r.profile)}catch(e){throw console.error("Error creating bulk users:",e),e}},async updateUser(t,e){const{data:r,error:s}=await L.from("users").update(e).eq("id",t).select().single();if(s)throw s;return r},async softDeleteUser(t){try{console.log(" DATABASE: Soft deleting user with ID:",t);const{error:e}=await L.from("users").update({deleted_at:new Date().toISOString(),status:"deleted"}).eq("id",t);if(e){if(e.code==="42703")return console.warn("deleted_at column not found, falling back to permanent delete"),this.deleteUser(t);throw console.error("Soft delete error:",e),e}console.log(" User soft deleted successfully")}catch(e){throw console.error(" Soft delete failed:",e),e}},async restoreUser(t){try{console.log(" DATABASE: Restoring user with ID:",t);const{error:e}=await L.from("users").update({deleted_at:null,status:"offline"}).eq("id",t);if(e){if(e.code==="42703"){console.warn("deleted_at column not found, just updating status");const{error:r}=await L.from("users").update({status:"offline"}).eq("id",t);if(r)throw r;console.log(" User status updated successfully");return}throw console.error("Restore error:",e),e}console.log(" User restored successfully")}catch(e){throw console.error(" Restore failed:",e),e}},async getDeletedUsers(){try{const t=new Date;t.setDate(t.getDate()-30);const{data:e,error:r}=await L.from("users").select("*").order("created_at",{ascending:!1});if(r)throw r;return(e||[]).filter(s=>s.deleted_at?new Date(s.deleted_at)>=t:!1)}catch(t){return console.error("Error fetching deleted users:",t),[]}},async deleteUser(t){try{console.log(" DATABASE: Permanently deleting user with ID:",t);const{error:e}=await L.from("users").delete().eq("id",t);if(e)throw console.error("Database deletion error:",e),e;console.log(" User deleted from database successfully");try{const{error:r}=await xn.auth.admin.deleteUser(t);r?console.warn("Auth deletion error (user may not exist in auth):",r):console.log(" User deleted from Supabase Auth successfully")}catch(r){console.warn("Auth deletion failed (continuing anyway):",r)}}catch(e){throw console.error(" User deletion failed:",e),e}},async updateUserStatus(t,e){return this.updateUser(t,{status:e})},async updateUserRole(t,e){return this.updateUser(t,{role:e})},async resetUserPassword(t){try{return await Ol.resetUserPassword(t)}catch(e){throw console.error("Error resetting user password:",e),e}}},C1={async getTeamsByCompany(t){const{data:e,error:r}=await L.from("teams").select("*").eq("company_id",t).eq("is_archived",!1).order("created_at",{ascending:!1});if(r)throw r;return e||[]},async getTeamMembers(t){const{data:e,error:r}=await L.from("team_members").select("*").eq("team_id",t).order("joined_at",{ascending:!1});if(r)throw r;return e||[]}},E1={async getChatsByCompany(t){const{data:e,error:r}=await L.from("chats").select("*").eq("company_id",t).eq("is_archived",!1).order("updated_at",{ascending:!1});if(r)throw r;return e||[]},async getChatMessages(t){const{data:e,error:r}=await L.from("messages").select("*").eq("chat_id",t).order("created_at",{ascending:!0});if(r)throw r;return e||[]}},T1={async getTickets(){const{data:t,error:e}=await L.from("support_tickets").select(`
        *,
        users (
          name,
          email
        ),
        companies (
          name
        )
      `).order("created_at",{ascending:!1});if(e)throw e;return t||[]},async createTicket(t){const{data:e,error:r}=await L.from("support_tickets").insert([t]).select().single();if(r)throw r;return e},async updateTicket(t,e){const{data:r,error:s}=await L.from("support_tickets").update(e).eq("id",t).select().single();if(s)throw s;return r},async getTicketStats(){const{data:t,error:e}=await L.from("support_tickets").select("status, priority");if(e)throw e;const r={open:0,inProgress:0,resolved:0,closed:0,highPriority:0};return t==null||t.forEach(s=>{s.status==="open"?r.open++:s.status==="in-progress"?r.inProgress++:s.status==="resolved"?r.resolved++:s.status==="closed"&&r.closed++,(s.priority==="high"||s.priority==="critical")&&r.highPriority++}),r}},P1={async getSystemMetrics(){const{data:t,error:e}=await L.from("system_metrics").select("*").order("created_at",{ascending:!1}).limit(10);if(e)throw e;return t||[]},async getUserActivity(t=30){const e=new Date;e.setDate(e.getDate()-t);const{data:r,error:s}=await L.from("users").select("created_at, last_seen").gte("created_at",e.toISOString());if(s)throw s;const a={};return r==null||r.forEach(i=>{const l=i.created_at.split("T")[0];a[l]||(a[l]={newUsers:0,activeUsers:0}),a[l].newUsers++,i.last_seen&&new Date(i.last_seen)>=e&&a[l].activeUsers++}),Object.entries(a).map(([i,l])=>({date:i,...l}))},async getCompanyGrowth(t=30){const e=new Date;e.setDate(e.getDate()-t);const{data:r,error:s}=await L.from("companies").select("created_at, subscription_plan").gte("created_at",e.toISOString());if(s)throw s;const a={};return r==null||r.forEach(i=>{const l=i.created_at.split("T")[0];a[l]||(a[l]={total:0,basic:0,premium:0,enterprise:0}),a[l].total++,a[l][i.subscription_plan]++}),Object.entries(a).map(([i,l])=>({date:i,...l}))}},pe={companies:k1,users:S1,teams:C1,chats:E1,support:T1,analytics:P1},Zu=()=>{const[t,e]=g.useState({totalCompanies:0,totalUsers:0,onlineUsers:0,newUsersThisMonth:0,newCompaniesThisMonth:0}),[r,s]=g.useState([]),[a,i]=g.useState([]),[l,o]=g.useState(!0);g.useEffect(()=>{(async()=>{const h=await es.getCurrentUser();console.log(" DASHBOARD: Authentication state:",{currentUser:h,isAuthenticated:!!h,userRole:h==null?void 0:h.role,userEmail:h==null?void 0:h.email})})(),c()},[]);const c=async()=>{try{o(!0);const[d,h]=await Promise.all([pe.companies.getCompanies(),pe.users.getUsers()]),u=new Date,m=new Date(u.getFullYear(),u.getMonth(),1),y=h.filter(N=>new Date(N.created_at)>=m).length,w=d.filter(N=>new Date(N.created_at)>=m).length,_=h.filter(N=>N.status==="online").length;e({totalCompanies:d.length,totalUsers:h.length,onlineUsers:_,newUsersThisMonth:y,newCompaniesThisMonth:w}),s(d.slice(0,5)),i(h.slice(0,5))}catch(d){console.error("Error loading dashboard data:",d)}finally{o(!1)}};return l?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),n.jsx("p",{className:"text-gray-600",children:"Overview of your OnTimely application"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:n.jsx(rt,{className:"w-6 h-6 text-green-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Companies"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.totalCompanies})]})]}),n.jsxs("div",{className:"mt-4 flex items-center text-sm text-gray-600",children:[n.jsx(Jo,{className:"w-4 h-4 text-green-500 mr-1"}),n.jsxs("span",{className:"text-green-600",children:["+",t.newCompaniesThisMonth," this month"]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:n.jsx(Ie,{className:"w-6 h-6 text-green-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.totalUsers})]})]}),n.jsxs("div",{className:"mt-4 flex items-center text-sm text-gray-600",children:[n.jsx(Zo,{className:"w-4 h-4 text-green-500 mr-1"}),n.jsxs("span",{className:"text-green-600",children:["+",t.newUsersThisMonth," this month"]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:n.jsx(zs,{className:"w-6 h-6 text-purple-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Online Users"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.onlineUsers})]})]}),n.jsxs("div",{className:"mt-4 flex items-center text-sm text-gray-600",children:[n.jsx(Bs,{className:"w-4 h-4 text-green-500 mr-1"}),n.jsx("span",{className:"text-green-600",children:"Active now"})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:n.jsx(Jo,{className:"w-6 h-6 text-orange-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Growth Rate"}),n.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[t.totalCompanies>0?Math.round(t.newCompaniesThisMonth/t.totalCompanies*100):0,"%"]})]})]}),n.jsx("div",{className:"mt-4 flex items-center text-sm text-gray-600",children:n.jsx("span",{className:"text-orange-600",children:"Monthly"})})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[n.jsxs("div",{className:"p-6 border-b",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Companies"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Latest companies added to the platform"})]}),n.jsx("div",{className:"p-6",children:r.length>0?n.jsx("div",{className:"space-y-4",children:r.map(d=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:n.jsx(Wu,{className:"w-4 h-4 text-green-600"})}),n.jsxs("div",{className:"ml-3",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:d.name}),n.jsxs("p",{className:"text-xs text-gray-500",children:[d.subscription_plan||"basic"," plan  ",d.max_users||5," users max"]})]})]}),n.jsx("div",{className:"text-xs text-gray-500",children:new Date(d.created_at).toLocaleDateString()})]},d.id))}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Wu,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),n.jsx("p",{className:"text-gray-500",children:"No companies yet"})]})})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[n.jsxs("div",{className:"p-6 border-b",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Users"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Latest users who joined the platform"})]}),n.jsx("div",{className:"p-6",children:a.length>0?n.jsx("div",{className:"space-y-4",children:a.map(d=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:n.jsx(Ie,{className:"w-4 h-4 text-green-600"})}),n.jsxs("div",{className:"ml-3",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:d.name}),n.jsxs("p",{className:"text-xs text-gray-500",children:[d.role||"user","  ",d.status||"offline"]})]})]}),n.jsx("div",{className:"text-xs text-gray-500",children:new Date(d.created_at).toLocaleDateString()})]},d.id))}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Ie,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),n.jsx("p",{className:"text-gray-500",children:"No users yet"})]})})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx("button",{className:"p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-primary-500 hover:bg-primary-50 transition-colors",children:n.jsxs("div",{className:"text-center",children:[n.jsx(rt,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Add Company"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Create a new company"})]})}),n.jsx("button",{className:"p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-primary-500 hover:bg-primary-50 transition-colors",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Zo,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Add User"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Create a new user"})]})}),n.jsx("button",{className:"p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-primary-500 hover:bg-primary-50 transition-colors",children:n.jsxs("div",{className:"text-center",children:[n.jsx(zs,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"View Analytics"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Check detailed metrics"})]})})]})]})]})},A1=()=>{var ad,id;const[t,e]=g.useState([]),[r,s]=g.useState([]),[a,i]=g.useState(!0),[l,o]=g.useState(""),[c,d]=g.useState("all"),[h,u]=g.useState("all"),[m,y]=g.useState(!1),[w,_]=g.useState(!1),[N,x]=g.useState(!1),[p,f]=g.useState({email:"",name:"",company_id:"",role:"user"}),[b,v]=g.useState(!1),C=g.useRef(null),[P,U]=g.useState(!1),[J,W]=g.useState(!1),[G,De]=g.useState(!1),[Se,R]=g.useState(!1),[I,V]=g.useState(!1),H=g.useRef(null),S=g.useRef(null),D=g.useRef(null),q=g.useRef(null),j=g.useRef(null),[K,Fe]=g.useState(""),[re,_e]=g.useState(""),[Ce,ze]=g.useState("user"),[$,ce]=g.useState(!1),[et,k]=g.useState(null),[Z,ie]=g.useState(!1),[T,A]=g.useState(!1),[z,ne]=g.useState(null),[se,we]=g.useState(null),[tt,He]=g.useState("active"),[oa,np]=g.useState([]),[qt,sd]=g.useState([]),[tn,Ji]=g.useState(null),[ap,Zi]=g.useState(""),[ip,ns]=g.useState(!1);g.useEffect(()=>{lr()},[]),g.useEffect(()=>{const E=F=>{C.current&&!C.current.contains(F.target)&&v(!1),H.current&&!H.current.contains(F.target)&&U(!1),S.current&&!S.current.contains(F.target)&&W(!1),D.current&&!D.current.contains(F.target)&&De(!1),q.current&&!q.current.contains(F.target)&&R(!1),j.current&&!j.current.contains(F.target)&&V(!1)};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[]);const lr=async()=>{try{i(!0);const[E,F,X]=await Promise.all([pe.users.getUsers(),pe.companies.getCompanies(),pe.users.getDeletedUsers()]);e(E),s(F),np(X)}catch(E){console.error("Error loading data:",E)}finally{i(!1)}},lp=async()=>{var E,F;try{if(console.log(" USER CREATION STARTED:",{email:p.email,name:p.name,company_id:p.company_id,role:p.role}),!p.email||!p.name||!p.company_id){Y.error("Please fill in all required fields.");return}const X={email:p.email,name:p.name,company_id:p.company_id,role:p.role};console.log(" CALLING db.users.createUser with:",X);const le=await pe.users.createUser(X);console.log(" USER CREATED SUCCESSFULLY:",le);let fe;if(p.company_id){const Ke=r.find(Ot=>Ot.id===p.company_id);fe=Ke==null?void 0:Ke.name}Ji({email:p.email,name:p.name,companyName:fe}),x(!0),y(!1),f({email:"",name:"",company_id:"",role:"user"}),Y.success(`User ${p.name} created successfully! Welcome email sent.`),lr()}catch(X){console.error("Error creating user:",X);let le="Error creating user. Please try again.";if(X&&typeof X=="object"&&"message"in X){const fe=X.message.toLowerCase();if(fe.includes("for security purposes, you can only request this after")){Y.success("User created successfully! Welcome email will be sent shortly (rate limited).");return}else if(fe.includes("invalid email")||fe.includes("email format")||fe.includes("400"))le="Invalid email address. Please check the email format and try again.";else if(fe.includes("email already exists")||fe.includes("duplicate")||fe.includes("already registered")||fe.includes("unique constraint")||fe.includes("violates unique constraint")){const Ke=t.find(Ot=>Ot.email===p.email);if(Ke&&Ke.company_id===p.company_id)le=`A user with this email already exists in ${Ke.company_id?(E=r.find(Ot=>Ot.id===Ke.company_id))==null?void 0:E.name:"this company"}. Please use a different email or edit the existing user.`;else if(Ke){le=`A user with this email exists in another company (${Ke.company_id?(F=r.find(wp=>wp.id===Ke.company_id))==null?void 0:F.name:"different company"}). You can create this user as they will use different login credentials.`;const Ot={email:p.email,name:p.name,company_id:p.company_id,role:p.role};await pe.users.createUser(Ot),Y.success("User created successfully! Welcome email sent."),y(!1),f({email:"",name:"",company_id:"",role:"user"}),lr();return}else le="A user with this email address already exists. Please use a different email."}else fe.includes("company not found")||fe.includes("invalid company")?le="Selected company is invalid. Please refresh the page and try again.":(fe.includes("network")||fe.includes("connection"))&&(le="Network error. Please check your connection and try again.")}Y.error(le)}},op=async()=>{try{if(console.log(" BULK USER CREATION STARTED:",{count:qt.length,companyId:re,role:Ce}),qt.length===0)return;const E=qt.map(F=>({email:F.email.trim(),name:F.name.trim(),company_id:re||void 0,role:Ce}));console.log(" CALLING db.users.bulkCreateUsers with:",E),await pe.users.bulkCreateUsers(E),console.log(" BULK USER CREATION COMPLETED SUCCESSFULLY"),_(!1),Fe(""),sd([]),_e(""),ze("user"),lr(),Zi(`Successfully created ${qt.length} users! Welcome emails have been sent.`),ns(!0),setTimeout(()=>ns(!1),5e3)}catch(E){console.error("Error creating bulk users:",E),Zi("Error creating bulk users. Please try again."),ns(!0),setTimeout(()=>ns(!1),5e3)}},cp=async E=>{try{const F=t.find(X=>X.id===E);if(F){let X;if(F.company_id){const le=r.find(fe=>fe.id===F.company_id);X=le==null?void 0:le.name}Ji({email:F.email,name:F.name,companyName:X}),x(!0)}}catch(F){console.error("Error resetting password:",F),Zi("Error resetting password. Please try again."),ns(!0),setTimeout(()=>ns(!1),5e3)}},nd=E=>{const F=E.split(`
`).filter(le=>le.trim()),X=[];F.forEach(le=>{const fe=le.split(",").map(Ke=>Ke.trim());fe.length>=2&&X.push({email:fe[0],name:fe[1]})}),sd(X)},dp=E=>{var X;const F=(X=E.target.files)==null?void 0:X[0];if(F){const le=new FileReader;le.onload=fe=>{var Ot;const Ke=(Ot=fe.target)==null?void 0:Ot.result;nd(Ke)},le.readAsText(F)}},up=(E,F,X)=>{k({id:E,name:F,email:X}),ce(!0)},hp=async()=>{if(et){ie(!0);try{await pe.users.softDeleteUser(et.id),ne(et),A(!0),ce(!1),k(null),lr();const E=setTimeout(()=>{A(!1),ne(null),z&&pe.users.deleteUser(z.id).catch(console.error)},3e3);we(E)}catch(E){console.error("Error deleting user:",E),Y.error("Error deleting user. Please try again.")}finally{ie(!1)}}},mp=async()=>{if(z)try{await pe.users.restoreUser(z.id),A(!1),ne(null),se&&(clearTimeout(se),we(null)),lr(),Y.success(`User ${z.name} restored successfully.`)}catch(E){console.error("Error restoring user:",E),Y.error("Error restoring user. Please try again.")}},fp=async(E,F)=>{try{await pe.users.restoreUser(E),lr(),Y.success(`User ${F} restored successfully.`)}catch(X){console.error("Error restoring user:",X),Y.error("Error restoring user. Please try again.")}},pp=async(E,F,X)=>{if(window.confirm(`Are you sure you want to permanently delete ${F}? This action cannot be undone.`))try{await pe.users.deleteUser(E),lr(),Y.success(`User ${F} permanently deleted.`)}catch(le){console.error("Error permanently deleting user:",le),Y.error("Error permanently deleting user. Please try again.")}},Ir=(E,F,X)=>{let le="w-full px-3 py-2 text-left hover:bg-primary-50 hover:text-primary-700 transition-colors duration-150 flex items-center justify-between";return F||(le+=" border-t border-gray-100"),F&&(le+=" rounded-t-lg"),X&&(le+=" rounded-b-lg"),le},gp=(tt==="active"?t:oa).filter(E=>{const F=E.name.toLowerCase().includes(l.toLowerCase())||E.email.toLowerCase().includes(l.toLowerCase()),X=c==="all"||E.status===c,le=h==="all"||E.company_id===h;return F&&X&&le});g.useEffect(()=>()=>{se&&clearTimeout(se)},[se]);const xp=E=>{if(!E)return"No Company";const F=r.find(X=>X.id===E);return(F==null?void 0:F.name)||"Unknown Company"},yp=E=>{switch(E){case"online":return"bg-green-100 text-green-800";case"offline":return"bg-gray-100 text-gray-800";case"away":return"bg-yellow-100 text-yellow-800";case"busy":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},vp=E=>{switch(E){case"masterAdmin":return"bg-purple-100 text-purple-800";case"user":return"bg-green-100 text-green-800";default:return"bg-green-100 text-green-800"}},Qi=r.find(E=>E.id===p.company_id);return a?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):n.jsxs("div",{className:"p-6",children:[ip&&n.jsx("div",{className:"fixed top-4 right-4 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded z-50",children:ap}),n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),n.jsx("p",{className:"text-gray-600",children:"Manage all users across companies"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:()=>_(!0),className:"btn btn-secondary flex items-center gap-2",children:[n.jsx(Zo,{className:"w-4 h-4"}),"Bulk Add Users"]}),n.jsxs("button",{onClick:()=>y(!0),className:"btn btn-primary flex items-center gap-2",children:[n.jsx(Ws,{className:"w-4 h-4"}),"Add User"]})]})]}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-4 mb-6",children:n.jsxs("div",{className:"flex flex-wrap gap-4",children:[n.jsx("div",{className:"flex-1 min-w-64",children:n.jsxs("div",{className:"relative",children:[n.jsx(la,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),n.jsx("input",{type:"text",placeholder:"Search users...",value:l,onChange:E=>o(E.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})}),n.jsxs("div",{className:"relative",ref:H,children:[n.jsxs("button",{type:"button",onClick:()=>U(!P),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white text-left flex items-center justify-between min-w-[140px]",children:[n.jsx("span",{className:"text-gray-900",children:c==="all"?"All Statuses":c==="online"?"Online":c==="offline"?"Offline":c==="away"?"Away":"Busy"}),n.jsx(Zt,{className:`w-4 h-4 text-gray-400 transition-transform ${P?"rotate-180":""}`})]}),P&&n.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg overflow-hidden",children:[{value:"all",label:"All Statuses"},{value:"online",label:"Online"},{value:"offline",label:"Offline"},{value:"away",label:"Away"},{value:"busy",label:"Busy"}].map((E,F,X)=>n.jsxs("button",{onClick:()=>{d(E.value),U(!1)},className:Ir(c===E.value,F===0,F===X.length-1),children:[n.jsx("span",{children:E.label}),c===E.value&&n.jsx(Gt,{className:"w-4 h-4 text-primary-600"})]},E.value))})]}),n.jsxs("div",{className:"relative",ref:S,children:[n.jsxs("button",{type:"button",onClick:()=>W(!J),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white text-left flex items-center justify-between min-w-[160px]",children:[n.jsx("span",{className:"text-gray-900 truncate",children:h==="all"?"All Companies":((ad=r.find(E=>E.id===h))==null?void 0:ad.name)||"Unknown Company"}),n.jsx(Zt,{className:`w-4 h-4 text-gray-400 transition-transform ${J?"rotate-180":""}`})]}),J&&n.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-auto",children:[n.jsxs("button",{onClick:()=>{u("all"),W(!1)},className:Ir(h==="all",!0,r.length===0),children:[n.jsx("span",{children:"All Companies"}),h==="all"&&n.jsx(Gt,{className:"w-4 h-4 text-primary-600"})]}),r.map((E,F)=>n.jsxs("button",{onClick:()=>{u(E.id),W(!1)},className:Ir(h===E.id,!1,F===r.length-1),children:[n.jsx("span",{className:"truncate",children:E.name}),h===E.id&&n.jsx(Gt,{className:"w-4 h-4 text-primary-600"})]},E.id))]})]})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm border mb-6",children:n.jsx("div",{className:"border-b border-gray-200",children:n.jsxs("nav",{className:"-mb-px flex space-x-8 px-6",children:[n.jsxs("button",{onClick:()=>He("active"),className:`py-4 px-1 border-b-2 font-medium text-sm ${tt==="active"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Active Users (",t.length,")"]}),n.jsxs("button",{onClick:()=>He("deleted"),className:`py-4 px-1 border-b-2 font-medium text-sm ${tt==="deleted"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Recently Deleted (",oa.length,")"]})]})})}),T&&z&&n.jsxs("div",{className:"fixed top-4 right-4 bg-red-600 text-white px-6 py-3 rounded-lg shadow-lg z-50 flex items-center space-x-4",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(wt,{className:"w-5 h-5 mr-2"}),n.jsxs("span",{children:['User "',z.name,'" deleted']})]}),n.jsx("button",{onClick:mp,className:"bg-white text-red-600 px-3 py-1 rounded text-sm font-medium hover:bg-red-50 transition-colors",children:"Undo"}),n.jsx("button",{onClick:()=>{A(!1),ne(null),se&&(clearTimeout(se),we(null))},className:"text-red-200 hover:text-white",children:n.jsx(Bt,{className:"w-4 h-4"})})]}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 border-b",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Company"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Seen"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:gp.map(E=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:E.avatar_url?n.jsx("img",{className:"h-10 w-10 rounded-full",src:E.avatar_url,alt:E.name}):n.jsx("div",{className:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center",children:n.jsx("span",{className:"text-sm font-medium text-primary-600",children:E.name.charAt(0).toUpperCase()})})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:E.name}),n.jsx("div",{className:"text-sm text-gray-500",children:E.email})]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:xp(E.company_id)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${vp(E.role)}`,children:E.role||"user"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${yp(E.status)}`,children:E.status||"offline"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:E.last_seen?new Date(E.last_seen).toLocaleDateString():"Never"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:n.jsx("div",{className:"flex items-center space-x-2",children:tt==="active"?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>cp(E.id),className:"text-yellow-600 hover:text-yellow-900",title:"Reset Password",children:n.jsx(Ho,{className:"w-4 h-4"})}),n.jsx("button",{className:"text-primary-600 hover:text-primary-900",children:n.jsx(_i,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>up(E.id,E.name,E.email),className:"text-red-600 hover:text-red-900",children:n.jsx(wt,{className:"w-4 h-4"})})]}):n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>fp(E.id,E.name),className:"text-green-600 hover:text-green-900",title:"Restore User",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),n.jsx("button",{onClick:()=>pp(E.id,E.name,E.email),className:"text-red-600 hover:text-red-900",title:"Permanently Delete",children:n.jsx(wt,{className:"w-4 h-4"})})]})})})]},E.id))})]})})}),m&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Add New User"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),n.jsx("input",{type:"text",value:p.name,onChange:E=>f({...p,name:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter full name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),n.jsx("input",{type:"email",value:p.email,onChange:E=>f({...p,email:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter email address"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Company *"}),n.jsxs("div",{className:"relative",ref:C,children:[n.jsxs("button",{type:"button",onClick:()=>v(!b),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white text-left flex items-center justify-between",children:[n.jsx("span",{className:Qi?"text-gray-900":"text-gray-500",children:Qi?Qi.name:"Select a company"}),n.jsx(Zt,{className:`w-4 h-4 text-gray-400 transition-transform ${b?"rotate-180":""}`})]}),b&&n.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-auto",children:r.map((E,F)=>n.jsxs("button",{onClick:()=>{f({...p,company_id:E.id}),v(!1)},className:Ir(p.company_id===E.id,F===0,F===r.length-1),children:[n.jsx("span",{children:E.name}),p.company_id===E.id&&n.jsx(Gt,{className:"w-4 h-4 text-primary-600"})]},E.id))})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),n.jsxs("div",{className:"relative",ref:D,children:[n.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none z-10",children:n.jsx(Va,{className:"h-5 w-5 text-gray-400"})}),n.jsx("button",{type:"button",onClick:()=>De(!G),className:"block w-full pl-10 pr-10 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors bg-white text-left",children:n.jsx("span",{className:p.role?"text-gray-900":"text-gray-500",children:p.role==="user"?"User":p.role==="manager"?"Manager":p.role==="supervisor"?"Supervisor":p.role==="employee"?"Employee":p.role==="viewer"?"Viewer":p.role==="other"?"Other":"Select a role"})}),n.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:n.jsx(Zt,{className:`w-4 h-4 text-gray-400 transition-transform ${G?"rotate-180":""}`})}),G&&n.jsx("div",{className:"absolute z-20 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg overflow-hidden",children:[{value:"user",label:"User"},{value:"manager",label:"Manager"},{value:"supervisor",label:"Supervisor"},{value:"employee",label:"Employee"},{value:"viewer",label:"Viewer"},{value:"other",label:"Other"}].map((E,F,X)=>n.jsxs("button",{type:"button",onClick:()=>{f({...p,role:E.value}),De(!1)},className:Ir(p.role===E.value,F===0,F===X.length-1),children:[n.jsx("span",{children:E.label}),p.role===E.value&&n.jsx(Gt,{className:"w-4 h-4 text-primary-600"})]},E.value))})]}),p.role==="other"&&n.jsx("div",{className:"mt-2",children:n.jsx("input",{type:"text",name:"customRole",placeholder:"Specify custom role",className:"block w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors",onChange:E=>f(F=>({...F,role:E.target.value}))})})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[n.jsx("button",{onClick:()=>y(!1),className:"btn btn-secondary",children:"Cancel"}),n.jsx("button",{onClick:lp,disabled:!p.name||!p.email||!p.company_id,className:"btn btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:"Create User"})]})]})}),N&&tn&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-4",children:n.jsx(Ho,{className:"h-6 w-6 text-green-600"})}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"User Created Successfully!"}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Welcome email has been sent with login credentials."})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"User Details"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Name:"})," ",tn.name]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Email:"})," ",tn.email]}),tn.companyName&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Company:"})," ",tn.companyName]})]})]}),n.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"w-5 h-5 bg-green-100 rounded-full flex items-center justify-center",children:n.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full"})})}),n.jsx("p",{className:"text-sm text-green-800",children:"A welcome email with login credentials has been sent to the user. They should check their email and set their password."})]})}),n.jsx("div",{className:"flex justify-end",children:n.jsx("button",{onClick:()=>{x(!1),Ji(null)},className:"btn btn-primary",children:"Done"})})]})}),w&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Bulk Add Users"}),n.jsx("button",{onClick:()=>_(!1),className:"text-gray-400 hover:text-gray-600",children:n.jsx(Bt,{className:"w-6 h-6"})})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium mb-3",children:"Choose Input Method"}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload CSV File"}),n.jsx("div",{className:"flex items-center space-x-3",children:n.jsx("input",{type:"file",accept:".csv",onChange:dp,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary-50 file:text-primary-700 hover:file:bg-primary-100"})}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"CSV format: email,name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Manual Input (comma-separated)"}),n.jsx("textarea",{value:K,onChange:E=>{Fe(E.target.value),nd(E.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:`email1@example.com, John Doe
email2@example.com, Jane Smith
email3@example.com, Bob Johnson`,rows:6}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Format: email, name (one per line)"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium mb-3",children:"Common Settings"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company"}),n.jsxs("div",{className:"relative",ref:q,children:[n.jsxs("button",{type:"button",onClick:()=>R(!Se),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white text-left flex items-center justify-between",children:[n.jsx("span",{className:re?"text-gray-900":"text-gray-500",children:re?((id=r.find(E=>E.id===re))==null?void 0:id.name)||"Unknown Company":"Select a company"}),n.jsx(Zt,{className:`w-4 h-4 text-gray-400 transition-transform ${Se?"rotate-180":""}`})]}),Se&&n.jsx("div",{className:"absolute z-20 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-auto",children:r.map((E,F)=>n.jsxs("button",{type:"button",onClick:()=>{_e(E.id),R(!1)},className:Ir(re===E.id,F===0,F===r.length-1),children:[n.jsx("span",{className:"truncate",children:E.name}),re===E.id&&n.jsx(Gt,{className:"w-4 h-4 text-primary-600"})]},E.id))})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),n.jsxs("div",{className:"relative",ref:j,children:[n.jsxs("button",{type:"button",onClick:()=>V(!I),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white text-left flex items-center justify-between",children:[n.jsx("span",{className:"text-gray-900",children:Ce==="user"?"User":"Master Admin"}),n.jsx(Zt,{className:`w-4 h-4 text-gray-400 transition-transform ${I?"rotate-180":""}`})]}),I&&n.jsx("div",{className:"absolute z-20 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg overflow-hidden",children:[{value:"user",label:"User"},{value:"masterAdmin",label:"Master Admin"}].map((E,F,X)=>n.jsxs("button",{type:"button",onClick:()=>{ze(E.value),V(!1)},className:Ir(Ce===E.value,F===0,F===X.length-1),children:[n.jsx("span",{children:E.label}),Ce===E.value&&n.jsx(Gt,{className:"w-4 h-4 text-primary-600"})]},E.value))})]})]})]})]}),qt.length>0&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-medium mb-3",children:["Preview (",qt.length," users)"]}),n.jsx("div",{className:"bg-gray-50 rounded-lg p-4 max-h-48 overflow-y-auto",children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:qt.map((E,F)=>n.jsxs("div",{className:"text-sm",children:[n.jsx("span",{className:"font-medium",children:E.name}),n.jsxs("span",{className:"text-gray-500 ml-2",children:["(",E.email,")"]})]},F))})})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[n.jsx("button",{onClick:()=>_(!1),className:"btn btn-secondary",children:"Cancel"}),n.jsxs("button",{onClick:op,disabled:qt.length===0||!re,className:"btn btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:["Create ",qt.length," Users"]})]})]})}),$&&et&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center mr-3",children:n.jsx(wt,{className:"w-5 h-5 text-red-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete User"}),n.jsx("p",{className:"text-sm text-gray-500",children:"This action cannot be undone"})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("p",{className:"text-gray-700 mb-4",children:"Are you sure you want to delete this user? This will permanently remove their account and all associated data."}),n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx(td,{className:"w-5 h-5 text-red-600 mt-0.5 mr-3 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium text-red-800 mb-1",children:"User Details"}),n.jsxs("p",{className:"text-sm text-red-700",children:[n.jsx("strong",{children:"Name:"})," ",et.name]}),n.jsxs("p",{className:"text-sm text-red-700",children:[n.jsx("strong",{children:"Email:"})," ",et.email]})]})]})})]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx("button",{onClick:()=>{ce(!1),k(null)},disabled:Z,className:"btn btn-secondary disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:hp,disabled:Z,className:"px-4 py-2 bg-red-600 text-white hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg text-sm font-medium transition-colors duration-150",children:Z?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2 inline-block"}),"Deleting..."]}):"Delete User"})]})]})})})]})},R1=()=>{const t=Qs(),[e,r]=g.useState([]),[s,a]=g.useState([]),[i,l]=g.useState(""),[o,c]=g.useState("all"),[d,h]=g.useState(!0),[u,m]=g.useState(!1),[y,w]=g.useState(!1),[_,N]=g.useState(null),[x,p]=g.useState(""),[f,b]=g.useState(!1),[v,C]=g.useState(!1),[P,U]=g.useState(null),[J,W]=g.useState("active"),[G,De]=g.useState([]),[Se,R]=g.useState(!1),I=g.useRef(null),[V,H]=g.useState({name:"",subscription_plan:"basic",max_users:5});g.useEffect(()=>{S()},[]),g.useEffect(()=>{J==="deleted"&&D()},[J]),g.useEffect(()=>{q()},[e,i,o]),g.useEffect(()=>{const $=ce=>{I.current&&!I.current.contains(ce.target)&&R(!1)};return document.addEventListener("mousedown",$),()=>document.removeEventListener("mousedown",$)},[]);const S=async()=>{try{h(!0);const $=await pe.companies.getCompanies();r($)}catch($){console.error("Error loading companies:",$)}finally{h(!1)}},D=async()=>{try{const $=await pe.companies.getDeletedCompanies();De($)}catch($){console.error("Error loading deleted companies:",$)}},q=()=>{let $=e;i&&($=$.filter(ce=>ce.name.toLowerCase().includes(i.toLowerCase()))),o!=="all"&&($=$.filter(ce=>ce.subscription_plan===o)),a($)},j=($,ce,et)=>{let k="w-full px-3 py-2 text-left hover:bg-primary-50 hover:text-primary-700 transition-colors duration-150 flex items-center justify-between";return ce||(k+=" border-t border-gray-100"),ce&&(k+=" rounded-t-lg"),et&&(k+=" rounded-b-lg"),k},K=async()=>{try{const $={name:V.name};V.subscription_plan&&V.subscription_plan!=="basic"&&($.subscription_plan=V.subscription_plan),V.max_users&&V.max_users!==5&&($.max_users=V.max_users),await pe.companies.createCompany($),m(!1),H({name:"",subscription_plan:"basic",max_users:5}),S()}catch($){console.error("Error creating company:",$)}},Fe=$=>{N($),p(""),w(!0)},re=async()=>{if(!(!_||x!==_.name)){b(!0);try{await pe.companies.softDeleteCompany(_.id),U(_),C(!0),setTimeout(()=>C(!1),3e4),S(),w(!1),N(null),p("")}catch($){console.error("Error deleting company:",$)}finally{b(!1)}}},_e=async()=>{if(P)try{await pe.companies.restoreCompany(P.id),C(!1),U(null),S()}catch($){console.error("Error restoring company:",$)}},Ce=async $=>{try{await pe.companies.restoreCompany($.id),S(),D()}catch(ce){console.error("Error restoring company:",ce)}},ze=$=>{const ce={basic:"bg-green-100 text-green-800",premium:"bg-purple-100 text-purple-800",enterprise:"bg-green-200 text-green-900"};return n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${ce[$]||ce.basic}`,children:$})};return d?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):n.jsxs("div",{className:"p-6",children:[n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Companies"}),n.jsx("p",{className:"text-gray-600",children:"Manage company accounts and subscriptions"})]}),n.jsxs("button",{onClick:()=>m(!0),className:"btn-primary",children:[n.jsx(Ws,{className:"w-4 h-4 mr-2"}),"Add Company"]})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[n.jsx("div",{className:"bg-white p-4 rounded-lg border",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(rt,{className:"w-8 h-8 text-green-600"}),n.jsxs("div",{className:"ml-3",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Companies"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.length})]})]})}),n.jsx("div",{className:"bg-white p-4 rounded-lg border",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Ie,{className:"w-8 h-8 text-green-600"}),n.jsxs("div",{className:"ml-3",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.reduce(($,ce)=>$+(ce.max_users||5),0)})]})]})}),n.jsx("div",{className:"bg-white p-4 rounded-lg border",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(rt,{className:"w-8 h-8 text-purple-600"}),n.jsxs("div",{className:"ml-3",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Premium Plans"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.filter($=>$.subscription_plan==="premium").length})]})]})}),n.jsx("div",{className:"bg-white p-4 rounded-lg border",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Ie,{className:"w-8 h-8 text-orange-600"}),n.jsxs("div",{className:"ml-3",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Enterprise Plans"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.filter($=>$.subscription_plan==="enterprise").length})]})]})})]}),n.jsx("div",{className:"mb-6",children:n.jsx("div",{className:"border-b border-gray-200",children:n.jsxs("nav",{className:"-mb-px flex space-x-8",children:[n.jsxs("button",{onClick:()=>W("active"),className:`py-2 px-1 border-b-2 font-medium text-sm ${J==="active"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Active Companies (",e.length,")"]}),n.jsxs("button",{onClick:()=>W("deleted"),className:`py-2 px-1 border-b-2 font-medium text-sm ${J==="deleted"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Recently Deleted (",G.length,")"]})]})})}),n.jsx("div",{className:"bg-white p-4 rounded-lg border",children:n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"flex-1 min-w-64",children:n.jsxs("div",{className:"relative",children:[n.jsx(la,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),n.jsx("input",{type:"text",placeholder:"Search companies...",value:i,onChange:$=>l($.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})}),n.jsxs("div",{className:"relative",ref:I,children:[n.jsxs("button",{type:"button",onClick:()=>R(!Se),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white text-left flex items-center justify-between min-w-[140px]",children:[n.jsx("span",{className:"text-gray-900",children:o==="all"?"All Plans":o==="basic"?"Basic":o==="premium"?"Premium":"Enterprise"}),n.jsx(Zt,{className:`w-4 h-4 text-gray-400 transition-transform ${Se?"rotate-180":""}`})]}),Se&&n.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg overflow-hidden",children:[{value:"all",label:"All Plans"},{value:"basic",label:"Basic"},{value:"premium",label:"Premium"},{value:"enterprise",label:"Enterprise"}].map(($,ce,et)=>n.jsxs("button",{onClick:()=>{c($.value),R(!1)},className:j(o===$.value,ce===0,ce===et.length-1),children:[n.jsx("span",{children:$.label}),o===$.value&&n.jsx(Gt,{className:"w-4 h-4 text-primary-600"})]},$.value))})]})]})}),J==="active"&&n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-6",children:s.map($=>n.jsx("div",{className:"bg-white rounded-lg border hover:shadow-md transition-shadow cursor-pointer",onClick:()=>t(`/companies/${$.id}`),children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(rt,{className:"w-8 h-8 text-green-600 mr-3"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:$.name}),n.jsxs("p",{className:"text-sm text-gray-500",children:["ID: ",$.id.slice(0,8),"..."]})]})]}),n.jsx("div",{className:"flex items-center space-x-2",children:ze($.subscription_plan||"basic")})]}),n.jsxs("div",{className:"space-y-3 mb-4",children:[n.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[n.jsx(Ie,{className:"w-4 h-4 mr-2"}),"Max Users: ",$.max_users||5]}),n.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[n.jsx(rt,{className:"w-4 h-4 mr-2"}),"Plan: ",$.subscription_plan||"basic"]})]}),n.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[n.jsxs("span",{className:"text-xs text-gray-500",children:["Created ",new Date($.created_at).toLocaleDateString()]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>Fe($),className:"text-red-600 hover:text-red-800 p-1 rounded hover:bg-red-50",title:"Delete Company",children:n.jsx(wt,{className:"w-4 h-4"})}),n.jsx("button",{className:"text-gray-400 hover:text-gray-600",children:n.jsx(g1,{className:"w-4 h-4"})})]})]})]})},$.id))}),J==="deleted"&&n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-6",children:G.map($=>n.jsx("div",{className:"bg-white rounded-lg border border-red-200 hover:shadow-md transition-shadow",children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(rt,{className:"w-8 h-8 text-red-600 mr-3"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:$.name}),n.jsxs("p",{className:"text-sm text-gray-500",children:["ID: ",$.id.slice(0,8),"..."]})]})]}),n.jsx("div",{className:"flex items-center space-x-2",children:n.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded-full",children:"Deleted"})})]}),n.jsxs("div",{className:"space-y-3 mb-4",children:[n.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[n.jsx(Ie,{className:"w-4 h-4 mr-2"}),"Max Users: ",$.max_users||5]}),n.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[n.jsx(rt,{className:"w-4 h-4 mr-2"}),"Plan: ",$.subscription_plan||"basic"]}),n.jsxs("div",{className:"flex items-center text-sm text-red-600",children:[n.jsx(wt,{className:"w-4 h-4 mr-2"}),"Deleted: ",$.deleted_at?new Date($.deleted_at).toLocaleDateString():"Unknown"]})]}),n.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[n.jsxs("span",{className:"text-xs text-gray-500",children:["Created ",new Date($.created_at).toLocaleDateString()]}),n.jsx("div",{className:"flex items-center space-x-2",children:n.jsx("button",{onClick:()=>Ce($),className:"text-green-600 hover:text-green-800 p-1 rounded hover:bg-green-50",title:"Restore Company",children:n.jsx(Gt,{className:"w-4 h-4"})})})]})]})},$.id))}),(J==="active"&&s.length===0||J==="deleted"&&G.length===0)&&!d&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx(rt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:J==="active"?"No companies found":"No deleted companies found"}),n.jsx("p",{className:"text-gray-600",children:J==="active"?"Try adjusting your search or filters.":"Deleted companies will appear here for 30 days."})]}),u&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:"Create New Company"}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("input",{type:"text",placeholder:"Company Name *",value:V.name,onChange:$=>H({...V,name:$.target.value}),className:"input w-full",required:!0}),n.jsxs("select",{value:V.subscription_plan,onChange:$=>H({...V,subscription_plan:$.target.value}),className:"input w-full",children:[n.jsx("option",{value:"basic",children:"Basic (default)"}),n.jsx("option",{value:"premium",children:"Premium"}),n.jsx("option",{value:"enterprise",children:"Enterprise"})]}),n.jsx("input",{type:"number",placeholder:"Max Users (default: 5)",value:V.max_users,onChange:$=>H({...V,max_users:parseInt($.target.value)||5}),className:"input w-full",min:"1"}),n.jsx("p",{className:"text-xs text-gray-500",children:"* Company name is required. Subscription plan and max users will use defaults if not specified."})]}),n.jsxs("div",{className:"flex space-x-3 mt-6",children:[n.jsx("button",{onClick:()=>m(!1),className:"btn-secondary flex-1",children:"Cancel"}),n.jsx("button",{onClick:K,disabled:!V.name.trim(),className:"btn-primary flex-1 disabled:opacity-50",children:"Create Company"})]})]})}),y&&_&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center mr-3",children:n.jsx(wt,{className:"w-5 h-5 text-red-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Company"}),n.jsx("p",{className:"text-sm text-gray-500",children:"This action can be undone within 30 days"})]})]}),n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx(wi,{className:"w-5 h-5 text-red-600 mt-0.5 mr-3 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium text-red-800",children:"Warning"}),n.jsxs("p",{className:"text-sm text-red-700 mt-1",children:['This will delete the company "',_.name,'" and all associated users. The company will be moved to a "Recently Deleted" section for 30 days.']})]})]})}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type the company name to confirm deletion:"}),n.jsx("input",{type:"text",value:x,onChange:$=>p($.target.value),placeholder:_.name,className:"input w-full",autoFocus:!0})]}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsx("button",{onClick:()=>{w(!1),N(null),p("")},className:"btn-secondary flex-1",disabled:f,children:"Cancel"}),n.jsx("button",{onClick:re,disabled:x!==_.name||f,className:"btn-danger flex-1 disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Deleting...":"Delete Company"})]})]})}),v&&P&&n.jsxs("div",{className:"fixed top-4 right-4 bg-red-600 text-white px-6 py-3 rounded-lg shadow-lg z-50 flex items-center space-x-4",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(wt,{className:"w-5 h-5 mr-2"}),n.jsxs("span",{children:['Company "',P.name,'" deleted']})]}),n.jsx("button",{onClick:_e,className:"bg-white text-red-600 px-3 py-1 rounded text-sm font-medium hover:bg-gray-100",children:"Undo"}),n.jsx("button",{onClick:()=>C(!1),className:"text-white hover:text-gray-200",children:""})]})]})},D1=()=>{const{id:t}=Ex(),e=Qs(),[r,s]=g.useState(null),[a,i]=g.useState([]),[l,o]=g.useState(!0),[c,d]=g.useState(!1),[h,u]=g.useState(""),[m,y]=g.useState(null),[w,_]=g.useState(null);g.useEffect(()=>{t&&N()},[t]);const N=async()=>{try{o(!0);const v=await pe.companies.getCompany(t);v&&(s(v),u(v.name));const P=(await pe.users.getUsersByCompany(t)).map(U=>({id:U.id,name:U.name,email:U.email,role:U.role||"user",status:U.status||"offline",created_at:U.created_at}));i(P)}catch(v){console.error("Error loading company data:",v)}finally{o(!1)}},x=async()=>{if(!(!r||!h.trim()))try{await pe.companies.updateCompany(r.id,{name:h}),s({...r,name:h}),d(!1)}catch(v){console.error("Error updating company name:",v)}},p=async(v,C)=>{try{await pe.users.updateUserRole(v,C),i(a.map(P=>P.id===v?{...P,role:C}:P)),y(null),_(null)}catch(P){console.error("Error updating user role:",P)}},f=async(v,C)=>{if(confirm(`Are you sure you want to delete ${C}?`))try{await pe.users.deleteUser(v),i(a.filter(P=>P.id!==v))}catch(P){console.error("Error deleting user:",P),alert("Failed to delete user")}},b=v=>{switch(v.toLowerCase()){case"admin":return"bg-red-100 text-red-800";case"manager":return"bg-blue-100 text-blue-800";case"member":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return l?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):r?n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("button",{onClick:()=>e("/companies"),className:"flex items-center text-gray-600 hover:text-gray-900 mb-4",children:[n.jsx(o1,{className:"w-4 h-4 mr-2"}),"Back to Companies"]}),n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(rt,{className:"w-10 h-10 text-green-600 mr-4"}),n.jsxs("div",{children:[c?n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"text",value:h,onChange:v=>u(v.target.value),className:"text-2xl font-bold border border-gray-300 rounded px-2 py-1 mr-2",autoFocus:!0}),n.jsx("button",{onClick:x,className:"text-green-600 hover:text-green-800 mr-2",children:n.jsx(rp,{className:"w-5 h-5"})}),n.jsx("button",{onClick:()=>{d(!1),u(r.name)},className:"text-red-600 hover:text-red-800",children:n.jsx(Bt,{className:"w-5 h-5"})})]}):n.jsxs("div",{className:"flex items-center",children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:r.name}),n.jsx("button",{onClick:()=>d(!0),className:"ml-3 text-gray-600 hover:text-gray-900",children:n.jsx(_i,{className:"w-5 h-5"})})]}),n.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["ID: ",r.id]})]})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[n.jsxs("div",{className:"bg-white p-6 rounded-lg border",children:[n.jsxs("div",{className:"flex items-center mb-2",children:[n.jsx(rt,{className:"w-5 h-5 text-green-600 mr-2"}),n.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"Subscription Plan"})]}),n.jsx("p",{className:"text-2xl font-bold text-gray-900 capitalize",children:r.subscription_plan||"basic"})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg border",children:[n.jsxs("div",{className:"flex items-center mb-2",children:[n.jsx(Ie,{className:"w-5 h-5 text-green-600 mr-2"}),n.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"Max Users"})]}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.max_users||5})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg border",children:[n.jsxs("div",{className:"flex items-center mb-2",children:[n.jsx(Ie,{className:"w-5 h-5 text-green-600 mr-2"}),n.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"Current Users"})]}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.length})]})]}),n.jsxs("div",{className:"bg-white rounded-lg border",children:[n.jsx("div",{className:"p-6 border-b border-gray-200",children:n.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Company Users (",a.length,")"]})}),n.jsxs("div",{className:"overflow-x-auto",children:[n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Role"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Joined"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:a.map(v=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("div",{className:"text-sm font-medium text-gray-900",children:v.name})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("div",{className:"text-sm text-gray-600",children:v.email})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m===v.id?n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>_(v.id),className:"flex items-center text-sm px-2 py-1 border border-gray-300 rounded",children:[n.jsx("span",{className:"mr-2 capitalize",children:v.role}),n.jsx(Zt,{className:"w-4 h-4"})]}),w===v.id&&n.jsx("div",{className:"absolute z-10 mt-1 bg-white border border-gray-300 rounded shadow-lg",children:["admin","manager","member"].map(C=>n.jsx("button",{onClick:()=>p(v.id,C),className:"block w-full text-left px-4 py-2 hover:bg-gray-100",children:n.jsx("span",{className:"capitalize",children:C})},C))})]}):n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${b(v.role)}`,children:v.role})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${v.status==="online"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:v.status})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(v.created_at).toLocaleDateString()}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[m!==v.id&&n.jsx("button",{onClick:()=>y(v.id),className:"text-blue-600 hover:text-blue-900",children:n.jsx(_i,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>f(v.id,v.name),className:"text-red-600 hover:text-red-900",children:n.jsx(wt,{className:"w-4 h-4"})})]})})]},v.id))})]}),a.length===0&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Ie,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"No users found for this company"})]})]})]})]}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx("p",{className:"text-gray-600",children:"Company not found"}),n.jsx("button",{onClick:()=>e("/companies"),className:"btn-primary mt-4",children:"Back to Companies"})]})},O1=()=>{const[t,e]=g.useState("overview"),r={currentVersion:"2.1.0",totalDownloads:"15,847",activeUsers:"8,923",lastUpdate:"2024-01-10T15:30:00Z"},s=[{version:"2.1.0",date:"2024-01-10",type:"feature",description:"Enhanced chat functionality and improved performance",status:"released"},{version:"2.0.5",date:"2023-12-15",type:"bugfix",description:"Fixed authentication issues and minor UI improvements",status:"released"},{version:"2.0.0",date:"2023-11-20",type:"major",description:"Complete UI redesign and new event management features",status:"released"}],a=[{platform:"Windows",icon:"",steps:["Download the installer from the link below","Run the installer as administrator","Follow the installation wizard","Launch OnTimely from the Start menu"],downloadLink:"#",systemRequirements:"Windows 10 or later, 4GB RAM, 500MB disk space"},{platform:"macOS",icon:"",steps:["Download the .dmg file from the link below","Open the .dmg file and drag OnTimely to Applications","Open OnTimely from Applications folder","Allow necessary permissions when prompted"],downloadLink:"#",systemRequirements:"macOS 11.0 or later, 4GB RAM, 500MB disk space"},{platform:"Linux",icon:"",steps:["Download the .AppImage file from the link below","Make the file executable: chmod +x OnTimely.AppImage","Run the AppImage file","Optional: Move to /usr/local/bin for system-wide access"],downloadLink:"#",systemRequirements:"Ubuntu 20.04+ or equivalent, 4GB RAM, 500MB disk space"}],i=[{issue:"App won't start",solution:"Check if your system meets minimum requirements and try running as administrator",severity:"high",category:"startup"},{issue:"Authentication errors",solution:"Clear app cache and re-authenticate with your credentials",severity:"medium",category:"auth"},{issue:"Slow performance",solution:"Close other applications and check available system resources",severity:"low",category:"performance"},{issue:"Update failed",solution:"Download the latest version manually from our website",severity:"medium",category:"updates"}],l=[{id:"overview",label:"Overview",icon:As},{id:"installation",label:"Installation",icon:An},{id:"troubleshooting",label:"Troubleshooting",icon:wi},{id:"updates",label:"Updates",icon:Ni},{id:"documentation",label:"Documentation",icon:Yn}],o=d=>{const h={high:"bg-red-100 text-red-800",medium:"bg-yellow-100 text-yellow-800",low:"bg-green-100 text-green-800"};return h[d]||h.low},c=d=>new Date(d).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Desktop App Support"}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Manage desktop app installation, updates, and provide user support"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[n.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:n.jsx(Ko,{className:"h-6 w-6 text-green-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Current Version"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.currentVersion})]})]})}),n.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:n.jsx(An,{className:"h-6 w-6 text-green-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Downloads"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.totalDownloads})]})]})}),n.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:n.jsx(Ie,{className:"h-6 w-6 text-purple-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Users"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.activeUsers})]})]})}),n.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:n.jsx(Pn,{className:"h-6 w-6 text-orange-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Last Update"}),n.jsx("p",{className:"text-lg font-bold text-gray-900",children:c(r.lastUpdate)})]})]})})]}),n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("div",{className:"border-b border-gray-200",children:n.jsx("nav",{className:"flex space-x-8 px-6",children:l.map(d=>{const h=d.icon;return n.jsxs("button",{onClick:()=>e(d.id),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 ${t===d.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[n.jsx(h,{className:"h-4 w-4"}),d.label]},d.id)})})}),n.jsxs("div",{className:"p-6",children:[t==="overview"&&n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Updates"}),n.jsx("div",{className:"space-y-4",children:s.map((d,h)=>n.jsxs("div",{className:"flex items-start gap-4 p-4 bg-gray-50 rounded-lg",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:n.jsx(Ko,{className:"h-5 w-5 text-green-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsxs("span",{className:"font-medium text-gray-900",children:["v",d.version]}),n.jsx("span",{className:"text-sm text-gray-500",children:d.date}),n.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${d.type==="major"?"bg-purple-100 text-purple-800":(d.type==="feature","bg-green-100 text-green-800")}`,children:d.type})]}),n.jsx("p",{className:"text-gray-600",children:d.description})]}),n.jsx(Bs,{className:"h-5 w-5 text-green-500 mt-1"})]},h))})]})}),t==="installation"&&n.jsx("div",{className:"space-y-6",children:n.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:a.map((d,h)=>n.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[n.jsxs("div",{className:"text-center mb-4",children:[n.jsx("div",{className:"text-4xl mb-2",children:d.icon}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:d.platform})]}),n.jsx("div",{className:"space-y-3 mb-4",children:d.steps.map((u,m)=>n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-primary-100 text-primary-600 rounded-full flex items-center justify-center text-sm font-medium",children:m+1}),n.jsx("p",{className:"text-sm text-gray-600",children:u})]},m))}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("button",{className:"btn-primary w-full",children:[n.jsx(An,{className:"h-4 w-4"}),"Download for ",d.platform]}),n.jsxs("div",{className:"text-xs text-gray-500",children:[n.jsx("strong",{children:"System Requirements:"})," ",d.systemRequirements]})]})]},h))})}),t==="troubleshooting"&&n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Common Issues & Solutions"}),n.jsx("div",{className:"space-y-4",children:i.map((d,h)=>n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsx("h4",{className:"font-medium text-gray-900",children:d.issue}),n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${o(d.severity)}`,children:d.severity})]}),n.jsx("p",{className:"text-gray-600 text-sm",children:d.solution})]},h))})]})}),t==="updates"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Update Management"}),n.jsx("p",{className:"text-gray-600",children:"Manage app updates and release schedules"})]}),n.jsxs("button",{className:"btn-primary",children:[n.jsx(Ni,{className:"h-4 w-4"}),"Check for Updates"]})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Update Status"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Bs,{className:"h-5 w-5 text-green-500"}),n.jsxs("span",{className:"text-gray-600",children:["Your app is up to date (v",r.currentVersion,")"]})]})]})]}),t==="documentation"&&n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Documentation & Resources"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-gray-300 transition-colors cursor-pointer",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Vo,{className:"h-8 w-8 text-green-500"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-gray-900",children:"User Manual"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Complete guide to using OnTimely"})]})]})}),n.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-gray-300 transition-colors cursor-pointer",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(j1,{className:"h-8 w-8 text-green-500"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-gray-900",children:"Video Tutorials"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Step-by-step video guides"})]})]})}),n.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-gray-300 transition-colors cursor-pointer",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(rd,{className:"h-8 w-8 text-purple-500"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-gray-900",children:"Configuration Guide"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Advanced settings and customization"})]})]})}),n.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-gray-300 transition-colors cursor-pointer",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(wi,{className:"h-8 w-8 text-orange-500"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-gray-900",children:"Troubleshooting"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Common issues and solutions"})]})]})})]})]})})]})]})]})},U1=()=>{const[t,e]=g.useState("30d"),[r,s]=g.useState("users"),a=[{value:"7d",label:"Last 7 days"},{value:"30d",label:"Last 30 days"},{value:"90d",label:"Last 90 days"},{value:"1y",label:"Last year"}],i=[{value:"users",label:"User Activity"},{value:"events",label:"Event Creation"},{value:"engagement",label:"User Engagement"},{value:"performance",label:"Performance Metrics"}],l=[{title:"Total Users",value:"12,847",change:"+15%",changeType:"positive",icon:Ie,color:"bg-green-500"},{title:"Active Sessions",value:"8,234",change:"+8%",changeType:"positive",icon:zs,color:"bg-green-500"},{title:"Events Created",value:"2,156",change:"+23%",changeType:"positive",icon:c1,color:"bg-purple-500"}],o=[{feature:"Event Creation",usage:85,change:"+12%"},{feature:"Guest Management",usage:72,change:"+8%"},{feature:"Chat System",usage:68,change:"+15%"},{feature:"Calendar View",usage:61,change:"+5%"},{feature:"File Sharing",usage:54,change:"+18%"}],c=[{metric:"Page Load Time",value:"1.2s",status:"good",target:"<2s"},{metric:"API Response Time",value:"180ms",status:"good",target:"<200ms"},{metric:"Database Query Time",value:"45ms",status:"excellent",target:"<50ms"},{metric:"Memory Usage",value:"68%",status:"warning",target:"<70%"},{metric:"CPU Usage",value:"45%",status:"good",target:"<60%"}],d=u=>{const m={excellent:"text-green-600",good:"text-green-600",warning:"text-yellow-600",critical:"text-red-600"};return m[u]||m.good},h=u=>{const m={excellent:"bg-green-100",good:"bg-green-100",warning:"bg-yellow-100",critical:"bg-red-100"};return m[u]||m.good};return n.jsxs("div",{className:"p-6",children:[n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Analytics & Monitoring"}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Track user activity, system performance, and usage patterns"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("select",{value:t,onChange:u=>e(u.target.value),className:"input",children:a.map(u=>n.jsx("option",{value:u.value,children:u.label},u.value))}),n.jsx("select",{value:r,onChange:u=>s(u.target.value),className:"input",children:i.map(u=>n.jsx("option",{value:u.value,children:u.label},u.value))})]})]})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:l.map((u,m)=>{const y=u.icon;return n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:u.title}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u.value})]}),n.jsx("div",{className:`p-3 rounded-lg ${u.color}`,children:n.jsx(y,{className:"h-6 w-6 text-white"})})]}),n.jsxs("div",{className:"mt-4 flex items-center",children:[n.jsx("span",{className:`text-sm font-medium ${u.changeType==="positive"?"text-green-600":"text-red-600"}`,children:u.change}),n.jsx("span",{className:"text-sm text-gray-600 ml-2",children:"from last period"})]})]},m)})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Feature Usage"}),n.jsx("div",{className:"space-y-4",children:o.map((u,m)=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("span",{className:"text-sm font-medium text-gray-900",children:u.feature}),n.jsxs("span",{className:"text-sm text-gray-500",children:[u.usage,"%"]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-primary-600 h-2 rounded-full transition-all duration-300",style:{width:`${u.usage}%`}})})]}),n.jsx("span",{className:"text-sm text-green-600 ml-3",children:u.change})]},m))})]}),n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Performance"}),n.jsx("div",{className:"space-y-4",children:c.map((u,m)=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:u.metric}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Target: ",u.target]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:`text-lg font-bold ${d(u.status)}`,children:u.value}),n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${h(u.status)} ${d(u.status)}`,children:u.status})]})]},m))})]})]}),n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Detailed Analytics"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-gray-900",children:"Geographic Distribution"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Top regions: US (45%), EU (32%), Asia (23%)"})]}),n.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-gray-900",children:"Platform Usage"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Desktop: 65%, Mobile: 25%, Tablet: 10%"})]}),n.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[n.jsx(zs,{className:"h-8 w-8 text-purple-500 mx-auto mb-2"}),n.jsx("h4",{className:"font-medium text-gray-900",children:"User Engagement"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Avg. daily active users: 8,234"})]})]})]}),n.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Export & Reports"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Generate detailed reports and export data"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{className:"btn-outline",children:[n.jsx(bi,{className:"h-4 w-4"}),"Generate Report"]}),n.jsx("button",{className:"btn-primary",children:"Export Data"})]})]})})]})},$1=()=>{const[t,e]=g.useState("overview"),r={overall:"excellent",uptime:"99.98%",activeUsers:"8,234",serverLoad:"45%"},s=[{name:"CPU Usage",value:"45%",status:"good",icon:d1,color:"bg-green-500"},{name:"Memory Usage",value:"68%",status:"warning",icon:Vu,color:"bg-yellow-500"},{name:"Disk Usage",value:"72%",status:"warning",icon:Vu,color:"bg-orange-500"},{name:"Network",value:"32%",status:"excellent",icon:y1,color:"bg-green-500"}],a=[{id:"INC-001",type:"Database Slowdown",severity:"medium",status:"resolved",description:"Database queries taking longer than expected",createdAt:"2024-01-15T10:30:00Z",resolvedAt:"2024-01-15T11:45:00Z"},{id:"INC-002",type:"API Rate Limiting",severity:"low",status:"resolved",description:"Temporary rate limiting due to high traffic",createdAt:"2024-01-14T16:20:00Z",resolvedAt:"2024-01-14T17:10:00Z"}],i=[{title:"Bulk User Creation",description:"Create multiple user accounts from CSV file",icon:Ie,action:()=>console.log("Bulk user creation"),color:"bg-green-500"},{title:"Company Management",description:"Manage company accounts and settings",icon:rt,action:()=>console.log("Company management"),color:"bg-green-500"},{title:"System Backup",description:"Create system backup and restore points",icon:Dl,action:()=>console.log("System backup"),color:"bg-purple-500"},{title:"Security Audit",description:"Run security audit and vulnerability scan",icon:Va,action:()=>console.log("Security audit"),color:"bg-red-500"}],l=[{id:"overview",label:"System Overview",icon:zs},{id:"users",label:"Bulk User Management",icon:Ie},{id:"companies",label:"Company Management",icon:rt},{id:"monitoring",label:"System Monitoring",icon:Ku},{id:"security",label:"Security & Access",icon:Va},{id:"backup",label:"Backup & Recovery",icon:Dl}],o=u=>{const m={excellent:"text-green-600",good:"text-green-600",warning:"text-yellow-600",critical:"text-red-600"};return m[u]||m.good},c=u=>{const m={excellent:"bg-green-100",good:"bg-green-100",warning:"bg-yellow-100",critical:"bg-red-600"};return m[u]||m.good},d=u=>{const m={low:"bg-green-100 text-green-800",medium:"bg-yellow-100 text-yellow-800",high:"bg-red-100 text-red-800",critical:"bg-red-600 text-white"};return m[u]||m.low},h=u=>new Date(u).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Tools"}),n.jsx("p",{className:"text-gray-600 mt-2",children:"System administration, monitoring, and management tools"})]}),n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm mb-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"System Health Overview"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${c(r.overall)} ${o(r.overall)}`,children:r.overall}),n.jsxs("button",{className:"btn-outline",children:[n.jsx(Ni,{className:"h-4 w-4"}),"Refresh"]})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:s.map((u,m)=>{const y=u.icon;return n.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[n.jsx("div",{className:`p-3 rounded-lg ${u.color} inline-block mb-3`,children:n.jsx(y,{className:"h-6 w-6 text-white"})}),n.jsx("h4",{className:"font-medium text-gray-900",children:u.name}),n.jsx("p",{className:`text-2xl font-bold ${o(u.status)}`,children:u.value}),n.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${c(u.status)} ${o(u.status)}`,children:u.status})]},m)})}),n.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[n.jsx(Ku,{className:"h-8 w-8 text-green-500 mx-auto mb-2"}),n.jsx("h4",{className:"font-medium text-gray-900",children:"Uptime"}),n.jsx("p",{className:"text-2xl font-bold text-green-600",children:r.uptime})]}),n.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[n.jsx(Ie,{className:"h-8 w-8 text-green-500 mx-auto mb-2"}),n.jsx("h4",{className:"font-medium text-gray-900",children:"Active Users"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.activeUsers})]}),n.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[n.jsx(zs,{className:"h-8 w-8 text-orange-500 mx-auto mb-2"}),n.jsx("h4",{className:"font-medium text-gray-900",children:"Server Load"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.serverLoad})]})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:i.map((u,m)=>{const y=u.icon;return n.jsxs("button",{onClick:u.action,className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow text-left",children:[n.jsx("div",{className:`p-3 rounded-lg ${u.color} inline-block mb-4`,children:n.jsx(y,{className:"h-6 w-6 text-white"})}),n.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:u.title}),n.jsx("p",{className:"text-sm text-gray-600",children:u.description})]},m)})}),n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("div",{className:"border-b border-gray-200",children:n.jsx("nav",{className:"flex space-x-8 px-6",children:l.map(u=>{const m=u.icon;return n.jsxs("button",{onClick:()=>e(u.id),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 ${t===u.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[n.jsx(m,{className:"h-4 w-4"}),u.label]},u.id)})})}),n.jsxs("div",{className:"p-6",children:[t==="overview"&&n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Incidents"}),n.jsx("div",{className:"space-y-4",children:a.map(u=>n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-gray-900",children:u.type}),n.jsx("p",{className:"text-sm text-gray-600",children:u.description})]}),n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${d(u.severity)}`,children:u.severity})]}),n.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[n.jsxs("span",{children:["Created: ",h(u.createdAt)]}),u.resolvedAt&&n.jsxs("span",{children:["Resolved: ",h(u.resolvedAt)]}),n.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${u.status==="resolved"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:u.status})]})]},u.id))})]})}),t==="users"&&n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Bulk User Operations"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Import Users"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload CSV File"}),n.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[n.jsx(Rs,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Drag and drop CSV file here, or click to browse"})]})]}),n.jsxs("button",{className:"btn-primary w-full",children:[n.jsx(Rs,{className:"h-4 w-4"}),"Import Users"]})]})]}),n.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Export Users"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Export Format"}),n.jsxs("select",{className:"input",children:[n.jsx("option",{children:"CSV"}),n.jsx("option",{children:"JSON"}),n.jsx("option",{children:"Excel"})]})]}),n.jsxs("button",{className:"btn-outline w-full",children:[n.jsx(An,{className:"h-4 w-4"}),"Export Users"]})]})]})]})]})}),t==="companies"&&n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Company Management"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Create Company"}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("input",{type:"text",placeholder:"Company Name",className:"input"}),n.jsx("input",{type:"email",placeholder:"Admin Email",className:"input"}),n.jsxs("select",{className:"input",children:[n.jsx("option",{children:"Select Plan"}),n.jsx("option",{children:"Basic"}),n.jsx("option",{children:"Professional"}),n.jsx("option",{children:"Enterprise"})]}),n.jsx("button",{className:"btn-primary w-full",children:"Create Company"})]})]}),n.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Bulk Operations"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("button",{className:"btn-outline w-full",children:[n.jsx(Rs,{className:"h-4 w-4"}),"Import Companies"]}),n.jsxs("button",{className:"btn-outline w-full",children:[n.jsx(An,{className:"h-4 w-4"}),"Export Companies"]}),n.jsxs("button",{className:"btn-outline w-full",children:[n.jsx(rd,{className:"h-4 w-4"}),"Bulk Settings Update"]})]})]})]})]})}),t==="monitoring"&&n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Real-time Monitoring"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Performance Metrics"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Response Time"}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:"180ms"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Throughput"}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:"1,250 req/s"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Error Rate"}),n.jsx("span",{className:"text-sm font-medium text-green-600",children:"0.02%"})]})]})]}),n.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"System Alerts"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(Bs,{className:"h-4 w-4 text-green-500"}),n.jsx("span",{className:"text-gray-600",children:"All systems operational"})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(wi,{className:"h-4 w-4 text-yellow-500"}),n.jsx("span",{className:"text-gray-600",children:"Memory usage above 70%"})]})]})]})]})]})}),t==="security"&&n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Security & Access Control"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Access Logs"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Failed Login Attempts"}),n.jsx("span",{className:"font-medium text-red-600",children:"12"})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Suspicious Activities"}),n.jsx("span",{className:"font-medium text-yellow-600",children:"3"})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Last Security Scan"}),n.jsx("span",{className:"font-medium text-gray-900",children:"2 hours ago"})]})]}),n.jsxs("button",{className:"btn-outline w-full mt-4",children:[n.jsx(Va,{className:"h-4 w-4"}),"Run Security Scan"]})]}),n.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"API Keys"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Active API Keys"}),n.jsx("span",{className:"font-medium text-gray-900",children:"24"})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Expired Keys"}),n.jsx("span",{className:"font-medium text-red-600",children:"2"})]})]}),n.jsxs("button",{className:"btn-outline w-full mt-4",children:[n.jsx(Ho,{className:"h-4 w-4"}),"Manage API Keys"]})]})]})]})}),t==="backup"&&n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Backup & Recovery"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"System Backup"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Last Backup"}),n.jsx("span",{className:"font-medium text-gray-900",children:"2 hours ago"})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Backup Size"}),n.jsx("span",{className:"font-medium text-gray-900",children:"2.4 GB"})]}),n.jsxs("button",{className:"btn-primary w-full",children:[n.jsx(Dl,{className:"h-4 w-4"}),"Create Backup"]})]})]}),n.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Recovery Points"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Available:"}),n.jsx("span",{className:"font-medium text-gray-900 ml-2",children:"5 recovery points"})]}),n.jsxs("div",{className:"text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Oldest:"}),n.jsx("span",{className:"font-medium text-gray-900 ml-2",children:"7 days ago"})]})]}),n.jsxs("button",{className:"btn-outline w-full mt-4",children:[n.jsx(Ni,{className:"h-4 w-4"}),"View Recovery Points"]})]})]})]})})]})]})]})},I1=()=>{const[t,e]=g.useState("campaigns"),[r,s]=g.useState([]),[a,i]=g.useState([]),[l,o]=g.useState([]),[c,d]=g.useState(!0),[h,u]=g.useState(!1),[m,y]=g.useState(null),[w,_]=g.useState(!1),[N,x]=g.useState([]),[p,f]=g.useState(null),[b,v]=g.useState(!1),[C,P]=g.useState({totalRevenue:0,activeCampaigns:0,totalImpressions:0,avgCTR:0,hotOpportunities:0,marketOpportunities:0});g.useEffect(()=>{U()},[]);const U=async()=>{d(!0);try{const{data:R}=await L.from("campaigns").select("*").order("created_at",{ascending:!1}),{data:I}=await L.from("market_intelligence").select("*").order("revenue_potential",{ascending:!1}),{data:V}=await L.from("sales_opportunities").select("*").order("likelihood_score",{ascending:!1}),{data:H}=await L.from("discount_codes").select("*").order("created_at",{ascending:!1});s(R||[]),i(I||[]),o(V||[]),x(H||[]);const S=(R||[]).reduce((re,_e)=>re+(_e.monthly_payment_amount||0),0),D=(R||[]).filter(re=>re.status==="active").length,q=(R||[]).reduce((re,_e)=>re+(_e.impressions_count||0),0),j=(R||[]).reduce((re,_e)=>re+(_e.ctr||0),0)/((R==null?void 0:R.length)||1),K=(V||[]).filter(re=>re.priority_level==="hot").length,Fe=(I||[]).filter(re=>re.sales_priority==="high").length;P({totalRevenue:S,activeCampaigns:D,totalImpressions:q,avgCTR:j,hotOpportunities:K,marketOpportunities:Fe})}catch(R){console.error("Error loading dashboard data:",R)}finally{d(!1)}},J=R=>{switch(R){case"premium":return"text-yellow-600 bg-yellow-100";case"standard":return"text-blue-600 bg-blue-100";case"basic":return"text-gray-600 bg-gray-100";default:return"text-gray-600 bg-gray-100"}},W=R=>{switch(R){case"active":return"text-green-600 bg-green-100";case"paused":return"text-yellow-600 bg-yellow-100";case"draft":return"text-gray-600 bg-gray-100";case"ended":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},G=R=>{switch(R){case"hot":case"high":return"text-red-600 bg-red-100";case"warm":case"medium":return"text-yellow-600 bg-yellow-100";case"cold":case"low":return"text-blue-600 bg-blue-100";default:return"text-gray-600 bg-gray-100"}},De=()=>{const R=(T,A)=>{try{const z=localStorage.getItem(`campaign_form_${T}`);return z?JSON.parse(z):A}catch{return A}},I=(T,A)=>{try{localStorage.setItem(`campaign_form_${T}`,JSON.stringify(A))}catch(z){console.warn("Failed to save to localStorage:",z)}},V=()=>{try{localStorage.removeItem("campaign_form_formData"),localStorage.removeItem("campaign_form_campaignDetails"),localStorage.removeItem("campaign_form_currentStep")}catch(T){console.warn("Failed to clear localStorage:",T)}},[H,S]=g.useState(()=>{const T=localStorage.getItem("campaign_form_currentStep");return T?parseInt(T,10):1}),[D,q]=g.useState(()=>m||R("formData",{title:"",company_name:"",description:"",full_description:"",cta_text:"Get Info",cta_url:"",image_url:"",company_logo_url:"",discount_code:"",discount_link:"",qr_code:"",payment_tier:"basic",monthly_payment_amount:0,status:"draft",target_cities:[],target_event_types:[],target_locations:[]})),[j,K]=g.useState(()=>R("campaignDetails",{campaignTitle:"",companyName:"",invoiceEmail:"",campaignRef:"",invoiceRef:"",location:"",country:"",city:"",distance:0,dealDescription:"",dealDuration:30,startDate:"",endDate:"",targetAudience:"all",budget:0,estimatedReach:0,costPerImpression:0,totalCost:0,discountCode:"",discountAmount:0,finalCost:0}));g.useEffect(()=>{m||I("formData",D)},[D,m]),g.useEffect(()=>{m||I("campaignDetails",j)},[j,m]),g.useEffect(()=>{m||I("currentStep",H)},[H,m]),g.useEffect(()=>{m&&(q(m),S(3))},[m]);const Fe=(T,A)=>{if(!T||!A)return"";const z=new Date(T);if(Number.isNaN(z.getTime()))return"";z.setDate(z.getDate()+A);const ne=z.getFullYear(),se=String(z.getMonth()+1).padStart(2,"0"),we=String(z.getDate()).padStart(2,"0");return`${ne}-${se}-${we}`},re=async()=>{try{if(!j.startDate){const se=ze();K(we=>({...we,estimatedReach:se}));return}const T=Fe(j.startDate,j.dealDuration||0),{data:A,error:z}=await L.rpc("estimate_reach",{p_country:j.country||null,p_city:j.city||null,p_distance_km:j.distance||0,p_start_date:j.startDate,p_end_date:T});if(z){const se=ze();K(we=>({...we,estimatedReach:se}));return}const ne=typeof A=="number"?A:(A==null?void 0:A.estimated_reach)??0;K(se=>({...se,estimatedReach:Math.max(0,ne)}))}catch{const A=ze();K(z=>({...z,estimatedReach:A}))}},_e=async T=>{if(!T||T.trim()===""){K(A=>({...A,discountCode:"",discountAmount:0,finalCost:A.totalCost}));return}try{const{data:A,error:z}=await L.rpc("validate_discount_code",{p_code:T.toUpperCase().trim(),p_amount:j.totalCost});if(z)throw z;if(A&&A.length>0){const ne=A[0];ne.valid?(K(se=>({...se,discountCode:T.toUpperCase().trim(),discountAmount:parseFloat(ne.discount_amount),finalCost:Math.max(0,se.totalCost-parseFloat(ne.discount_amount))})),alert(ne.message||"Discount code applied!")):(K(se=>({...se,discountCode:"",discountAmount:0,finalCost:se.totalCost})),alert(ne.message||"Invalid discount code"))}}catch(A){console.error("Error validating discount code:",A),K(z=>({...z,discountCode:"",discountAmount:0,finalCost:z.totalCost})),alert("Discount code validation unavailable. Please contact support.")}},Ce=()=>{const A=j.country==="global"?1.5:1,z=Math.max(1,j.distance/10),ne=Math.max(.5,j.dealDuration/30),se=.15*A*z*(1/ne),we=ze(),tt=se*we,He=Math.max(0,tt-j.discountAmount);K(oa=>({...oa,costPerImpression:se,totalCost:Math.round(tt*100)/100,estimatedReach:we,finalCost:Math.round(He*100)/100}))},ze=()=>{const A=j.country==="global"?5:1,z=j.city?1.5:1,ne=Math.max(1,j.dealDuration/30);return Math.round(1e3*A*z*ne)};g.useEffect(()=>{Ce()},[j.country,j.distance,j.dealDuration,j.estimatedReach,j.discountAmount]),g.useEffect(()=>{if(j.startDate){const T=Fe(j.startDate,j.dealDuration||0);K(A=>({...A,endDate:T}))}},[j.startDate,j.dealDuration]),g.useEffect(()=>{const T=setTimeout(()=>{re()},500);return()=>clearTimeout(T)},[j.country,j.city,j.distance,j.startDate,j.dealDuration]);const $=({value:T,onChange:A,options:z,placeholder:ne})=>{const[se,we]=g.useState(!1),tt=z.find(He=>He.value===T);return n.jsxs("div",{className:"relative",children:[n.jsxs("button",{type:"button",onClick:()=>we(He=>!He),className:"mt-1 w-full border border-gray-300 rounded-md px-3 py-2 bg-white flex items-center justify-between hover:border-gray-400",children:[n.jsx("span",{className:tt?"text-gray-900":"text-gray-500",children:(tt==null?void 0:tt.label)||ne||"Select"}),n.jsx("svg",{className:"w-4 h-4 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.06l3.71-3.83a.75.75 0 111.08 1.04l-4.25 4.39a.75.75 0 01-1.08 0L5.21 8.27a.75.75 0 01.02-1.06z",clipRule:"evenodd"})})]}),se&&n.jsx("div",{className:"absolute z-20 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg max-h-56 overflow-auto",children:z.map(He=>n.jsx("div",{onClick:()=>{A(He.value),we(!1)},className:`px-3 py-2 cursor-pointer hover:bg-gray-100 ${He.value===T?"bg-gray-50 font-medium":""}`,children:He.label},He.value))})]})},ce=async(T=!1)=>{try{const A={...D,title:j.campaignTitle,company_name:j.companyName,monthly_payment_amount:j.discountAmount>0?j.finalCost:j.totalCost,original_amount:j.totalCost,target_cities:j.city?[j.city]:[],target_locations:j.country?[j.country]:[],target_event_types:[j.targetAudience],start_date:j.startDate||null,end_date:j.endDate||null,invoice_email:j.invoiceEmail||null,campaign_ref:j.campaignRef||null,invoice_ref:j.invoiceRef||null,target_country:j.country||null,target_city:j.city||null,target_distance_km:j.distance||0,discount_code:j.discountCode||null,discount_amount:j.discountAmount||0,status:T?"draft":"pending",payment_status:"pending"};if(m){const{error:z}=await L.from("campaigns").update(A).eq("id",m.id);if(z)throw z}else{const{error:z}=await L.from("campaigns").insert([A]);if(z)throw z}alert(T?"Campaign saved as draft. You can continue editing later.":"Campaign saved as pending. You can send the payment link when ready."),V(),u(!1),y(null),S(1),U()}catch(A){console.error("Error saving campaign:",A),alert(`Error saving campaign: ${A.message}`)}},et=async()=>{try{let T=m==null?void 0:m.id;if(!T||(m==null?void 0:m.status)==="draft"){const ne={...D,title:j.campaignTitle,company_name:j.companyName,monthly_payment_amount:j.discountAmount>0?j.finalCost:j.totalCost,original_amount:j.totalCost,target_cities:j.city?[j.city]:[],target_locations:j.country?[j.country]:[],target_event_types:[j.targetAudience],start_date:j.startDate||null,end_date:j.endDate||null,invoice_email:j.invoiceEmail||null,campaign_ref:j.campaignRef||null,invoice_ref:j.invoiceRef||null,target_country:j.country||null,target_city:j.city||null,target_distance_km:j.distance||0,discount_code:j.discountCode||null,discount_amount:j.discountAmount||0,status:"pending",payment_status:"pending"};if(T){const{error:se}=await L.from("campaigns").update(ne).eq("id",T);if(se)throw se}else{const{data:se,error:we}=await L.from("campaigns").insert([ne]).select().single();if(we)throw we;T=se.id}}const A=await fetch("https://portal.ontimely.co.uk/api/send-campaign-invoice",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({campaign_id:T,email:j.invoiceEmail,amount:j.discountAmount>0?j.finalCost:j.totalCost,discount_code:j.discountCode||null,discount_amount:j.discountAmount||0,original_amount:j.totalCost,company_name:j.companyName,campaign_title:j.campaignTitle,invoice_ref:j.invoiceRef})});if(!A.ok){const ne=await A.json();throw new Error(ne.error||"Failed to send invoice")}const z=await A.json();await L.from("campaigns").update({payment_status:"invoice_sent",invoice_id:z.invoice_id,invoice_url:z.payment_url}).eq("id",T),v(!1),alert("Payment link sent successfully! The customer will receive an invoice email."),V(),u(!1),y(null),S(1),U()}catch(T){console.error("Error sending payment link:",T),alert(`Error sending payment link: ${T.message}`)}},k=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Campaign Information & Pricing"}),n.jsx("p",{className:"text-gray-600",children:"Set up your campaign details and get an instant quote"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Campaign Title *"}),n.jsx("input",{type:"text",value:j.campaignTitle,onChange:T=>K(A=>({...A,campaignTitle:T.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Company Name *"}),n.jsx("input",{type:"text",value:j.companyName,onChange:T=>K(A=>({...A,companyName:T.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",required:!0})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Invoice Email *"}),n.jsx("input",{type:"email",value:j.invoiceEmail,onChange:T=>K(A=>({...A,invoiceEmail:T.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Campaign Reference"}),n.jsx("input",{type:"text",value:j.campaignRef,onChange:T=>K(A=>({...A,campaignRef:T.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2"})]})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Invoice Reference"}),n.jsx("input",{type:"text",value:j.invoiceRef,onChange:T=>K(A=>({...A,invoiceRef:T.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Deal Duration (days)"}),n.jsx("input",{type:"number",value:j.dealDuration,onChange:T=>K(A=>({...A,dealDuration:parseInt(T.target.value)||30})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",min:"1"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Start Date *"}),n.jsx("input",{type:"date",value:j.startDate,onChange:T=>K(A=>({...A,startDate:T.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",required:!0}),j.endDate&&n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Ends on ",j.endDate]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Deal Description"}),n.jsx("textarea",{value:j.dealDescription,onChange:T=>K(A=>({...A,dealDescription:T.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",rows:3,placeholder:"Describe the deal, offer, or promotion..."})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Country *"}),n.jsx($,{value:j.country,onChange:T=>K(A=>({...A,country:T})),options:[{label:"Select Country",value:""},{label:"Global",value:"global"},{label:"United States",value:"US"},{label:"United Kingdom",value:"UK"},{label:"Canada",value:"CA"},{label:"Australia",value:"AU"},{label:"Germany",value:"DE"},{label:"France",value:"FR"},{label:"Spain",value:"ES"},{label:"Italy",value:"IT"},{label:"Netherlands",value:"NL"}],placeholder:"Select Country"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"City"}),n.jsx("input",{type:"text",value:j.city,onChange:T=>K(A=>({...A,city:T.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"e.g., London, New York"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Distance (km)"}),n.jsx("input",{type:"number",value:j.distance,onChange:T=>K(A=>({...A,distance:parseInt(T.target.value)||0})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",min:"0",placeholder:"0 for city-wide"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Target Audience"}),n.jsx($,{value:j.targetAudience,onChange:T=>K(A=>({...A,targetAudience:T})),options:[{label:"All Event Attendees",value:"all"},{label:"Business Events Only",value:"business"},{label:"Conferences Only",value:"conference"},{label:"Weddings Only",value:"wedding"},{label:"Corporate Events Only",value:"corporate"}],placeholder:"Select Audience"})]}),n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Discount Code (Optional)"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",value:j.discountCode,onChange:T=>K(A=>({...A,discountCode:T.target.value})),onBlur:T=>{T.target.value.trim()&&_e(T.target.value)},placeholder:"Enter discount code",className:"flex-1 border border-gray-300 rounded-md px-3 py-2 uppercase",style:{textTransform:"uppercase"}}),n.jsx("button",{type:"button",onClick:()=>_e(j.discountCode),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Apply"})]}),j.discountAmount>0&&n.jsxs("div",{className:"mt-2 text-sm text-green-700 font-medium",children:[" Discount applied: -$",j.discountAmount.toFixed(2)]})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsxs("div",{className:"flex justify-between items-center mb-3",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Pricing Estimate"}),n.jsx("button",{type:"button",onClick:()=>{K(T=>({...T,totalCost:0})),alert("Amount set to $0 for testing")},className:"px-3 py-1 text-xs bg-yellow-500 text-white rounded hover:bg-yellow-600",title:"Set amount to $0 for testing",children:"Test: $0"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Estimated Reach:"}),n.jsxs("span",{className:"ml-2 font-medium",children:[j.estimatedReach.toLocaleString()," people"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Cost per Impression:"}),n.jsxs("span",{className:"ml-2 font-medium",children:["$",j.costPerImpression.toFixed(4)]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Campaign Duration:"}),n.jsxs("span",{className:"ml-2 font-medium",children:[j.dealDuration," days"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),n.jsxs("span",{className:"ml-2 font-medium",children:["$",j.totalCost.toFixed(2)]})]}),j.discountAmount>0&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsxs("span",{className:"text-gray-600",children:["Discount (",j.discountCode,"):"]}),n.jsxs("span",{className:"ml-2 font-medium text-green-600",children:["-$",j.discountAmount.toFixed(2)]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Total Cost:"}),n.jsxs("span",{className:"ml-2 font-bold text-green-600 text-lg",children:["$",j.finalCost.toFixed(2)]})]})]}),j.discountAmount===0&&n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Total Cost:"}),n.jsxs("span",{className:"ml-2 font-bold text-green-600 text-lg",children:["$",j.totalCost.toFixed(2)]})]})]})]})]}),Z=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Payment Confirmation"}),n.jsx("p",{className:"text-gray-600",children:"Review and confirm your campaign pricing"})]}),n.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-lg p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Campaign Summary"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Campaign:"}),n.jsx("span",{className:"font-medium",children:j.campaignTitle})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Company:"}),n.jsx("span",{className:"font-medium",children:j.companyName})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Location:"}),n.jsxs("span",{className:"font-medium",children:[j.country," ",j.city&&`- ${j.city}`]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Duration:"}),n.jsxs("span",{className:"font-medium",children:[j.dealDuration," days"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Estimated Reach:"}),n.jsxs("span",{className:"font-medium",children:[j.estimatedReach.toLocaleString()," people"]})]}),n.jsx("div",{className:"border-t pt-3",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),n.jsxs("span",{className:"font-medium",children:["$",j.totalCost.toFixed(2)]})]}),j.discountAmount>0&&n.jsxs("div",{className:"flex justify-between text-green-600",children:[n.jsxs("span",{children:["Discount (",j.discountCode,"):"]}),n.jsxs("span",{className:"font-medium",children:["-$",j.discountAmount.toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[n.jsx("span",{children:"Total Cost:"}),n.jsxs("span",{className:"text-green-600",children:["$",(j.discountAmount>0?j.finalCost:j.totalCost).toFixed(2)]})]})]})})]})]}),n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),n.jsxs("div",{className:"ml-3",children:[n.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Payment Required"}),n.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:n.jsx("p",{children:"Payment must be completed before proceeding to create the advertisement. You will be redirected to our payment processor."})})]})]})})]}),ie=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Create Advertisement"}),n.jsx("p",{className:"text-gray-600",children:"Design your mobile advertisement"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Short Description *"}),n.jsx("textarea",{value:D.description||"",onChange:T=>q(A=>({...A,description:T.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",rows:2,maxLength:60,placeholder:"Brief description for mobile display"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Max 60 characters (for mobile display)"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Full Description"}),n.jsx("textarea",{value:D.full_description||"",onChange:T=>q(A=>({...A,full_description:T.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",rows:2,placeholder:"Detailed description for ad detail page"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"CTA Text"}),n.jsx("input",{type:"text",value:D.cta_text||"Get Info",onChange:T=>q(A=>({...A,cta_text:T.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"CTA URL"}),n.jsx("input",{type:"url",value:D.cta_url||"",onChange:T=>q(A=>({...A,cta_url:T.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Advertisement Image *"}),n.jsx("input",{type:"file",accept:"image/*,video/*",onChange:T=>{var z;const A=(z=T.target.files)==null?void 0:z[0];A&&console.log("Upload file:",A)},className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Supports all image and video formats"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Company Logo *"}),n.jsx("input",{type:"file",accept:"image/*",onChange:T=>{var z;const A=(z=T.target.files)==null?void 0:z[0];A&&console.log("Upload logo:",A)},className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Supports all image formats"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Discount Code"}),n.jsx("input",{type:"text",value:D.discount_code||"",onChange:T=>q(A=>({...A,discount_code:T.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Discount Link"}),n.jsx("input",{type:"url",value:D.discount_link||"",onChange:T=>q(A=>({...A,discount_link:T.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),n.jsx($,{value:D.status||"draft",onChange:T=>q(A=>({...A,status:T})),options:[{label:"Draft",value:"draft"},{label:"Active",value:"active"},{label:"Paused",value:"paused"},{label:"Ended",value:"ended"}],placeholder:"Select Status"})]})]});return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto relative",children:[n.jsx("button",{onClick:()=>{confirm("Are you sure you want to close? Your progress will be saved but the form will be cleared.")&&(V(),u(!1),y(null),S(1))},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700",children:n.jsx(Bt,{className:"w-6 h-6"})}),n.jsx("div",{className:"flex items-center justify-center mb-8",children:n.jsx("div",{className:"flex items-center space-x-4",children:[1,2,3].map(T=>n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${H>=T?"bg-green-600 text-white":"bg-gray-200 text-gray-600"}`,children:T}),T<3&&n.jsx("div",{className:`w-16 h-1 mx-2 ${H>T?"bg-green-600":"bg-gray-200"}`})]},T))})}),H===1&&k(),H===2&&Z(),H===3&&ie(),b&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[n.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Confirm Send Payment Link"}),n.jsxs("div",{className:"space-y-3 mb-6",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Company:"}),n.jsx("p",{className:"font-semibold text-gray-900",children:j.companyName})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Campaign:"}),n.jsx("p",{className:"font-semibold text-gray-900",children:j.campaignTitle})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Email:"}),n.jsx("p",{className:"font-semibold text-gray-900",children:j.invoiceEmail})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Amount:"}),n.jsxs("p",{className:"font-semibold text-gray-900",children:["$",j.discountAmount>0?j.finalCost.toFixed(2):j.totalCost.toFixed(2),j.discountAmount>0&&n.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:["(Original: $",j.totalCost.toFixed(2),", Discount: $",j.discountAmount.toFixed(2),")"]})]})]})]}),n.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"This will save the campaign as pending and send an invoice email to the customer. The campaign will go live automatically once payment is received."}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),n.jsx("button",{onClick:et,className:"px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"Confirm & Send"})]})]})}),n.jsxs("div",{className:"flex justify-between pt-6 border-t",children:[n.jsx("button",{type:"button",onClick:()=>{H>1?S(H-1):confirm("Are you sure you want to close? Your progress will be saved but the form will be cleared.")&&(V(),u(!1),y(null),S(1))},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:H===1?"Cancel":"Back"}),n.jsx("div",{className:"flex space-x-2",children:H===3?n.jsxs(n.Fragment,{children:[n.jsx("button",{type:"button",onClick:()=>ce(!0),className:"px-6 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Save as Draft"}),n.jsx("button",{type:"button",onClick:()=>ce(!1),className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Save as Pending"}),n.jsx("button",{type:"button",onClick:()=>v(!0),className:"px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"Send Payment Link"})]}):n.jsx("button",{type:"button",onClick:()=>S(H+1),className:"px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"Next"})})]})]})})},Se=()=>{const[R,I]=g.useState({code:"",description:"",discount_type:"percentage",discount_value:0,max_discount_amount:null,min_purchase_amount:0,max_uses:null,valid_from:new Date().toISOString().split("T")[0],valid_until:null,is_active:!0}),V=async()=>{try{if(!R.code||!R.discount_value){alert("Please fill in code and discount value");return}const S={...R,code:R.code.toUpperCase().trim(),max_discount_amount:R.max_discount_amount||null,max_uses:R.max_uses||null,valid_until:R.valid_until||null};if(p){const{error:D}=await L.from("discount_codes").update(S).eq("id",p.id);if(D)throw D}else{const{error:D}=await L.from("discount_codes").insert([S]);if(D)throw D}_(!1),f(null),I({code:"",description:"",discount_type:"percentage",discount_value:0,max_discount_amount:null,min_purchase_amount:0,max_uses:null,valid_from:new Date().toISOString().split("T")[0],valid_until:null,is_active:!0}),U(),alert("Discount code saved successfully!")}catch(S){console.error("Error saving discount code:",S),alert(`Error saving discount code: ${S.message}`)}},H=async S=>{if(confirm("Are you sure you want to delete this discount code?"))try{const{error:D}=await L.from("discount_codes").delete().eq("id",S);if(D)throw D;U(),alert("Discount code deleted successfully!")}catch(D){console.error("Error deleting discount code:",D),alert(`Error deleting discount code: ${D.message}`)}};return g.useEffect(()=>{p&&I({code:p.code||"",description:p.description||"",discount_type:p.discount_type||"percentage",discount_value:p.discount_value||0,max_discount_amount:p.max_discount_amount||null,min_purchase_amount:p.min_purchase_amount||0,max_uses:p.max_uses||null,valid_from:p.valid_from?new Date(p.valid_from).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],valid_until:p.valid_until?new Date(p.valid_until).toISOString().split("T")[0]:null,is_active:p.is_active!==!1})},[p]),n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:p?"Edit Discount Code":"Create Discount Code"}),n.jsx("button",{onClick:()=>{_(!1),f(null),I({code:"",description:"",discount_type:"percentage",discount_value:0,max_discount_amount:null,min_purchase_amount:0,max_uses:null,valid_from:new Date().toISOString().split("T")[0],valid_until:null,is_active:!0})},className:"text-gray-500 hover:text-gray-700",children:n.jsx(Bt,{className:"w-6 h-6"})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code *"}),n.jsx("input",{type:"text",value:R.code,onChange:S=>I(D=>({...D,code:S.target.value.toUpperCase()})),className:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"SAVE20",style:{textTransform:"uppercase"},required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),n.jsx("input",{type:"text",value:R.description,onChange:S=>I(D=>({...D,description:S.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"20% off for new customers"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount Type *"}),n.jsxs("select",{value:R.discount_type,onChange:S=>I(D=>({...D,discount_type:S.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",children:[n.jsx("option",{value:"percentage",children:"Percentage (%)"}),n.jsx("option",{value:"fixed",children:"Fixed Amount ($)"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Discount Value * ",R.discount_type==="percentage"?"(0-100)":"($)"]}),n.jsx("input",{type:"number",value:R.discount_value,onChange:S=>I(D=>({...D,discount_value:parseFloat(S.target.value)||0})),className:"w-full border border-gray-300 rounded-md px-3 py-2",min:"0",max:R.discount_type==="percentage"?100:void 0,step:"0.01",required:!0})]}),R.discount_type==="percentage"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Discount Amount ($)"}),n.jsx("input",{type:"number",value:R.max_discount_amount||"",onChange:S=>I(D=>({...D,max_discount_amount:S.target.value?parseFloat(S.target.value):null})),className:"w-full border border-gray-300 rounded-md px-3 py-2",min:"0",step:"0.01",placeholder:"Optional"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Purchase Amount ($)"}),n.jsx("input",{type:"number",value:R.min_purchase_amount,onChange:S=>I(D=>({...D,min_purchase_amount:parseFloat(S.target.value)||0})),className:"w-full border border-gray-300 rounded-md px-3 py-2",min:"0",step:"0.01"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Uses"}),n.jsx("input",{type:"number",value:R.max_uses||"",onChange:S=>I(D=>({...D,max_uses:S.target.value?parseInt(S.target.value):null})),className:"w-full border border-gray-300 rounded-md px-3 py-2",min:"1",placeholder:"Unlimited if empty"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valid From *"}),n.jsx("input",{type:"date",value:R.valid_from,onChange:S=>I(D=>({...D,valid_from:S.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valid Until"}),n.jsx("input",{type:"date",value:R.valid_until||"",onChange:S=>I(D=>({...D,valid_until:S.target.value||null})),className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",checked:R.is_active,onChange:S=>I(D=>({...D,is_active:S.target.checked})),className:"mr-2"}),n.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Active"})]})]}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{onClick:()=>{_(!1),f(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),n.jsxs("button",{onClick:V,className:"px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:[p?"Update":"Create"," Discount Code"]})]}),n.jsxs("div",{className:"mt-8 border-t pt-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Existing Discount Codes"}),n.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:[N.map(S=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-md",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-semibold text-gray-900",children:S.code}),n.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${S.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:S.is_active?"Active":"Inactive"})]}),n.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[S.discount_type==="percentage"?`${S.discount_value}% off`:`$${S.discount_value} off`,S.description&&` - ${S.description}`]}),n.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Uses: ",S.current_uses||0," ",S.max_uses?`/ ${S.max_uses}`:"(unlimited)"]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>f(S),className:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700",children:"Edit"}),n.jsx("button",{onClick:()=>H(S.id),className:"px-3 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700",children:"Delete"})]})]},S.id)),N.length===0&&n.jsx("p",{className:"text-gray-500 text-center py-4",children:"No discount codes created yet"})]})]})]})})};return c?n.jsx("div",{className:"flex items-center justify-center h-96",children:n.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-indigo-600"})}):n.jsxs("div",{className:"p-6",children:[h&&n.jsx(De,{}),w&&n.jsx(Se,{}),n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Smart Advertising Platform"}),n.jsx("p",{className:"text-gray-600 mt-2",children:"AI-powered location-based advertising management"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",onClick:()=>_(!0),children:[n.jsx(Ju,{className:"w-4 h-4"}),"Discount Codes"]}),n.jsxs("button",{className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center gap-2",onClick:()=>u(!0),children:[n.jsx(Ws,{className:"w-4 h-4"}),"New Campaign"]})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-6 mb-8",children:[n.jsx("div",{className:"bg-white p-6 rounded-lg shadow border-l-4 border-green-500",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(u1,{className:"w-8 h-8 text-green-600"}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Monthly Revenue"}),n.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",C.totalRevenue.toLocaleString()]})]})]})}),n.jsx("div",{className:"bg-white p-6 rounded-lg shadow border-l-4 border-blue-500",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Go,{className:"w-8 h-8 text-blue-600"}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Campaigns"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:C.activeCampaigns})]})]})}),n.jsx("div",{className:"bg-white p-6 rounded-lg shadow border-l-4 border-purple-500",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(qs,{className:"w-8 h-8 text-purple-600"}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Impressions"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:C.totalImpressions.toLocaleString()})]})]})}),n.jsx("div",{className:"bg-white p-6 rounded-lg shadow border-l-4 border-orange-500",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(x1,{className:"w-8 h-8 text-orange-600"}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg CTR"}),n.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[(C.avgCTR*100).toFixed(2),"%"]})]})]})}),n.jsx("div",{className:"bg-white p-6 rounded-lg shadow border-l-4 border-red-500",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Ju,{className:"w-8 h-8 text-red-600"}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Hot Opportunities"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:C.hotOpportunities})]})]})}),n.jsx("div",{className:"bg-white p-6 rounded-lg shadow border-l-4 border-indigo-500",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(qu,{className:"w-8 h-8 text-indigo-600"}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Market Ops"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:C.marketOpportunities})]})]})})]}),n.jsx("div",{className:"border-b border-gray-200",children:n.jsx("nav",{className:"-mb-px flex space-x-8",children:[{key:"campaigns",label:"Campaigns",icon:Go},{key:"intelligence",label:"Market Intelligence",icon:qu},{key:"opportunities",label:"Sales Opportunities",icon:Jo},{key:"analytics",label:"Analytics",icon:bi}].map(({key:R,label:I,icon:V})=>n.jsxs("button",{onClick:()=>e(R),className:`group inline-flex items-center py-4 px-1 border-b-2 font-medium text-sm ${t===R?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[n.jsx(V,{className:"w-5 h-5 mr-2"}),I]},R))})}),n.jsxs("div",{className:"mt-8",children:[t==="campaigns"&&n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"bg-white shadow rounded-lg",children:[n.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Campaign Management"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{className:"px-3 py-2 border border-gray-300 rounded-md text-sm flex items-center gap-2",children:[n.jsx(h1,{className:"w-4 h-4"}),"Filter"]}),n.jsxs("button",{className:"px-3 py-2 border border-gray-300 rounded-md text-sm flex items-center gap-2",children:[n.jsx(la,{className:"w-4 h-4"}),"Search"]})]})]})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Campaign"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Tier"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Revenue"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Performance"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Locations"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(R=>{var I,V;return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:R.title}),n.jsx("div",{className:"text-sm text-gray-500",children:R.company_name})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${J(R.payment_tier)}`,children:R.payment_tier})}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",((I=R.monthly_payment_amount)==null?void 0:I.toLocaleString())||0]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:R.payment_status?n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${R.payment_status==="paid"?"bg-green-100 text-green-800":R.payment_status==="invoice_sent"?"bg-yellow-100 text-yellow-800":R.payment_status==="pending"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:R.payment_status}):n.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800",children:"N/A"})}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[n.jsxs("div",{className:"text-sm text-gray-900",children:[R.impressions_count.toLocaleString()," impressions"]}),n.jsxs("div",{className:"text-sm text-gray-500",children:[(R.ctr*100).toFixed(2),"% CTR"]})]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${W(R.status)}`,children:R.status})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(V=R.target_cities)!=null&&V.length?`${R.target_cities.length} cities`:"Global"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("button",{onClick:()=>{y(R),u(!0)},className:"text-indigo-600 hover:text-indigo-900",children:"Edit"}),R.payment_status==="paid"&&R.status==="pending"&&n.jsx("button",{onClick:async()=>{if(confirm("Activate this campaign? It will go live immediately."))try{const{error:H}=await L.from("campaigns").update({status:"active"}).eq("id",R.id);if(H)throw H;U(),alert("Campaign activated successfully!")}catch(H){console.error("Error activating campaign:",H),alert("Error activating campaign")}},className:"text-green-600 hover:text-green-900 font-semibold",children:"Activate"}),R.payment_status==="invoice_sent"&&n.jsx("button",{onClick:async()=>{try{if(R.invoice_id){const{data:H}=await L.from("invoices").select("status").eq("id",R.invoice_id).single();(H==null?void 0:H.status)==="paid"?(await L.from("campaigns").update({status:"active",payment_status:"paid"}).eq("id",R.id),alert("Campaign activated! Invoice was paid.")):alert("Invoice not yet paid. Status: "+((H==null?void 0:H.status)||"unknown"))}else alert("No invoice ID found for this campaign.");U()}catch(H){console.error("Error checking invoice:",H),alert("Error checking invoice status")}},className:"text-blue-600 hover:text-blue-900",children:"Check Payment"}),n.jsx("button",{onClick:async()=>{if(confirm("Are you sure you want to delete this campaign?"))try{const{error:H}=await L.from("campaigns").delete().eq("id",R.id);if(H)throw H;U()}catch(H){console.error("Error deleting campaign:",H),alert("Error deleting campaign")}},className:"text-red-600 hover:text-red-900",children:"Delete"})]})})]},R.id)})})]})})]})}),t==="intelligence"&&n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"bg-white shadow rounded-lg",children:[n.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[n.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"AI Market Intelligence"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"AI-analyzed market opportunities and insights"})]}),n.jsx("div",{className:"p-6",children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(R=>n.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[n.jsxs("div",{className:"flex justify-between items-start mb-3",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-900",children:R.location_name}),n.jsxs("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full mt-1 ${G(R.sales_priority)}`,children:[R.sales_priority," priority"]})]}),n.jsx(p1,{className:"w-5 h-5 text-gray-400"})]}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Revenue Potential:"}),n.jsxs("span",{className:"font-medium",children:["$",R.revenue_potential.toLocaleString(),"/mo"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Business Density:"}),n.jsxs("span",{className:"font-medium",children:[(R.business_density_score*100).toFixed(0),"%"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Competition:"}),n.jsx("span",{className:`font-medium ${R.competition_level==="low"?"text-green-600":R.competition_level==="medium"?"text-yellow-600":"text-red-600"}`,children:R.competition_level})]})]}),n.jsx("div",{className:"mt-4 pt-3 border-t border-gray-200",children:n.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-500",children:[n.jsxs("span",{children:["Last analyzed: ",new Date(R.last_analyzed).toLocaleDateString()]}),n.jsx("button",{className:"text-indigo-600 hover:text-indigo-700 font-medium",children:"View Details"})]})})]},R.id))})})]})}),t==="opportunities"&&n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"bg-white shadow rounded-lg",children:[n.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[n.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"AI-Generated Sales Opportunities"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Potential clients identified by AI analysis"})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Company"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Business Type"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estimated Budget"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Likelihood"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priority"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"AI Insight"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(R=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:R.company_name}),n.jsx("div",{className:"text-sm text-gray-500",children:R.status})]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:R.business_type}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",R.estimated_budget.toLocaleString()]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2 mr-3",children:n.jsx("div",{className:"bg-indigo-600 h-2 rounded-full",style:{width:`${R.likelihood_score*100}%`}})}),n.jsxs("span",{className:"text-sm text-gray-900",children:[(R.likelihood_score*100).toFixed(0),"%"]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${G(R.priority_level)}`,children:R.priority_level})}),n.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 max-w-xs truncate",children:R.ai_reasoning})]},R.id))})]})})]})}),t==="analytics"&&n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[n.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Performance Analytics"}),n.jsxs("div",{className:"text-center py-12 text-gray-500",children:[n.jsx(bi,{className:"w-12 h-12 mx-auto mb-4"}),n.jsx("p",{children:"Advanced analytics dashboard coming soon..."}),n.jsx("p",{className:"text-sm mt-2",children:"Will include revenue trends, geographic performance, and AI insights"})]})]})})]})]})},L1=()=>{const[t,e]=g.useState(null),[r,s]=g.useState([]),[a,i]=g.useState([]),[l,o]=g.useState(!0),[c,d]=g.useState(!0),[h,u]=g.useState(""),[m,y]=g.useState([]);g.useEffect(()=>{N(),x(),localStorage.getItem("help-center-instructions-dismissed")==="true"&&d(!1)},[]),g.useEffect(()=>{if(h.trim()==="")y(r);else{const v=r.filter(C=>C.confirmation_code.toLowerCase().includes(h.toLowerCase()));y(v)}},[r,h]);const w=()=>{d(!1),localStorage.setItem("help-center-instructions-dismissed","true")},_=()=>{d(!0),localStorage.removeItem("help-center-instructions-dismissed")},N=async()=>{try{console.log(" Loading help center data...");let v=null;try{const{data:W,error:G}=await L.rpc("get_help_center_stats");G?(console.warn("RPC get_help_center_stats failed, using fallback:",G),v=[{totalChatSessions:0,totalScreenShares:0,totalLiveChats:0,avgResponseTime:"N/A"}]):v=W}catch(W){console.warn("RPC not available, using fallback stats:",W),v=[{totalChatSessions:0,totalScreenShares:0,totalLiveChats:0,avgResponseTime:"N/A"}]}e(v[0]),console.log(" Loading screen share sessions...");const{data:C,error:P}=await L.from("screen_share_sessions").select("*").eq("status","active").order("created_at",{ascending:!1});P?(console.error("Error loading screen shares:",P),s([])):(console.log(" Loaded screen shares:",C),s(C||[])),console.log(" Loading live chat sessions...");const{data:U,error:J}=await L.from("live_chat_sessions").select("*").eq("status","waiting").order("created_at",{ascending:!0});J?(console.warn("Live chat sessions table not available:",J),i([])):i(U||[])}catch(v){console.error("Error loading help center data:",v)}finally{o(!1)}},x=()=>{L.channel("screen_share_sessions").on("postgres_changes",{event:"*",schema:"public",table:"screen_share_sessions"},()=>N()).subscribe(),L.channel("live_chat_sessions").on("postgres_changes",{event:"*",schema:"public",table:"live_chat_sessions"},()=>N()).subscribe()},p=async v=>{var C;try{const{data:P,error:U}=await L.from("screen_share_sessions").select("*").eq("confirmation_code",v).eq("status","active").single();if(U||!P){alert("Invalid or expired confirmation code");return}const{error:J}=await L.from("screen_share_sessions").update({agent_id:(C=(await L.auth.getUser()).data.user)==null?void 0:C.id,status:"active"}).eq("id",P.id);if(J)throw J;alert(`Screen sharing session joined! Confirmation code: ${v}`),N()}catch(P){console.error("Error joining screen share:",P),alert("Error joining screen sharing session")}},f=async v=>{var C;try{const{error:P}=await L.from("live_chat_sessions").update({agent_id:(C=(await L.auth.getUser()).data.user)==null?void 0:C.id,status:"active",started_at:new Date().toISOString()}).eq("id",v);if(P)throw P;alert("Live chat session started!"),N()}catch(P){console.error("Error starting live chat:",P),alert("Error starting live chat session")}},b=async v=>{try{const{error:C}=await L.from("live_chat_sessions").update({status:"ended",ended_at:new Date().toISOString()}).eq("id",v);if(C)throw C;alert("Live chat session ended"),N()}catch(C){console.error("Error ending live chat:",C),alert("Error ending live chat session")}};return l?n.jsx("div",{className:"flex items-center justify-center p-8",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500"})}):n.jsxs("div",{className:"space-y-8 p-6",children:[c&&n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:w,className:"absolute -top-3 -right-3 z-10 w-10 h-10 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-110",title:"Dismiss instructions",children:n.jsx(Bt,{className:"h-6 w-6"})}),n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-white text-sm font-bold",children:"i"})})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"How to Join Screen Sharing"}),n.jsxs("div",{className:"text-blue-800 space-y-2",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Step 1:"})," When a user requests screen sharing, they'll receive a confirmation code"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Step 2:"}),' The session will appear in "Active Screen Shares" below']}),n.jsxs("p",{children:[n.jsx("strong",{children:"Step 3:"}),' Click "Join Session" to connect to their screen']}),n.jsxs("p",{children:[n.jsx("strong",{children:"Step 4:"})," You'll be able to see their screen and provide remote assistance"]})]})]})]})})]}),!c&&n.jsx("div",{className:"flex justify-center",children:n.jsxs("button",{onClick:_,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-blue-600 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 transition-colors",children:[n.jsx("span",{className:"mr-2",children:""}),"Show Screen Sharing Instructions"]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Wa,{className:"h-8 w-8 text-blue-500"}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Chat Sessions"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:(t==null?void 0:t.totalChatSessions)||0})]})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(As,{className:"h-8 w-8 text-green-500"}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Screen Shares"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:(t==null?void 0:t.totalScreenShares)||0})]})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Ie,{className:"h-8 w-8 text-purple-500"}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Live Chats"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:(t==null?void 0:t.totalLiveChats)||0})]})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Pn,{className:"h-8 w-8 text-orange-500"}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Response"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:(t==null?void 0:t.avgResponseTime)||"N/A"})]})]})})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow",children:[n.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Active Screen Shares"}),n.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[r.length," Active"]})]}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:n.jsx(la,{className:"h-5 w-5 text-gray-400"})}),n.jsx("input",{type:"text",placeholder:"Search by confirmation code...",value:h,onChange:v=>u(v.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-green-500 focus:border-green-500 sm:text-sm"})]})]}),n.jsx("div",{className:"p-6",children:m.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(qs,{className:"h-8 w-8 text-gray-400"})}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:h?"No Matching Screen Shares":"No Active Screen Shares"}),n.jsx("p",{className:"text-gray-500",children:h?`No sessions found matching "${h}"`:"When users request screen sharing, their sessions will appear here"})]}):n.jsx("div",{className:"space-y-4",children:m.map(v=>n.jsx("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-lg p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center mr-4",children:n.jsx(qs,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center mb-2",children:[n.jsx("span",{className:"text-sm font-medium text-gray-600 mr-2",children:"Confirmation Code:"}),n.jsx("span",{className:"font-mono text-lg font-bold text-green-700 bg-green-100 px-3 py-1 rounded",children:v.confirmation_code})]}),v.metadata&&n.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg mb-3",children:[n.jsxs("p",{className:"text-sm font-medium text-gray-900 mb-1",children:[" ",v.metadata.user_name||v.metadata.user_email||"Unknown User"]}),n.jsxs("p",{className:"text-xs text-gray-600 mb-1",children:[" ",v.metadata.user_email||"No email"]}),n.jsxs("p",{className:"text-xs text-gray-600 mb-1",children:[" Company: ",v.metadata.company_id||"Unknown"]}),n.jsxs("p",{className:"text-xs text-gray-600",children:[" Platform: ",v.metadata.platform||"Unknown"," | App: ",v.metadata.app_version||"Unknown"]}),v.metadata.resolution&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[" Resolution: ",v.metadata.resolution," | FPS: ",v.metadata.frame_rate||"Unknown"]})]}),n.jsxs("p",{className:"text-sm text-gray-600",children:[n.jsx(Pn,{className:"h-4 w-4 inline mr-1"}),"Started: ",new Date(v.created_at).toLocaleString()]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"User is waiting for you to join their screen"})]})]}),n.jsx("button",{onClick:()=>p(v.confirmation_code),className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium shadow-sm hover:shadow-md",children:"Join Screen Share"})]})},v.id))})})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow",children:[n.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Waiting Live Chats"}),n.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[a.length," Waiting"]})]})}),n.jsx("div",{className:"p-6",children:a.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(Wa,{className:"h-8 w-8 text-gray-400"})}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Waiting Chats"}),n.jsx("p",{className:"text-gray-500",children:"When users request live chat support, their sessions will appear here"})]}):n.jsx("div",{className:"space-y-4",children:a.map(v=>n.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-lg p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center mr-4",children:n.jsx(Wa,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center mb-2",children:[n.jsx("span",{className:"text-sm font-medium text-gray-600 mr-2",children:"User ID:"}),n.jsx("span",{className:"font-mono text-sm font-bold text-blue-700 bg-blue-100 px-2 py-1 rounded",children:v.user_id})]}),n.jsxs("p",{className:"text-sm text-gray-600",children:[n.jsx(Pn,{className:"h-4 w-4 inline mr-1"}),"Waiting since: ",new Date(v.started_at??v.created_at??new Date().toISOString()).toLocaleString()]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"User is waiting for live chat support"})]})]}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsx("button",{onClick:()=>f(v.id),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium shadow-sm hover:shadow-md",children:"Start Chat"}),n.jsx("button",{onClick:()=>b(v.id),className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors font-medium shadow-sm hover:shadow-md",children:"End Chat"})]})]})},v.id))})})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow",children:[n.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Quick Actions"})}),n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("button",{className:"flex items-center justify-center p-6 border border-gray-200 rounded-lg hover:bg-gray-50 hover:border-green-300 transition-all duration-200 group",children:[n.jsx(v1,{className:"h-6 w-6 text-green-500 mr-3 group-hover:text-green-600"}),n.jsx("span",{className:"font-medium text-gray-700 group-hover:text-gray-900",children:"Call Customer"})]}),n.jsxs("button",{className:"flex items-center justify-center p-6 border border-gray-200 rounded-lg hover:bg-gray-50 hover:border-blue-300 transition-all duration-200 group",children:[n.jsx(ji,{className:"h-6 w-6 text-blue-500 mr-3 group-hover:text-blue-600"}),n.jsx("span",{className:"font-medium text-gray-700 group-hover:text-gray-900",children:"Send Email"})]}),n.jsxs("button",{className:"flex items-center justify-center p-6 border border-gray-200 rounded-lg hover:bg-gray-50 hover:border-orange-300 transition-all duration-200 group",children:[n.jsx(td,{className:"h-6 w-6 text-orange-500 mr-3 group-hover:text-orange-600"}),n.jsx("span",{className:"font-medium text-gray-700 group-hover:text-gray-900",children:"Create Ticket"})]})]})})]})]})},M1=()=>{const[t,e]=g.useState(""),[r,s]=g.useState("all"),[a,i]=g.useState("all"),[l,o]=g.useState("tickets"),c=[{title:"Open Tickets",value:"23",change:"+5",changeType:"increase",icon:Wa,color:"bg-red-500"},{title:"Resolved Today",value:"18",change:"+3",changeType:"increase",icon:Bs,color:"bg-green-500"},{title:"Avg Response Time",value:"2.4h",change:"-0.5h",changeType:"decrease",icon:Pn,color:"bg-green-500"},{title:"Knowledge Articles",value:"156",change:"+12",changeType:"increase",icon:Yn,color:"bg-purple-500"}],d=[{id:"TKT-001",title:"Desktop app installation issue on Windows 11",user:"john.doe@company.com",category:"installation",priority:"high",status:"open",assignedTo:"Support Team",createdAt:"2024-01-15T10:30:00Z",lastUpdated:"2024-01-15T14:20:00Z"},{id:"TKT-002",title:"Cannot access company events after role change",user:"jane.smith@startup.io",category:"permissions",priority:"medium",status:"in-progress",assignedTo:"Admin Team",createdAt:"2024-01-14T16:45:00Z",lastUpdated:"2024-01-15T11:15:00Z"},{id:"TKT-003",title:"Chat system not working in mobile app",user:"mike.johnson@enterprise.com",category:"mobile",priority:"high",status:"resolved",assignedTo:"Mobile Team",createdAt:"2024-01-13T09:20:00Z",lastUpdated:"2024-01-14T15:30:00Z"}],h=[{title:"Getting Started with OnTimely",category:"onboarding",views:1247,lastUpdated:"2024-01-10",type:"guide"},{title:"Troubleshooting Common Login Issues",category:"authentication",views:892,lastUpdated:"2024-01-08",type:"troubleshooting"},{title:"Setting Up Company Events",category:"events",views:654,lastUpdated:"2024-01-05",type:"guide"},{title:"Mobile App Configuration",category:"mobile",views:543,lastUpdated:"2024-01-03",type:"guide"}],u=[{value:"all",label:"All Categories"},{value:"installation",label:"Installation"},{value:"permissions",label:"Permissions"},{value:"mobile",label:"Mobile"},{value:"events",label:"Events"},{value:"billing",label:"Billing"}],m=[{value:"all",label:"All Status"},{value:"open",label:"Open"},{value:"in-progress",label:"In Progress"},{value:"resolved",label:"Resolved"},{value:"closed",label:"Closed"}],y=[{value:"low",label:"Low",color:"bg-green-100 text-green-800"},{value:"medium",label:"Medium",color:"bg-yellow-100 text-yellow-800"},{value:"high",label:"High",color:"bg-red-100 text-red-800"}],w=d.filter(f=>{const b=f.title.toLowerCase().includes(t.toLowerCase())||f.user.toLowerCase().includes(t.toLowerCase()),v=r==="all"||f.category===r,C=a==="all"||f.status===a;return b&&v&&C}),_=f=>{const b=y.find(v=>v.value===f);return b?n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${b.color}`,children:b.label}):null},N=f=>{const b={open:{color:"bg-red-100 text-red-800",label:"Open"},"in-progress":{color:"bg-green-100 text-green-800",label:"In Progress"},resolved:{color:"bg-green-100 text-green-800",label:"Resolved"},closed:{color:"bg-gray-100 text-gray-800",label:"Closed"}},v=b[f]||b.open;return n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${v.color}`,children:v.label})},x=f=>new Date(f).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),p=f=>({installation:"",permissions:"",mobile:"",events:"",billing:""})[f]||"";return n.jsxs("div",{className:"p-8",children:[n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Support & Help"}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Manage support tickets and provide user assistance"})]}),n.jsxs("button",{className:"btn-primary",children:[n.jsx(Ws,{className:"h-4 w-4"}),"New Support Ticket"]})]})}),n.jsx("div",{className:"border-b border-gray-200 mb-6",children:n.jsxs("nav",{className:"-mb-px flex space-x-8",children:[n.jsx("button",{onClick:()=>o("tickets"),className:`py-2 px-1 border-b-2 font-medium text-sm ${l==="tickets"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Support Tickets"}),n.jsx("button",{onClick:()=>o("help-center"),className:`py-2 px-1 border-b-2 font-medium text-sm ${l==="help-center"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Live Support"})]})}),l==="help-center"?n.jsx(L1,{}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:c.map((f,b)=>{const v=f.icon;return n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:f.title}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f.value})]}),n.jsx("div",{className:`p-3 rounded-lg ${f.color}`,children:n.jsx(v,{className:"h-6 w-6 text-white"})})]}),n.jsxs("div",{className:"mt-4 flex items-center",children:[n.jsx("span",{className:`text-sm font-medium ${f.changeType==="increase"?"text-green-600":"text-red-600"}`,children:f.change}),n.jsx("span",{className:"text-sm text-gray-600 ml-2",children:"from yesterday"})]})]},b)})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"p-3 bg-green-100 rounded-lg inline-block mb-4",children:n.jsx(Yn,{className:"h-8 w-8 text-green-600"})}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Knowledge Base"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Browse help articles and tutorials"}),n.jsx("button",{className:"btn-outline w-full",children:"Browse Articles"})]})}),n.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"p-3 bg-green-100 rounded-lg inline-block mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Video Tutorials"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Watch step-by-step guides"}),n.jsx("button",{className:"btn-outline w-full",children:"Watch Videos"})]})}),n.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"p-3 bg-purple-100 rounded-lg inline-block mb-4",children:n.jsx(tp,{className:"h-8 w-8 text-purple-600"})}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Live Chat"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Get instant help from support team"}),n.jsx("button",{className:"btn-outline w-full",children:"Start Chat"})]})})]}),n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Support Tickets"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("select",{value:r,onChange:f=>s(f.target.value),className:"input",children:u.map(f=>n.jsx("option",{value:f.value,children:f.label},f.value))}),n.jsx("select",{value:a,onChange:f=>i(f.target.value),className:"input",children:m.map(f=>n.jsx("option",{value:f.value,children:f.label},f.value))})]})]}),n.jsxs("div",{className:"relative",children:[n.jsx(la,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search tickets by title or user email...",value:t,onChange:f=>e(f.target.value),className:"input pl-10 w-full"})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ticket"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priority"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned To"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Updated"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:w.map(f=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:f.title}),n.jsx("div",{className:"text-sm text-gray-500",children:f.id})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(sp,{className:"h-4 w-4 text-gray-400 mr-2"}),n.jsx("span",{className:"text-sm text-gray-900",children:f.user})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-lg mr-2",children:p(f.category)}),n.jsx("span",{className:"text-sm text-gray-900 capitalize",children:f.category})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:_(f.priority)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:N(f.status)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:f.assignedTo}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:x(f.lastUpdated)})]},f.id))})]})})]}),n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Knowledge Base"}),n.jsxs("button",{className:"btn-outline",children:[n.jsx(Ws,{className:"h-4 w-4"}),"Add Article"]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h.map((f,b)=>n.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-gray-300 transition-colors cursor-pointer",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:f.title}),n.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[n.jsx("span",{className:"capitalize",children:f.category}),n.jsxs("span",{children:[f.views," views"]}),n.jsxs("span",{children:["Updated ",f.lastUpdated]})]})]}),n.jsx("div",{className:"ml-4",children:n.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${f.type==="guide"?"bg-green-100 text-green-800":f.type==="troubleshooting"?"bg-orange-100 text-orange-800":"bg-green-100 text-green-800"}`,children:f.type})})]})},b))})]})]})]})},F1=()=>{var _;const[t,e]=g.useState(""),[r,s]=g.useState(!1),[a,i]=g.useState(null),[l,o]=g.useState(null),[c,d]=g.useState(!1),h=g.useRef(null),u=g.useRef(null),m=g.useRef(null);g.useEffect(()=>()=>{u.current&&u.current.close(),m.current&&m.current.getTracks().forEach(N=>N.stop())},[]);const y=async()=>{if(!t.trim()){o("Please enter a confirmation code");return}d(!0),o(null);try{const{data:N,error:x}=await L.from("screen_share_sessions").select("*").eq("confirmation_code",t.toUpperCase().trim()).eq("status","active").single();if(x||!N){o("Invalid or expired confirmation code. Please check the code and try again."),d(!1);return}i(N);const p=await es.getCurrentUser();if(!p){o("You must be logged in to join a session"),d(!1);return}const{error:f}=await L.from("screen_share_sessions").update({agent_id:p.id,status:"active"}).eq("id",N.id);f&&console.warn("Failed to update session with agent:",f),s(!0),d(!1);const b=L.channel(`screen_share_${N.id}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"screen_share_sessions",filter:`id=eq.${N.id}`},v=>{(v.new.status==="completed"||v.new.status==="expired")&&w()}).subscribe();return()=>{L.removeChannel(b)}}catch(N){console.error("Error joining session:",N),o(N.message||"Failed to join session. Please try again."),d(!1)}},w=()=>{u.current&&(u.current.close(),u.current=null),m.current&&(m.current.getTracks().forEach(N=>N.stop()),m.current=null),h.current&&(h.current.srcObject=null),s(!1),i(null),e(""),o(null)};return n.jsxs("div",{className:"p-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(As,{className:"h-8 w-8 text-green-600"}),n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Screen Sharing"})]}),n.jsx("p",{className:"text-gray-600",children:"Enter a confirmation code to view a customer's screen"})]}),r?n.jsxs("div",{className:"space-y-6",children:[a&&n.jsxs("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:n.jsx(Bs,{className:"h-6 w-6 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Connected to Session"}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Code: ",n.jsx("span",{className:"font-mono font-bold text-green-600",children:a.confirmation_code})]})]})]}),n.jsxs("button",{onClick:w,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:[n.jsx(Bt,{className:"h-4 w-4"}),"Disconnect"]})]}),a.metadata&&n.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500",children:"User"}),n.jsx("p",{className:"font-medium text-gray-900",children:a.metadata.user_name||a.metadata.user_email||"Unknown"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500",children:"Email"}),n.jsx("p",{className:"font-medium text-gray-900",children:a.metadata.user_email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500",children:"Platform"}),n.jsx("p",{className:"font-medium text-gray-900",children:a.metadata.platform||"Unknown"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500",children:"Started"}),n.jsx("p",{className:"font-medium text-gray-900",children:new Date(a.created_at).toLocaleTimeString()})]})]})]}),n.jsx("div",{className:"bg-black rounded-lg shadow-lg border border-gray-200 overflow-hidden",children:n.jsxs("div",{className:"aspect-video bg-gray-900 flex items-center justify-center relative",children:[n.jsx("video",{ref:h,autoPlay:!0,playsInline:!0,className:"w-full h-full object-contain",style:{maxHeight:"80vh"}}),!((_=h.current)!=null&&_.srcObject)&&n.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-white",children:[n.jsx(As,{className:"h-16 w-16 text-gray-600 mb-4"}),n.jsx("p",{className:"text-gray-400",children:"Waiting for screen share stream..."}),n.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"The customer's screen will appear here once they start sharing"})]})]})}),n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:n.jsxs("p",{className:"text-sm text-yellow-800",children:[n.jsx("strong",{children:"Note:"})," Full WebRTC screen sharing implementation is in progress. Currently, the session connection is established. The video stream will be displayed here once WebRTC peer connection is fully configured."]})})]}):n.jsxs("div",{className:"max-w-2xl mx-auto",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-8",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(qs,{className:"h-10 w-10 text-green-600"})}),n.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Join Screen Share Session"}),n.jsx("p",{className:"text-gray-600",children:"Ask the customer for their confirmation code and enter it below"})]}),l&&n.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3",children:[n.jsx(td,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),n.jsx("div",{className:"flex-1",children:n.jsx("p",{className:"text-sm font-medium text-red-800",children:l})}),n.jsx("button",{onClick:()=>o(null),className:"text-red-600 hover:text-red-800",children:n.jsx(Bt,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"confirmationCode",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirmation Code"}),n.jsx("input",{id:"confirmationCode",type:"text",value:t,onChange:N=>e(N.target.value.toUpperCase()),onKeyPress:N=>{N.key==="Enter"&&!c&&y()},placeholder:"Enter 6-character code",maxLength:6,className:"w-full px-4 py-3 text-2xl font-mono text-center tracking-widest border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",style:{letterSpacing:"0.5em"},disabled:c}),n.jsx("p",{className:"mt-2 text-sm text-gray-500 text-center",children:"The customer will provide this code when they start screen sharing"})]}),n.jsx("button",{onClick:y,disabled:c||!t.trim(),className:"w-full py-3 px-6 bg-green-600 text-white rounded-lg font-semibold text-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2",children:c?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Connecting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(As,{className:"h-5 w-5"}),"Join Session"]})})]})]}),n.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-3",children:"How it works:"}),n.jsxs("ol",{className:"space-y-2 text-sm text-blue-800 list-decimal list-inside",children:[n.jsx("li",{children:'Customer clicks "Share Screen" in the desktop app'}),n.jsx("li",{children:"They receive a 6-character confirmation code"}),n.jsx("li",{children:"Customer shares the code with you"}),n.jsx("li",{children:'Enter the code above and click "Join Session"'}),n.jsx("li",{children:"You'll be able to view their screen in real-time"})]})]})]})]})},z1=()=>{const[t,e]=g.useState([]),[r,s]=g.useState(!0),[a,i]=g.useState(!1),[l,o]=g.useState(!1),[c,d]=g.useState(!1),[h,u]=g.useState(null),[m,y]=g.useState(null),[w,_]=g.useState(!1),[N,x]=g.useState(!1),[p,f]=g.useState(null),b=g.useRef(null),[v,C]=g.useState(!1),[P,U]=g.useState(""),[J,W]=g.useState(""),[G,De]=g.useState({developerGuide:!0,submissionForm:!0,backgroundTemplate:!0}),[Se,R]=g.useState(!1),[I,V]=g.useState({app_key:"",app_name:"",short_description:"",full_description:"",app_type:"service",icon_name:"",image_url:"",version:"1.0.0",developer_name:"",developer_email:"",is_active:!0,is_featured:!1,features:[],build_instructions:{},mobile_integration_config:{}});g.useEffect(()=>{H()},[]);const H=async()=>{try{s(!0);const{data:k,error:Z}=await L.from("available_apps").select("*").order("is_featured",{ascending:!1}).order("app_name",{ascending:!0});if(Z)throw Z;const ie=(k||[]).map(T=>({...T,features:Array.isArray(T.features)?T.features:[],build_instructions:T.build_instructions||{},mobile_integration_config:T.mobile_integration_config||{}}));e(ie)}catch(k){console.error("Error fetching apps:",k),Y.error("Failed to load apps")}finally{s(!1)}},S=async k=>{try{x(!0);const Z=k.name.split(".").pop(),ie=`${I.app_key||"app"}-${Date.now()}.${Z}`,T=`app-images/${ie}`;{const A=new FileReader,z=await new Promise((we,tt)=>{A.onload=()=>{const He=A.result;we(He)},A.onerror=tt,A.readAsDataURL(k)}),ne=await fetch("/api/upload-app-image",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file:z,fileName:ie,fileType:k.type})});if(!ne.ok){const we=await ne.json();throw new Error(we.error||"Failed to upload image")}const{url:se}=await ne.json();V({...I,image_url:se}),f(se),Y.success("Image uploaded successfully")}}catch(Z){console.error("Error uploading image:",Z),Y.error(Z.message||"Failed to upload image")}finally{x(!1)}},D=k=>{var ie;const Z=(ie=k.target.files)==null?void 0:ie[0];if(Z){if(!Z.type.startsWith("image/")){Y.error("Please select an image file");return}if(Z.size>5*1024*1024){Y.error("Image size must be less than 5MB");return}S(Z)}},q=async k=>{try{const{error:Z}=await L.from("available_apps").update({is_active:!k.is_active}).eq("id",k.id);if(Z)throw Z;Y.success(`App ${k.is_active?"deactivated":"activated"}`),H()}catch(Z){console.error("Error toggling app:",Z),Y.error("Failed to update app")}},j=async k=>{try{const{error:Z}=await L.from("available_apps").update({is_featured:!k.is_featured}).eq("id",k.id);if(Z)throw Z;Y.success(`App ${k.is_featured?"unfeatured":"featured"}`),H()}catch(Z){console.error("Error toggling featured:",Z),Y.error("Failed to update app")}},K=k=>{y(k),d(!0)},Fe=async()=>{if(m)try{_(!0);const{error:k}=await L.from("available_apps").delete().eq("id",m.id);if(k)throw k;Y.success("App deleted successfully"),d(!1),y(null),H()}catch(k){console.error("Error deleting app:",k),Y.error("Failed to delete app")}finally{_(!1)}},re=k=>{u(k),V({app_key:k.app_key,app_name:k.app_name,short_description:k.short_description,full_description:k.full_description||"",app_type:k.app_type,icon_name:k.icon_name||"",image_url:k.image_url||"",version:k.version,developer_name:k.developer_name||"",developer_email:k.developer_email||"",is_active:k.is_active,is_featured:k.is_featured,features:k.features,build_instructions:k.build_instructions,mobile_integration_config:k.mobile_integration_config}),f(k.image_url),o(!0)},_e=()=>{u(null),V({app_key:"",app_name:"",short_description:"",full_description:"",app_type:"service",icon_name:"",image_url:"",version:"1.0.0",developer_name:"",developer_email:"",is_active:!0,is_featured:!1,features:[],build_instructions:{},mobile_integration_config:{}}),f(null),i(!0)},Ce=async()=>{try{if(!I.app_key||!I.app_name||!I.short_description){Y.error("Please fill in all required fields");return}const k={...I,features:I.features||[],build_instructions:I.build_instructions||{},mobile_integration_config:I.mobile_integration_config||{}};if(h){const{error:Z}=await L.from("available_apps").update(k).eq("id",h.id);if(Z)throw Z;Y.success("App updated successfully")}else{const{error:Z}=await L.from("available_apps").insert([k]);if(Z)throw Z;Y.success("App created successfully")}i(!1),o(!1),u(null),f(null),H()}catch(k){console.error("Error saving app:",k),Y.error(k.message||"Failed to save app")}},ze=async()=>{try{let k="";try{const A=await fetch("/DEVELOPER_GUIDE.md");if(A.ok)k=await A.text();else throw new Error("File not found locally")}catch{const A="https://raw.githubusercontent.com/ontimely/ontimely/main/DEVELOPER_GUIDE.md",z=await fetch(A);if(z.ok)k=await z.text();else{window.open(A,"_blank"),Y("Opening Developer Guide in new tab");return}}const Z=new Blob([k],{type:"text/markdown"}),ie=URL.createObjectURL(Z),T=document.createElement("a");T.href=ie,T.download="OnTimely-Developer-Guide.md",document.body.appendChild(T),T.click(),document.body.removeChild(T),URL.revokeObjectURL(ie),Y.success("Developer Guide downloaded")}catch(k){console.error("Error downloading guide:",k),Y.error("Failed to download guide. Please try again.")}},$=async()=>{try{let k=null;try{const T=await fetch("/apps_background.png");if(T.ok)k=await T.blob();else throw new Error("File not found locally")}catch{const T="https://raw.githubusercontent.com/ontimely/ontimely/main/apps_background.png",A=await fetch(T);if(A.ok)k=await A.blob();else{window.open(T,"_blank"),Y("Opening background template in new tab");return}}const Z=URL.createObjectURL(k),ie=document.createElement("a");ie.href=Z,ie.download="apps_background.png",document.body.appendChild(ie),ie.click(),document.body.removeChild(ie),URL.revokeObjectURL(Z),Y.success("Background template downloaded")}catch(k){console.error("Error downloading background:",k),Y.error("Failed to download background. Please try again.")}},ce=async()=>{try{let k="";try{const A=await fetch("/APP_SUBMISSION_FORM.md");if(A.ok)k=await A.text();else throw new Error("File not found locally")}catch{const A="https://raw.githubusercontent.com/ontimely/ontimely/main/APP_SUBMISSION_FORM.md",z=await fetch(A);if(z.ok)k=await z.text();else{window.open(A,"_blank"),Y("Opening Submission Form in new tab");return}}const Z=new Blob([k],{type:"text/markdown"}),ie=URL.createObjectURL(Z),T=document.createElement("a");T.href=ie,T.download="OnTimely-App-Submission-Form.md",document.body.appendChild(T),T.click(),document.body.removeChild(T),URL.revokeObjectURL(ie),Y.success("Submission Form downloaded")}catch(k){console.error("Error downloading form:",k),Y.error("Failed to download form. Please try again.")}},et=async()=>{if(!P||!P.includes("@")){Y.error("Please enter a valid email address");return}if(!G.developerGuide&&!G.submissionForm&&!G.backgroundTemplate){Y.error("Please select at least one document to send");return}try{R(!0);const k=[];G.developerGuide&&k.push("Developer Guide"),G.submissionForm&&k.push("App Submission Form"),G.backgroundTemplate&&k.push("App Background Template");const Z="",ie=encodeURIComponent("OnTimely Developer Documents");let ne=`Hi ${J||"Developer"},

Thank you for your interest in developing apps for OnTimely!

Please find the requested documents below:

${G.developerGuide?"- Developer Guide: https://docs.ontimely.co.uk/developer-guide":""}
${G.submissionForm?"- App Submission Form: https://docs.ontimely.co.uk/submission-form":""}
${G.backgroundTemplate?"- App Background Template: https://raw.githubusercontent.com/ontimely/ontimely/main/apps_background.png":""}

${G.backgroundTemplate?`
IMPORTANT: All app images must use the OnTimely background template (apps_background.png).
Your app icon/content should be placed on top of this background to ensure visual consistency.
`:""}

Next Steps:
1. Review the Developer Guide
${G.backgroundTemplate?`2. Download the App Background Template (if not already included)
`:""}${G.submissionForm?`${G.backgroundTemplate?"3":"2"}. Fill out the App Submission Form`:""}
${G.submissionForm?`${G.backgroundTemplate?"4":"3"}. Submit your completed form to developers@ontimely.co.uk`:""}
${G.submissionForm?`${G.backgroundTemplate?"5":"4"}. Our team will review your submission within 5-7 business days`:""}

If you have any questions, please contact developers@ontimely.co.uk

Best regards,
The OnTimely Team`;ne=encodeURIComponent(ne),window.location.href=`mailto:${P}?subject=${ie}&body=${ne}`,Y.success("Email client opened. Please send the email manually."),C(!1),U(""),W(""),De({developerGuide:!0,submissionForm:!0,backgroundTemplate:!0})}catch(k){console.error("Error sending documents:",k),Y.error(k.message||"Failed to send documents. Please try again.")}finally{R(!1)}};return r?n.jsx("div",{className:"p-8",children:n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})})}):n.jsxs("div",{className:"p-8 bg-gray-50 min-h-screen",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Apps Management"}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Manage available apps and add-ons for OnTimely users"})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("button",{onClick:ze,className:"flex items-center space-x-2 px-3 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",title:"Download Developer Guide",children:[n.jsx(Yn,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden md:inline",children:"Guide"})]}),n.jsxs("button",{onClick:ce,className:"flex items-center space-x-2 px-3 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",title:"Download Submission Form",children:[n.jsx(Vo,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden md:inline",children:"Form"})]}),n.jsxs("button",{onClick:$,className:"flex items-center space-x-2 px-3 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",title:"Download App Background Template",children:[n.jsx(Rs,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden md:inline",children:"Background"})]})]}),n.jsxs("button",{onClick:()=>C(!0),className:"flex items-center space-x-2 px-4 py-2 border border-green-600 text-green-600 rounded-lg hover:bg-green-50 transition-colors",children:[n.jsx(ji,{className:"h-5 w-5"}),n.jsx("span",{children:"Send to Developer"})]}),n.jsxs("button",{onClick:_e,className:"flex items-center space-x-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:[n.jsx(Ws,{className:"h-5 w-5"}),n.jsx("span",{children:"Add New App"})]})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(k=>n.jsxs("div",{className:`bg-white rounded-lg shadow-md border-2 p-6 ${k.is_featured?"border-yellow-400":"border-gray-200"}`,children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:k.app_name}),k.is_featured&&n.jsx(Gu,{className:"h-5 w-5 text-yellow-400 fill-yellow-400"})]}),n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:k.app_key})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{onClick:()=>j(k),className:"p-2 hover:bg-gray-100 rounded transition-colors",title:k.is_featured?"Unfeature":"Feature",children:k.is_featured?n.jsx(Gu,{className:"h-5 w-5 text-yellow-400 fill-yellow-400"}):n.jsx(b1,{className:"h-5 w-5 text-gray-400"})}),n.jsx("button",{onClick:()=>q(k),className:"p-2 hover:bg-gray-100 rounded transition-colors",title:k.is_active?"Deactivate":"Activate",children:k.is_active?n.jsx(qs,{className:"h-5 w-5 text-green-600"}):n.jsx(ep,{className:"h-5 w-5 text-gray-400"})})]})]}),n.jsx("p",{className:"text-gray-700 mb-4",children:k.short_description}),n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm",children:k.app_type}),n.jsxs("span",{className:"text-sm text-gray-500",children:["v",k.version]})]}),k.features&&k.features.length>0&&n.jsxs("div",{className:"mb-4",children:[n.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Features:"}),n.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[k.features.slice(0,3).map((Z,ie)=>n.jsxs("li",{className:"flex items-start",children:[n.jsx("span",{className:"text-green-600 mr-2",children:""}),Z]},ie)),k.features.length>3&&n.jsxs("li",{className:"text-gray-400",children:["+",k.features.length-3," more"]})]})]}),n.jsxs("div",{className:"flex space-x-2 mt-4",children:[n.jsxs("button",{onClick:()=>re(k),className:"flex-1 flex items-center justify-center space-x-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:[n.jsx(_i,{className:"h-4 w-4"}),n.jsx("span",{children:"Edit"})]}),n.jsx("button",{onClick:()=>K(k),className:"flex items-center justify-center space-x-2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors px-4",children:n.jsx(wt,{className:"h-4 w-4"})})]})]},k.id))}),t.length===0&&n.jsxs("div",{className:"text-center py-12 bg-white rounded-lg",children:[n.jsx("p",{className:"text-gray-500 text-lg",children:"No apps found"}),n.jsx("button",{onClick:_e,className:"mt-4 text-green-600 hover:text-green-700 font-semibold",children:"Add your first app"})]}),c&&m&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[n.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:n.jsx(wt,{className:"h-6 w-6 text-red-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete App"}),n.jsx("p",{className:"text-sm text-gray-500",children:"This action cannot be undone"})]})]}),n.jsxs("p",{className:"text-gray-700 mb-6",children:["Are you sure you want to delete ",n.jsxs("span",{className:"font-semibold",children:['"',m.app_name,'"']}),"? This will remove it from all events where it's currently enabled."]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx("button",{onClick:()=>{d(!1),y(null)},disabled:w,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:Fe,disabled:w,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center space-x-2",children:w?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),n.jsx("span",{children:"Deleting..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(wt,{className:"h-4 w-4"}),n.jsx("span",{children:"Delete"})]})})]})]})}),(a||l)&&n.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex",children:[n.jsx("div",{className:"w-64"}),n.jsxs("div",{className:"flex-1 bg-white overflow-y-auto",children:[n.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-8 py-4 flex justify-between items-center z-10",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:h?"Edit App":"Add New App"}),n.jsx("button",{onClick:()=>{i(!1),o(!1),u(null),f(null)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(Bt,{className:"h-6 w-6"})})]}),n.jsxs("div",{className:"p-8 max-w-4xl mx-auto space-y-6",children:[n.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"App Key * (unique identifier)"}),n.jsx("input",{type:"text",value:I.app_key||"",onChange:k=>V({...I,app_key:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"flightTracker",disabled:!!h})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"App Name *"}),n.jsx("input",{type:"text",value:I.app_name||"",onChange:k=>V({...I,app_name:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Flight Tracker"})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Short Description *"}),n.jsx("input",{type:"text",value:I.short_description||"",onChange:k=>V({...I,short_description:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Real-time flight status tracking"})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Description"}),n.jsx("textarea",{value:I.full_description||"",onChange:k=>V({...I,full_description:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",rows:4,placeholder:"Detailed description of the app..."})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"App Type *"}),n.jsxs("select",{value:I.app_type||"service",onChange:k=>V({...I,app_type:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[n.jsx("option",{value:"service",children:"Service"}),n.jsx("option",{value:"tool",children:"Tool"}),n.jsx("option",{value:"file",children:"File"}),n.jsx("option",{value:"field",children:"Field"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Version"}),n.jsx("input",{type:"text",value:I.version||"1.0.0",onChange:k=>V({...I,version:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"1.0.0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Icon Name"}),n.jsx("input",{type:"text",value:I.icon_name||"",onChange:k=>V({...I,icon_name:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"airplane"})]})]})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"App Image"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Image URL"}),n.jsx("input",{type:"text",value:I.image_url||"",onChange:k=>{V({...I,image_url:k.target.value}),f(k.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"/images/flighttracker.jpg or https://..."}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter image URL or upload a file below"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Image"}),n.jsx("input",{ref:b,type:"file",accept:"image/*",onChange:D,className:"hidden"}),n.jsx("button",{type:"button",onClick:()=>{var k;return(k=b.current)==null?void 0:k.click()},disabled:N,className:"w-full px-4 py-2 border-2 border-dashed border-gray-300 rounded-lg hover:border-green-500 transition-colors flex items-center justify-center space-x-2 disabled:opacity-50",children:N?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-green-600"}),n.jsx("span",{className:"text-gray-600",children:"Uploading..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(Rs,{className:"h-5 w-5 text-gray-400"}),n.jsx("span",{className:"text-gray-600",children:"Choose Image"})]})}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Max 5MB, JPG/PNG/GIF"})]})]}),(p||I.image_url)&&n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preview"}),n.jsx("div",{className:"relative w-full h-48 bg-gray-100 rounded-lg overflow-hidden border border-gray-300",children:n.jsx("img",{src:p||I.image_url||"",alt:"App preview",className:"w-full h-full object-cover",onError:()=>{f(null),Y.error("Failed to load image")}})}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"This image will appear in the desktop app when users view app details"})]})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Developer Information"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Developer Name"}),n.jsx("input",{type:"text",value:I.developer_name||"",onChange:k=>V({...I,developer_name:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"OnTimely"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Developer Email"}),n.jsx("input",{type:"email",value:I.developer_email||"",onChange:k=>V({...I,developer_email:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"developer@ontimely.co.uk"})]})]})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Features"}),n.jsx("textarea",{value:(I.features||[]).join(`
`),onChange:k=>{const Z=k.target.value.split(`
`).filter(ie=>ie.trim());V({...I,features:Z})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",rows:5,placeholder:"Enter features, one per line..."}),n.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Enter one feature per line"})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Status"}),n.jsxs("div",{className:"flex space-x-6",children:[n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",checked:I.is_active||!1,onChange:k=>V({...I,is_active:k.target.checked}),className:"mr-2 w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Active"})]}),n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",checked:I.is_featured||!1,onChange:k=>V({...I,is_featured:k.target.checked}),className:"mr-2 w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Featured"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[n.jsx("button",{onClick:()=>{i(!1),o(!1),u(null),f(null)},className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsxs("button",{onClick:Ce,className:"flex items-center space-x-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[n.jsx(rp,{className:"h-5 w-5"}),n.jsx("span",{children:"Save"})]})]})]})]})]}),v&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Send Documents to Developer"}),n.jsx("button",{onClick:()=>{C(!1),U(""),W("")},className:"text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(Bt,{className:"h-6 w-6"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Developer Name"}),n.jsx("input",{type:"text",value:J,onChange:k=>W(k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"John Doe"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Developer Email *"}),n.jsx("input",{type:"email",value:P,onChange:k=>U(k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"developer@example.com",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Documents to Send"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",checked:G.developerGuide,onChange:k=>De({...G,developerGuide:k.target.checked}),className:"mr-2 w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),n.jsxs("span",{className:"text-sm text-gray-700 flex items-center",children:[n.jsx(Yn,{className:"h-4 w-4 mr-2"}),"Developer Guide"]})]}),n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",checked:G.submissionForm,onChange:k=>De({...G,submissionForm:k.target.checked}),className:"mr-2 w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),n.jsxs("span",{className:"text-sm text-gray-700 flex items-center",children:[n.jsx(Vo,{className:"h-4 w-4 mr-2"}),"App Submission Form"]})]}),n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",checked:G.backgroundTemplate,onChange:k=>De({...G,backgroundTemplate:k.target.checked}),className:"mr-2 w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),n.jsxs("span",{className:"text-sm text-gray-700 flex items-center",children:[n.jsx(Rs,{className:"h-4 w-4 mr-2"}),"App Background Template (REQUIRED for all app images)"]})]})]})]}),n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:n.jsx("p",{className:"text-sm text-blue-800",children:"An email will be sent to the developer with links to download the selected documents and instructions on how to submit their app."})})]}),n.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[n.jsx("button",{onClick:()=>{C(!1),U(""),W("")},disabled:Se,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:et,disabled:Se||!P,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:Se?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),n.jsx("span",{children:"Sending..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(ji,{className:"h-4 w-4"}),n.jsx("span",{children:"Send Documents"})]})})]})]})})]})},B1=({user:t})=>{const e=Zs(),r=Qs(),[s,a]=g.useState(!1),i=[{name:"Dashboard",href:"/dashboard",icon:m1},{name:"Users",href:"/users",icon:Ie},{name:"Companies",href:"/companies",icon:rt},{name:"Smart Advertising",href:"/smart-advertising",icon:Go},{name:"Desktop App",href:"/desktop-app",icon:As},{name:"Analytics",href:"/analytics",icon:bi},{name:"Support",href:"/support",icon:tp},{name:"Screen Sharing",href:"/screen-sharing",icon:w1},{name:"Apps",href:"/apps",icon:Ko},{name:"Admin",href:"/admin",icon:rd}],l=async()=>{try{await es.logout(),r("/login")}catch(c){console.error("Logout failed:",c)}},o=c=>e.pathname===c;return n.jsxs("div",{className:"flex flex-col w-64 bg-white shadow-lg",children:[n.jsx("div",{className:"flex items-center justify-center h-16 px-4 border-b border-gray-200",children:n.jsx("div",{className:"flex items-center space-x-2",children:n.jsxs("svg",{viewBox:"0 0 1695.17 474.35",style:{height:"32px",width:"auto"},children:[n.jsx("defs",{children:n.jsx("style",{children:`
                .cls-1 {
                  fill: #000;
                }
                .cls-2 {
                  fill: #0ab27c;
                }
              `})}),n.jsxs("g",{children:[n.jsx("rect",{className:"cls-2",x:"148.69",y:"175.36",width:"23.87",height:"37.04"}),n.jsx("path",{className:"cls-2",d:"M250.64,92.09v120.3h-52.87v-43.2c0-4.8-1.85-8.9-5.56-12.31-3.65-3.35-8-5.03-13.06-5.03h-37.07c-5.05,0-9.4,1.68-13.06,5.03-3.7,3.41-5.55,7.51-5.55,12.31v43.2h-52.88v-120.3c0-10.31,8.36-18.68,18.69-18.68h142.69c10.32,0,18.68,8.36,18.68,18.68Z"}),n.jsx("rect",{className:"cls-2",x:"148.69",y:"218.32",width:"23.87",height:"37.04"}),n.jsx("path",{className:"cls-2",d:"M250.64,218.32v120.3c0,10.32-8.35,18.69-18.68,18.69H89.28c-10.32,0-18.69-8.36-18.69-18.69v-120.3h52.88v43.19c0,4.81,1.85,8.91,5.55,12.31,3.65,3.35,8.01,5.03,13.06,5.03h37.07c5.06,0,9.4-1.68,13.06-5.03,3.71-3.4,5.56-7.5,5.56-12.31v-43.19h52.87Z"}),n.jsx("polygon",{className:"cls-2",points:"339.54 197.05 343.42 212.4 339.54 212.4 339.54 197.05"}),n.jsx("path",{className:"cls-2",d:"M444.76,92.09v120.3h-49.61v-60.53h-25.22v60.53h-5.43l-15.2-60.53h-34.97v60.53h-49.62v-120.3c0-10.31,8.36-18.68,18.68-18.68h142.7c10.32,0,18.68,8.36,18.68,18.68Z"}),n.jsx("polygon",{className:"cls-2",points:"369.93 234.04 365.98 218.32 369.93 218.32 369.93 234.04"}),n.jsx("path",{className:"cls-2",d:"M444.76,218.32v120.3c0,10.32-8.35,18.69-18.68,18.69h-142.7c-10.31,0-18.68-8.36-18.68-18.69v-120.3h49.62v60.52h25.22v-60.52h5.38l15.32,60.52h34.9v-60.52h49.61Z"})]}),n.jsxs("g",{children:[n.jsx("path",{className:"cls-1",d:"M637.05,92.09v120.3h-77.43v-37.04h24.54v-23.49h-74.29v23.49h24.62v37.04h-77.5v-120.3c0-10.31,8.36-18.68,18.68-18.68h142.7c10.31,0,18.69,8.36,18.69,18.68Z"}),n.jsx("path",{className:"cls-1",d:"M637.05,218.32v120.3c0,10.32-8.37,18.69-18.69,18.69h-142.7c-10.31,0-18.68-8.36-18.68-18.69v-120.3h77.5v60.52h25.14v-60.52h77.43Z"}),n.jsx("path",{className:"cls-1",d:"M831.16,92.09v120.3h-77.42v-60.53h-25.21v60.53h-77.42v-120.3c0-10.31,8.36-18.68,18.68-18.68h142.7c10.31,0,18.68,8.36,18.68,18.68Z"}),n.jsx("path",{className:"cls-1",d:"M831.16,218.32v120.3c0,10.32-8.36,18.69-18.68,18.69h-142.7c-10.31,0-18.68-8.36-18.68-18.69v-120.3h77.42v60.52h25.21v-60.52h77.42Z"}),n.jsx("polygon",{className:"cls-1",points:"964.58 212.4 968.19 195.17 968.19 212.4 964.58 212.4"}),n.jsx("polygon",{className:"cls-1",points:"902.31 195.17 905.95 212.4 902.31 212.4 902.31 195.17"}),n.jsx("path",{className:"cls-1",d:"M1025.27,92.09v120.3h-31.87v-60.53h-34.97l-13.55,60.53h-19.17l-13.65-60.53h-34.97v60.53h-31.87v-120.3c0-10.31,8.36-18.68,18.68-18.68h142.7c10.31,0,18.68,8.36,18.68,18.68Z"}),n.jsx("polygon",{className:"cls-1",points:"935.33 255.06 927.04 218.32 943.55 218.32 935.33 255.06"}),n.jsx("path",{className:"cls-1",d:"M1025.27,218.32v120.3c0,10.32-8.36,18.69-18.68,18.69h-142.7c-10.31,0-18.68-8.36-18.68-18.69v-120.3h31.87v60.52h25.22v-60.52h4.9l12.81,60.52h30.62l12.7-60.52h4.86v60.52h25.22v-60.52h31.87Z"}),n.jsx("path",{className:"cls-1",d:"M1219.39,92.09v120.3h-63.46v-8.82h-34.97v-28.21h42.03v-23.49h-67.25v60.53h-56.4v-120.3c0-10.31,8.36-18.68,18.68-18.68h142.7c10.31,0,18.68,8.36,18.68,18.68Z"}),n.jsx("path",{className:"cls-1",d:"M1219.39,218.32v120.3c0,10.32-8.36,18.69-18.68,18.69h-142.7c-10.31,0-18.68-8.36-18.68-18.69v-120.3h56.4v60.52h67.25v-23.49h-42.03v-28.21h34.97v-8.82h63.46Z"}),n.jsx("path",{className:"cls-1",d:"M1413.5,92.09v120.3h-94.9v-60.53h-25.22v60.53h-59.93v-120.3c0-10.31,8.36-18.68,18.68-18.68h142.7c10.32,0,18.68,8.36,18.68,18.68Z"}),n.jsx("path",{className:"cls-1",d:"M1413.5,218.32v120.3c0,10.32-8.35,18.69-18.68,18.69h-142.7c-10.31,0-18.68-8.36-18.68-18.69v-120.3h59.93v60.52h60.19v-23.49h-34.97v-37.04h94.9Z"}),n.jsx("path",{className:"cls-1",d:"M1607.62,92.09v120.3h-70.11l19.14-60.53h-25.74c-3.64,12.33-8.08,32.5-13.31,60.53h-.09c-5.13-28.03-9.55-48.21-13.24-60.53h-25.74l19.18,60.53h-70.15v-120.3c0-10.31,8.36-18.68,18.68-18.68h142.7c10.31,0,18.68,8.36,18.68,18.68Z"}),n.jsx("path",{className:"cls-1",d:"M1607.62,218.32v120.3c0,10.32-8.36,18.69-18.68,18.69h-142.7c-10.31,0-18.68-8.36-18.68-18.69v-120.3h72.02l5.43,17.15v43.37h25.22v-43.45l5.4-17.07h71.98Z"})]}),n.jsxs("g",{children:[n.jsx("path",{className:"cls-1",d:"M1640.53,338.37c-5.22,0-9.46,4.25-9.46,9.46s4.25,9.46,9.46,9.46,9.46-4.25,9.46-9.46-4.25-9.46-9.46-9.46ZM1640.53,356.06c-4.53,0-8.22-3.69-8.22-8.22s3.69-8.22,8.22-8.22,8.22,3.69,8.22,8.22-3.69,8.22-8.22,8.22Z"}),n.jsx("path",{className:"cls-1",d:"M1640.77,350.94c-2.33,0-3.23-1.63-3.24-3.19-.01-1.57.97-3.27,3.24-3.27.82,0,1.65.28,2.27.89l1.18-1.14c-.97-.95-2.18-1.44-3.46-1.44-3.4,0-5,2.5-4.99,4.96.01,2.45,1.49,4.85,4.99,4.85,1.36,0,2.61-.44,3.58-1.4l-1.21-1.22c-.62.62-1.55.95-2.37.95Z"})]}),n.jsxs("g",{children:[n.jsx("path",{className:"cls-1",d:"M482.87,437.87h20.84v11.63h-33.34v-62.95h33.34v11.63h-20.84v13.98h17.35v11.67h-17.35v14.02Z"}),n.jsx("path",{className:"cls-1",d:"M537.16,386.56h12.69l-12.18,62.95h-16.61l-12.22-62.95h12.65c2.27,11.54,4.88,28.53,7.83,50.96,2.98-22.46,5.59-39.45,7.83-50.96Z"}),n.jsx("path",{className:"cls-1",d:"M569.4,437.87h20.84v11.63h-33.34v-62.95h33.34v11.63h-20.84v13.98h17.35v11.67h-17.35v14.02Z"}),n.jsx("path",{className:"cls-1",d:"M611.9,408.96v40.54h-12.5v-62.95h17.35l10.22,40.74v-40.74h12.5v62.95h-17.31l-10.26-40.54Z"}),n.jsx("path",{className:"cls-1",d:"M659.49,398.19h-12.22v-11.63h36.86v11.63h-12.18v51.32h-12.46v-51.32Z"}),n.jsx("path",{className:"cls-1",d:"M767.73,386.56v62.95h-12.54v-41.48l-8.7,41.48h-15.2l-8.77-41.48v41.48h-12.5v-62.95h17.35l11.52,51.16,11.48-51.16h17.35Z"}),n.jsx("path",{className:"cls-1",d:"M791.35,436.74l-2.55,12.77h-12.65l12.22-62.95h16.61l12.18,62.95h-12.69l-2.47-12.77h-10.65ZM793.62,425.1h6.07l-3.06-26.83-3.02,26.83Z"}),n.jsx("path",{className:"cls-1",d:"M836.94,408.96v40.54h-12.5v-62.95h17.35l10.22,40.74v-40.74h12.5v62.95h-17.31l-10.26-40.54Z"}),n.jsx("path",{className:"cls-1",d:"M888.18,436.74l-2.55,12.77h-12.65l12.22-62.95h16.61l12.18,62.95h-12.69l-2.47-12.77h-10.65ZM890.45,425.1h6.07l-3.06-26.83-3.02,26.83Z"}),n.jsx("path",{className:"cls-1",d:"M944.98,427.06h-5.92v-11.63h18.45v25.5c0,2.38-.93,4.4-2.78,6.07-1.8,1.67-3.96,2.51-6.46,2.51h-18.37c-2.51,0-4.67-.84-6.5-2.51-1.83-1.67-2.74-3.7-2.74-6.07v-45.79c0-2.38.91-4.41,2.74-6.11,1.83-1.65,4-2.47,6.5-2.47h18.37c2.51,0,4.66.82,6.46,2.47,1.85,1.7,2.78,3.73,2.78,6.11v12.65h-12.54v-9.6h-11.83v39.68h11.83v-10.81Z"}),n.jsx("path",{className:"cls-1",d:"M981.1,437.87h20.84v11.63h-33.34v-62.95h33.34v11.63h-20.84v13.98h17.35v11.67h-17.35v14.02Z"}),n.jsx("path",{className:"cls-1",d:"M1068.8,386.56v62.95h-12.54v-41.48l-8.7,41.48h-15.2l-8.77-41.48v41.48h-12.5v-62.95h17.35l11.52,51.16,11.48-51.16h17.35Z"}),n.jsx("path",{className:"cls-1",d:"M1093.64,437.87h20.84v11.63h-33.34v-62.95h33.34v11.63h-20.84v13.98h17.35v11.67h-17.35v14.02Z"}),n.jsx("path",{className:"cls-1",d:"M1136.14,408.96v40.54h-12.5v-62.95h17.35l10.22,40.74v-40.74h12.5v62.95h-17.31l-10.26-40.54Z"}),n.jsx("path",{className:"cls-1",d:"M1183.74,398.19h-12.22v-11.63h36.86v11.63h-12.18v51.32h-12.46v-51.32Z"}),n.jsx("path",{className:"cls-1",d:"M1257.65,398.19h-11.83v9.95c0,2.69,1.97,4.03,5.92,4.03,5.17,0,9.48,1.38,12.93,4.15,3.68,2.92,5.52,6.79,5.52,11.59v13.01c0,2.38-.93,4.4-2.78,6.07-1.8,1.67-3.96,2.51-6.46,2.51h-18.37c-2.51,0-4.67-.84-6.5-2.51-1.83-1.67-2.74-3.7-2.74-6.07v-12.69h12.5v9.64h11.83v-9.95c0-2.72-1.97-4.07-5.92-4.07-5.15,0-9.44-1.37-12.89-4.11-3.68-2.92-5.52-6.79-5.52-11.59v-13.01c0-2.38.91-4.41,2.74-6.11,1.83-1.65,4-2.47,6.5-2.47h18.37c2.51,0,4.66.82,6.46,2.47,1.85,1.7,2.78,3.73,2.78,6.11v12.65h-12.53v-9.6Z"}),n.jsx("path",{className:"cls-1",d:"M1308.03,386.56c2.51,0,4.66.82,6.46,2.47,1.85,1.7,2.78,3.73,2.78,6.11v45.79c0,2.38-.93,4.4-2.78,6.07-1.8,1.67-3.96,2.51-6.46,2.51h-18.37c-2.51,0-4.67-.84-6.5-2.51-1.83-1.67-2.74-3.7-2.74-6.07v-45.79c0-2.38.91-4.41,2.74-6.11,1.83-1.65,4-2.47,6.5-2.47h18.37ZM1292.91,398.19v39.68h11.83v-39.68h-11.83Z"}),n.jsx("path",{className:"cls-1",d:"M1329.34,386.56h33.34v11.63h-20.84v13.98h17.35v11.67h-17.35v25.66h-12.5v-62.95Z"}),n.jsx("path",{className:"cls-1",d:"M1377.4,398.19h-12.22v-11.63h36.86v11.63h-12.18v51.32h-12.46v-51.32Z"}),n.jsx("path",{className:"cls-1",d:"M1431.27,386.56h15.86l7.64,51.2c2.51-22.67,4.74-39.73,6.7-51.2h12.65l-10.73,62.95h-16.73l-7.44-45.32-7.44,45.32h-16.69l-10.81-62.95h12.65c1.96,11.46,4.19,28.53,6.7,51.2l7.64-51.2Z"}),n.jsx("path",{className:"cls-1",d:"M1488.77,436.74l-2.55,12.77h-12.65l12.22-62.95h16.61l12.18,62.95h-12.69l-2.47-12.77h-10.65ZM1491.04,425.1h6.07l-3.06-26.83-3.02,26.83Z"}),n.jsx("path",{className:"cls-1",d:"M1534.37,427.06v22.45h-12.5v-62.95h27.62c2.51,0,4.66.82,6.46,2.47,1.85,1.7,2.78,3.73,2.78,6.11v16.22c0,4.13-1.61,7.42-4.82,9.87,3.21,2.46,4.82,5.77,4.82,9.95v18.33h-12.54v-18.33c0-1.15-.44-2.13-1.33-2.94-.89-.78-1.93-1.18-3.13-1.18h-7.36ZM1541.73,415.43c1.2,0,2.25-.4,3.13-1.21.89-.76,1.33-1.71,1.33-2.86v-13.16h-11.83v17.24h7.36Z"}),n.jsx("path",{className:"cls-1",d:"M1583.1,437.87h20.84v11.63h-33.34v-62.95h33.34v11.63h-20.84v13.98h17.35v11.67h-17.35v14.02Z"})]})]})})}),n.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2",children:i.map(c=>{const d=c.icon;return n.jsxs(ey,{to:c.href,className:`flex items-center space-x-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${o(c.href)?"bg-green-50 text-green-700 border-r-2 border-green-700":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"}`,children:[n.jsx(d,{className:"h-5 w-5"}),n.jsx("span",{children:c.name})]},c.name)})}),n.jsx("div",{className:"border-t border-gray-200 p-4",children:n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>a(!s),className:"flex items-center w-full p-3 text-left rounded-lg hover:bg-gray-50 transition-colors",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-green-600 to-green-700 rounded-full flex items-center justify-center",children:n.jsx(sp,{className:"h-4 w-4 text-white"})})}),n.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:(t==null?void 0:t.name)||"Staff Member"}),n.jsx("p",{className:"text-xs text-gray-500 truncate capitalize",children:(t==null?void 0:t.role)||"staff"})]}),n.jsx(Zt,{className:`h-4 w-4 text-gray-400 transition-transform ${s?"rotate-180":""}`})]}),s&&n.jsx("div",{className:"absolute bottom-full left-0 right-0 mb-2 bg-white rounded-lg shadow-lg border border-gray-200 py-1",children:n.jsxs("button",{onClick:l,className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[n.jsx(f1,{className:"h-4 w-4 mr-2"}),"Sign Out"]})})]})})]})},pt=({children:t})=>{const[e,r]=g.useState(null),[s,a]=g.useState(!0);return g.useEffect(()=>{(async()=>{try{console.log(" PROTECTED ROUTE: Checking authentication...");const l=await es.init();console.log(" PROTECTED ROUTE: Auth state:",l),r(l)}catch(l){console.error(" PROTECTED ROUTE: Auth check failed:",l),r({user:null,isAuthenticated:!1,isLoading:!1,error:"Authentication failed"})}finally{a(!1)}})()},[]),s?n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):e!=null&&e.isAuthenticated?(console.log(" PROTECTED ROUTE: Authentication successful, rendering protected content"),n.jsx(n.Fragment,{children:t})):(console.log(" PROTECTED ROUTE: Not authenticated, redirecting to login"),n.jsx(bf,{to:"/login",replace:!0}))},gt=({children:t})=>{const[e,r]=g.useState(null);return g.useEffect(()=>{(async()=>{const a=await es.getCurrentUser();r(a)})()},[]),n.jsxs("div",{className:"flex h-screen bg-gray-50",children:[n.jsx(B1,{user:e}),n.jsx("main",{className:"flex-1 overflow-auto",children:t})]})};function q1(){return n.jsxs("div",{className:"App",children:[n.jsx(qy,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#fff",color:"#374151",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px"},success:{iconTheme:{primary:"#16a34a",secondary:"#fff"},style:{border:"1px solid #16a34a"}},error:{iconTheme:{primary:"#dc2626",secondary:"#fff"},style:{border:"1px solid #dc2626"}}}}),n.jsxs(Wx,{children:[n.jsx(Je,{path:"/login",element:n.jsx(N1,{})}),n.jsx(Je,{path:"/",element:n.jsx(pt,{children:n.jsx(gt,{children:n.jsx(Zu,{})})})}),n.jsx(Je,{path:"/dashboard",element:n.jsx(pt,{children:n.jsx(gt,{children:n.jsx(Zu,{})})})}),n.jsx(Je,{path:"/users",element:n.jsx(pt,{children:n.jsx(gt,{children:n.jsx(A1,{})})})}),n.jsx(Je,{path:"/companies",element:n.jsx(pt,{children:n.jsx(gt,{children:n.jsx(R1,{})})})}),n.jsx(Je,{path:"/companies/:id",element:n.jsx(pt,{children:n.jsx(gt,{children:n.jsx(D1,{})})})}),n.jsx(Je,{path:"/desktop-app",element:n.jsx(pt,{children:n.jsx(gt,{children:n.jsx(O1,{})})})}),n.jsx(Je,{path:"/analytics",element:n.jsx(pt,{children:n.jsx(gt,{children:n.jsx(U1,{})})})}),n.jsx(Je,{path:"/admin",element:n.jsx(pt,{children:n.jsx(gt,{children:n.jsx($1,{})})})}),n.jsx(Je,{path:"/smart-advertising",element:n.jsx(pt,{children:n.jsx(gt,{children:n.jsx(I1,{})})})}),n.jsx(Je,{path:"/support",element:n.jsx(pt,{children:n.jsx(gt,{children:n.jsx(M1,{})})})}),n.jsx(Je,{path:"/screen-sharing",element:n.jsx(pt,{children:n.jsx(gt,{children:n.jsx(F1,{})})})}),n.jsx(Je,{path:"/apps",element:n.jsx(pt,{children:n.jsx(gt,{children:n.jsx(z1,{})})})}),n.jsx(Je,{path:"*",element:n.jsx(bf,{to:"/dashboard",replace:!0})})]})]})}Ul.createRoot(document.getElementById("root")).render(n.jsx(lh.StrictMode,{children:n.jsx(Qx,{children:n.jsx(q1,{})})}));
//# sourceMappingURL=index-BIdGN-21.js.map
